!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).getVPAIDAd=t()}}(function(){return function t(e,n,r){function i(o,s){if(!n[o]){if(!e[o]){var u="function"==typeof require&&require;if(!s&&u)return u(o,!0);if(a)return a(o,!0);var _=new Error("Cannot find module '"+o+"'");throw _.code="MODULE_NOT_FOUND",_}var l=n[o]={exports:{}};e[o][0].call(l.exports,function(t){var n=e[o][1][t];return i(n||t)},l,l.exports,t,e,n,r)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(t,e,n){e.exports={SWF_VERSION:15,TARGET_PLAYER:"23.0"}},{}],2:[function(t,e,n){e.exports={adNetworkId:"926608",partner:"springserve"}},{}],3:[function(t,e,n){e.exports={moatPartnerCode:"yellowhammerflashint188671193078"}},{}],4:[function(t,e,n){"use strict";function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(t,e,n){if(t&&o.isObject(t)&&t instanceof r)return t;var i=new r;return i.parse(t,e,n),i}var a=t("punycode"),o=t("./util");n.parse=i,n.resolve=function(t,e){return i(t,!1,!0).resolve(e)},n.resolveObject=function(t,e){return t?i(t,!1,!0).resolveObject(e):e},n.format=function(t){return o.isString(t)&&(t=i(t)),t instanceof r?t.format():r.prototype.format.call(t)},n.Url=r;var s=/^([a-z0-9.+-]+:)/i,u=/:[0-9]*$/,_=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,l=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),c=["'"].concat(l),d=["%","/","?",";","#"].concat(c),h=["/","?","#"],f=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,E={javascript:!0,"javascript:":!0},v={javascript:!0,"javascript:":!0},A={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=t("querystring");r.prototype.parse=function(t,e,n){if(!o.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var r=t.indexOf("?"),i=-1!==r&&r<t.indexOf("#")?"?":"#",u=t.split(i);u[0]=u[0].replace(/\\/g,"/");var l=t=u.join(i);if(l=l.trim(),!n&&1===t.split("#").length){var R=_.exec(l);if(R)return this.path=l,this.href=l,this.pathname=R[1],R[2]?(this.search=R[2],this.query=e?y.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var S=s.exec(l);if(S){var O=(S=S[0]).toLowerCase();this.protocol=O,l=l.substr(S.length)}if(n||S||l.match(/^\/\/[^@\/]+@[^@\/]+/)){var g="//"===l.substr(0,2);!g||S&&v[S]||(l=l.substr(2),this.slashes=!0)}if(!v[S]&&(g||S&&!A[S])){for(var m=-1,T=0;T<h.length;T++){-1!==(P=l.indexOf(h[T]))&&(-1===m||P<m)&&(m=P)}var I,b;-1!==(b=-1===m?l.lastIndexOf("@"):l.lastIndexOf("@",m))&&(I=l.slice(0,b),l=l.slice(b+1),this.auth=decodeURIComponent(I)),m=-1;for(T=0;T<d.length;T++){var P=l.indexOf(d[T]);-1!==P&&(-1===m||P<m)&&(m=P)}-1===m&&(m=l.length),this.host=l.slice(0,m),l=l.slice(m),this.parseHost(),this.hostname=this.hostname||"";var D="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!D)for(var V=this.hostname.split(/\./),T=0,C=V.length;T<C;T++){var N=V[T];if(N&&!N.match(f)){for(var L="",w=0,M=N.length;w<M;w++)N.charCodeAt(w)>127?L+="x":L+=N[w];if(!L.match(f)){var j=V.slice(0,T),k=V.slice(T+1),x=N.match(p);x&&(j.push(x[1]),k.unshift(x[2])),k.length&&(l="/"+k.join(".")+l),this.hostname=j.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),D||(this.hostname=a.toASCII(this.hostname));var U=this.port?":"+this.port:"",F=this.hostname||"";this.host=F+U,this.href+=this.host,D&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==l[0]&&(l="/"+l))}if(!E[O])for(var T=0,C=c.length;T<C;T++){var B=c[T];if(-1!==l.indexOf(B)){var H=encodeURIComponent(B);H===B&&(H=escape(B)),l=l.split(B).join(H)}}var W=l.indexOf("#");-1!==W&&(this.hash=l.substr(W),l=l.slice(0,W));var G=l.indexOf("?");if(-1!==G?(this.search=l.substr(G),this.query=l.substr(G+1),e&&(this.query=y.parse(this.query)),l=l.slice(0,G)):e&&(this.search="",this.query={}),l&&(this.pathname=l),A[O]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var U=this.pathname||"",X=this.search||"";this.path=U+X}return this.href=this.format(),this},r.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,a="";this.host?i=t+this.host:this.hostname&&(i=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&o.isObject(this.query)&&Object.keys(this.query).length&&(a=y.stringify(this.query));var s=this.search||a&&"?"+a||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||A[e])&&!1!==i?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),n=n.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),s=s.replace("#","%23"),e+i+n+s+r},r.prototype.resolve=function(t){return this.resolveObject(i(t,!1,!0)).format()},r.prototype.resolveObject=function(t){if(o.isString(t)){var e=new r;e.parse(t,!1,!0),t=e}for(var n=new r,i=Object.keys(this),a=0;a<i.length;a++){var s=i[a];n[s]=this[s]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var u=Object.keys(t),_=0;_<u.length;_++){var l=u[_];"protocol"!==l&&(n[l]=t[l])}return A[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!A[t.protocol]){for(var c=Object.keys(t),d=0;d<c.length;d++){var h=c[d];n[h]=t[h]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||v[t.protocol])n.pathname=t.pathname;else{for(g=(t.pathname||"").split("/");g.length&&!(t.host=g.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==g[0]&&g.unshift(""),g.length<2&&g.unshift(""),n.pathname=g.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var f=n.pathname||"",p=n.search||"";n.path=f+p}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var E=n.pathname&&"/"===n.pathname.charAt(0),y=t.host||t.pathname&&"/"===t.pathname.charAt(0),R=y||E||n.host&&t.pathname,S=R,O=n.pathname&&n.pathname.split("/")||[],g=t.pathname&&t.pathname.split("/")||[],m=n.protocol&&!A[n.protocol];if(m&&(n.hostname="",n.port=null,n.host&&(""===O[0]?O[0]=n.host:O.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===g[0]?g[0]=t.host:g.unshift(t.host)),t.host=null),R=R&&(""===g[0]||""===O[0])),y)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,O=g;else if(g.length)O||(O=[]),O.pop(),O=O.concat(g),n.search=t.search,n.query=t.query;else if(!o.isNullOrUndefined(t.search)){if(m){n.hostname=n.host=O.shift();(V=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=V.shift(),n.host=n.hostname=V.shift())}return n.search=t.search,n.query=t.query,o.isNull(n.pathname)&&o.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!O.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var T=O.slice(-1)[0],I=(n.host||t.host||O.length>1)&&("."===T||".."===T)||""===T,b=0,P=O.length;P>=0;P--)"."===(T=O[P])?O.splice(P,1):".."===T?(O.splice(P,1),b++):b&&(O.splice(P,1),b--);if(!R&&!S)for(;b--;b)O.unshift("..");!R||""===O[0]||O[0]&&"/"===O[0].charAt(0)||O.unshift(""),I&&"/"!==O.join("/").substr(-1)&&O.push("");var D=""===O[0]||O[0]&&"/"===O[0].charAt(0);if(m){n.hostname=n.host=D?"":O.length?O.shift():"";var V=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");V&&(n.auth=V.shift(),n.host=n.hostname=V.shift())}return(R=R||n.host&&O.length)&&!D&&O.unshift(""),O.length?n.pathname=O.join("/"):(n.pathname=null,n.path=null),o.isNull(n.pathname)&&o.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var t=this.host,e=u.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},{"./util":5,punycode:186,querystring:189}],5:[function(t,e,n){"use strict";e.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},{}],6:[function(t,e,n){var r=t("./_getNative")(t("./_root"),"DataView");e.exports=r},{"./_getNative":81,"./_root":121}],7:[function(t,e,n){function r(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}var i=t("./_hashClear"),a=t("./_hashDelete"),o=t("./_hashGet"),s=t("./_hashHas"),u=t("./_hashSet");r.prototype.clear=i,r.prototype.delete=a,r.prototype.get=o,r.prototype.has=s,r.prototype.set=u,e.exports=r},{"./_hashClear":88,"./_hashDelete":89,"./_hashGet":90,"./_hashHas":91,"./_hashSet":92}],8:[function(t,e,n){function r(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}var i=t("./_listCacheClear"),a=t("./_listCacheDelete"),o=t("./_listCacheGet"),s=t("./_listCacheHas"),u=t("./_listCacheSet");r.prototype.clear=i,r.prototype.delete=a,r.prototype.get=o,r.prototype.has=s,r.prototype.set=u,e.exports=r},{"./_listCacheClear":100,"./_listCacheDelete":101,"./_listCacheGet":102,"./_listCacheHas":103,"./_listCacheSet":104}],9:[function(t,e,n){var r=t("./_getNative")(t("./_root"),"Map");e.exports=r},{"./_getNative":81,"./_root":121}],10:[function(t,e,n){function r(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}var i=t("./_mapCacheClear"),a=t("./_mapCacheDelete"),o=t("./_mapCacheGet"),s=t("./_mapCacheHas"),u=t("./_mapCacheSet");r.prototype.clear=i,r.prototype.delete=a,r.prototype.get=o,r.prototype.has=s,r.prototype.set=u,e.exports=r},{"./_mapCacheClear":105,"./_mapCacheDelete":106,"./_mapCacheGet":107,"./_mapCacheHas":108,"./_mapCacheSet":109}],11:[function(t,e,n){var r=t("./_getNative")(t("./_root"),"Promise");e.exports=r},{"./_getNative":81,"./_root":121}],12:[function(t,e,n){var r=t("./_getNative")(t("./_root"),"Set");e.exports=r},{"./_getNative":81,"./_root":121}],13:[function(t,e,n){function r(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new i;++e<n;)this.add(t[e])}var i=t("./_MapCache"),a=t("./_setCacheAdd"),o=t("./_setCacheHas");r.prototype.add=r.prototype.push=a,r.prototype.has=o,e.exports=r},{"./_MapCache":10,"./_setCacheAdd":122,"./_setCacheHas":123}],14:[function(t,e,n){function r(t){var e=this.__data__=new i(t);this.size=e.size}var i=t("./_ListCache"),a=t("./_stackClear"),o=t("./_stackDelete"),s=t("./_stackGet"),u=t("./_stackHas"),_=t("./_stackSet");r.prototype.clear=a,r.prototype.delete=o,r.prototype.get=s,r.prototype.has=u,r.prototype.set=_,e.exports=r},{"./_ListCache":8,"./_stackClear":127,"./_stackDelete":128,"./_stackGet":129,"./_stackHas":130,"./_stackSet":131}],15:[function(t,e,n){var r=t("./_root").Symbol;e.exports=r},{"./_root":121}],16:[function(t,e,n){var r=t("./_root").Uint8Array;e.exports=r},{"./_root":121}],17:[function(t,e,n){var r=t("./_getNative")(t("./_root"),"WeakMap");e.exports=r},{"./_getNative":81,"./_root":121}],18:[function(t,e,n){e.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},{}],19:[function(t,e,n){e.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}},{}],20:[function(t,e,n){e.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,a=[];++n<r;){var o=t[n];e(o,n,t)&&(a[i++]=o)}return a}},{}],21:[function(t,e,n){var r=t("./_baseTimes"),i=t("./isArguments"),a=t("./isArray"),o=t("./isBuffer"),s=t("./_isIndex"),u=t("./isTypedArray"),_=Object.prototype.hasOwnProperty;e.exports=function(t,e){var n=a(t),l=!n&&i(t),c=!n&&!l&&o(t),d=!n&&!l&&!c&&u(t),h=n||l||c||d,f=h?r(t.length,String):[],p=f.length;for(var E in t)!e&&!_.call(t,E)||h&&("length"==E||c&&("offset"==E||"parent"==E)||d&&("buffer"==E||"byteLength"==E||"byteOffset"==E)||s(E,p))||f.push(E);return f}},{"./_baseTimes":59,"./_isIndex":93,"./isArguments":150,"./isArray":151,"./isBuffer":154,"./isTypedArray":167}],22:[function(t,e,n){e.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}},{}],23:[function(t,e,n){e.exports=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}},{}],24:[function(t,e,n){e.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}},{}],25:[function(t,e,n){var r=t("./_baseAssignValue"),i=t("./eq"),a=Object.prototype.hasOwnProperty;e.exports=function(t,e,n){var o=t[e];a.call(t,e)&&i(o,n)&&(void 0!==n||e in t)||r(t,e,n)}},{"./_baseAssignValue":27,"./eq":140}],26:[function(t,e,n){var r=t("./eq");e.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},{"./eq":140}],27:[function(t,e,n){var r=t("./_defineProperty");e.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},{"./_defineProperty":73}],28:[function(t,e,n){var r=t("./_baseForOwn"),i=t("./_createBaseEach")(r);e.exports=i},{"./_baseForOwn":33,"./_createBaseEach":69}],29:[function(t,e,n){var r=t("./isSymbol");e.exports=function(t,e,n){for(var i=-1,a=t.length;++i<a;){var o=t[i],s=e(o);if(null!=s&&(void 0===u?s==s&&!r(s):n(s,u)))var u=s,_=o}return _}},{"./isSymbol":166}],30:[function(t,e,n){var r=t("./_baseEach");e.exports=function(t,e){var n=[];return r(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}},{"./_baseEach":28}],31:[function(t,e,n){e.exports=function(t,e,n,r){for(var i=t.length,a=n+(r?1:-1);r?a--:++a<i;)if(e(t[a],a,t))return a;return-1}},{}],32:[function(t,e,n){var r=t("./_createBaseFor")();e.exports=r},{"./_createBaseFor":70}],33:[function(t,e,n){var r=t("./_baseFor"),i=t("./keys");e.exports=function(t,e){return t&&r(t,e,i)}},{"./_baseFor":32,"./keys":169}],34:[function(t,e,n){var r=t("./_castPath"),i=t("./_toKey");e.exports=function(t,e){for(var n=0,a=(e=r(e,t)).length;null!=t&&n<a;)t=t[i(e[n++])];return n&&n==a?t:void 0}},{"./_castPath":65,"./_toKey":134}],35:[function(t,e,n){var r=t("./_arrayPush"),i=t("./isArray");e.exports=function(t,e,n){var a=e(t);return i(t)?a:r(a,n(t))}},{"./_arrayPush":23,"./isArray":151}],36:[function(t,e,n){var r=t("./_Symbol"),i=t("./_getRawTag"),a=t("./_objectToString"),o="[object Null]",s="[object Undefined]",u=r?r.toStringTag:void 0;e.exports=function(t){return null==t?void 0===t?s:o:u&&u in Object(t)?i(t):a(t)}},{"./_Symbol":15,"./_getRawTag":83,"./_objectToString":117}],37:[function(t,e,n){e.exports=function(t,e){return null!=t&&e in Object(t)}},{}],38:[function(t,e,n){var r=t("./_baseFindIndex"),i=t("./_baseIsNaN"),a=t("./_strictIndexOf");e.exports=function(t,e,n){return e==e?a(t,e,n):r(t,i,n)}},{"./_baseFindIndex":31,"./_baseIsNaN":43,"./_strictIndexOf":132}],39:[function(t,e,n){var r=t("./_baseGetTag"),i=t("./isObjectLike"),a="[object Arguments]";e.exports=function(t){return i(t)&&r(t)==a}},{"./_baseGetTag":36,"./isObjectLike":163}],40:[function(t,e,n){function r(t,e,n,o,s){return t===e||(null==t||null==e||!a(t)&&!a(e)?t!=t&&e!=e:i(t,e,n,o,r,s))}var i=t("./_baseIsEqualDeep"),a=t("./isObjectLike");e.exports=r},{"./_baseIsEqualDeep":41,"./isObjectLike":163}],41:[function(t,e,n){var r=t("./_Stack"),i=t("./_equalArrays"),a=t("./_equalByTag"),o=t("./_equalObjects"),s=t("./_getTag"),u=t("./isArray"),_=t("./isBuffer"),l=t("./isTypedArray"),c=1,d="[object Arguments]",h="[object Array]",f="[object Object]",p=Object.prototype.hasOwnProperty;e.exports=function(t,e,n,E,v,A){var y=u(t),R=u(e),S=y?h:s(t),O=R?h:s(e),g=(S=S==d?f:S)==f,m=(O=O==d?f:O)==f,T=S==O;if(T&&_(t)){if(!_(e))return!1;y=!0,g=!1}if(T&&!g)return A||(A=new r),y||l(t)?i(t,e,n,E,v,A):a(t,e,S,n,E,v,A);if(!(n&c)){var I=g&&p.call(t,"__wrapped__"),b=m&&p.call(e,"__wrapped__");if(I||b){var P=I?t.value():t,D=b?e.value():e;return A||(A=new r),v(P,D,n,E,A)}}return!!T&&(A||(A=new r),o(t,e,n,E,v,A))}},{"./_Stack":14,"./_equalArrays":74,"./_equalByTag":75,"./_equalObjects":76,"./_getTag":85,"./isArray":151,"./isBuffer":154,"./isTypedArray":167}],42:[function(t,e,n){var r=t("./_Stack"),i=t("./_baseIsEqual"),a=1,o=2;e.exports=function(t,e,n,s){var u=n.length,_=u,l=!s;if(null==t)return!_;for(t=Object(t);u--;){var c=n[u];if(l&&c[2]?c[1]!==t[c[0]]:!(c[0]in t))return!1}for(;++u<_;){var d=(c=n[u])[0],h=t[d],f=c[1];if(l&&c[2]){if(void 0===h&&!(d in t))return!1}else{var p=new r;if(s)var E=s(h,f,d,t,e,p);if(!(void 0===E?i(f,h,a|o,s,p):E))return!1}}return!0}},{"./_Stack":14,"./_baseIsEqual":40}],43:[function(t,e,n){e.exports=function(t){return t!=t}},{}],44:[function(t,e,n){var r=t("./isFunction"),i=t("./_isMasked"),a=t("./isObject"),o=t("./_toSource"),s=/^\[object .+?Constructor\]$/,u=Function.prototype,_=Object.prototype,l=u.toString,c=_.hasOwnProperty,d=RegExp("^"+l.call(c).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(t){return!(!a(t)||i(t))&&(r(t)?d:s).test(o(t))}},{"./_isMasked":97,"./_toSource":135,"./isFunction":156,"./isObject":162}],45:[function(t,e,n){var r=t("./_baseGetTag"),i=t("./isLength"),a=t("./isObjectLike"),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1,e.exports=function(t){return a(t)&&i(t.length)&&!!o[r(t)]}},{"./_baseGetTag":36,"./isLength":158,"./isObjectLike":163}],46:[function(t,e,n){var r=t("./_baseMatches"),i=t("./_baseMatchesProperty"),a=t("./identity"),o=t("./isArray"),s=t("./property");e.exports=function(t){return"function"==typeof t?t:null==t?a:"object"==typeof t?o(t)?i(t[0],t[1]):r(t):s(t)}},{"./_baseMatches":51,"./_baseMatchesProperty":52,"./identity":148,"./isArray":151,"./property":177}],47:[function(t,e,n){var r=t("./_isPrototype"),i=t("./_nativeKeys"),a=Object.prototype.hasOwnProperty;e.exports=function(t){if(!r(t))return i(t);var e=[];for(var n in Object(t))a.call(t,n)&&"constructor"!=n&&e.push(n);return e}},{"./_isPrototype":98,"./_nativeKeys":114}],48:[function(t,e,n){var r=t("./isObject"),i=t("./_isPrototype"),a=t("./_nativeKeysIn"),o=Object.prototype.hasOwnProperty;e.exports=function(t){if(!r(t))return a(t);var e=i(t),n=[];for(var s in t)("constructor"!=s||!e&&o.call(t,s))&&n.push(s);return n}},{"./_isPrototype":98,"./_nativeKeysIn":115,"./isObject":162}],49:[function(t,e,n){e.exports=function(t,e){return t<e}},{}],50:[function(t,e,n){var r=t("./_baseEach"),i=t("./isArrayLike");e.exports=function(t,e){var n=-1,a=i(t)?Array(t.length):[];return r(t,function(t,r,i){a[++n]=e(t,r,i)}),a}},{"./_baseEach":28,"./isArrayLike":152}],51:[function(t,e,n){var r=t("./_baseIsMatch"),i=t("./_getMatchData"),a=t("./_matchesStrictComparable");e.exports=function(t){var e=i(t);return 1==e.length&&e[0][2]?a(e[0][0],e[0][1]):function(n){return n===t||r(n,t,e)}}},{"./_baseIsMatch":42,"./_getMatchData":80,"./_matchesStrictComparable":111}],52:[function(t,e,n){var r=t("./_baseIsEqual"),i=t("./get"),a=t("./hasIn"),o=t("./_isKey"),s=t("./_isStrictComparable"),u=t("./_matchesStrictComparable"),_=t("./_toKey"),l=1,c=2;e.exports=function(t,e){return o(t)&&s(e)?u(_(t),e):function(n){var o=i(n,t);return void 0===o&&o===e?a(n,t):r(e,o,l|c)}}},{"./_baseIsEqual":40,"./_isKey":95,"./_isStrictComparable":99,"./_matchesStrictComparable":111,"./_toKey":134,"./get":146,"./hasIn":147}],53:[function(t,e,n){e.exports=function(t){return function(e){return null==e?void 0:e[t]}}},{}],54:[function(t,e,n){var r=t("./_baseGet");e.exports=function(t){return function(e){return r(e,t)}}},{"./_baseGet":34}],55:[function(t,e,n){var r=t("./_baseUnset"),i=t("./_isIndex"),a=Array.prototype.splice;e.exports=function(t,e){for(var n=t?e.length:0,o=n-1;n--;){var s=e[n];if(n==o||s!==u){var u=s;i(s)?a.call(t,s,1):r(t,s)}}return t}},{"./_baseUnset":62,"./_isIndex":93}],56:[function(t,e,n){var r=t("./identity"),i=t("./_overRest"),a=t("./_setToString");e.exports=function(t,e){return a(i(t,e,r),t+"")}},{"./_overRest":119,"./_setToString":125,"./identity":148}],57:[function(t,e,n){var r=t("./constant"),i=t("./_defineProperty"),a=t("./identity"),o=i?function(t,e){return i(t,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:a;e.exports=o},{"./_defineProperty":73,"./constant":138,"./identity":148}],58:[function(t,e,n){e.exports=function(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var a=Array(i);++r<i;)a[r]=t[r+e];return a}},{}],59:[function(t,e,n){e.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}},{}],60:[function(t,e,n){function r(t){if("string"==typeof t)return t;if(o(t))return a(t,r)+"";if(s(t))return l?l.call(t):"";var e=t+"";return"0"==e&&1/t==-u?"-0":e}var i=t("./_Symbol"),a=t("./_arrayMap"),o=t("./isArray"),s=t("./isSymbol"),u=1/0,_=i?i.prototype:void 0,l=_?_.toString:void 0;e.exports=r},{"./_Symbol":15,"./_arrayMap":22,"./isArray":151,"./isSymbol":166}],61:[function(t,e,n){e.exports=function(t){return function(e){return t(e)}}},{}],62:[function(t,e,n){var r=t("./_castPath"),i=t("./last"),a=t("./_parent"),o=t("./_toKey");e.exports=function(t,e){return e=r(e,t),null==(t=a(t,e))||delete t[o(i(e))]}},{"./_castPath":65,"./_parent":120,"./_toKey":134,"./last":171}],63:[function(t,e,n){e.exports=function(t,e){return t.has(e)}},{}],64:[function(t,e,n){var r=t("./identity");e.exports=function(t){return"function"==typeof t?t:r}},{"./identity":148}],65:[function(t,e,n){var r=t("./isArray"),i=t("./_isKey"),a=t("./_stringToPath"),o=t("./toString");e.exports=function(t,e){return r(t)?t:i(t,e)?[t]:a(o(t))}},{"./_isKey":95,"./_stringToPath":133,"./isArray":151,"./toString":184}],66:[function(t,e,n){var r=t("./_assignValue"),i=t("./_baseAssignValue");e.exports=function(t,e,n,a){var o=!n;n||(n={});for(var s=-1,u=e.length;++s<u;){var _=e[s],l=a?a(n[_],t[_],_,n,t):void 0;void 0===l&&(l=t[_]),o?i(n,_,l):r(n,_,l)}return n}},{"./_assignValue":25,"./_baseAssignValue":27}],67:[function(t,e,n){var r=t("./_root")["__core-js_shared__"];e.exports=r},{"./_root":121}],68:[function(t,e,n){var r=t("./_baseRest"),i=t("./_isIterateeCall");e.exports=function(t){return r(function(e,n){var r=-1,a=n.length,o=a>1?n[a-1]:void 0,s=a>2?n[2]:void 0;for(o=t.length>3&&"function"==typeof o?(a--,o):void 0,s&&i(n[0],n[1],s)&&(o=a<3?void 0:o,a=1),e=Object(e);++r<a;){var u=n[r];u&&t(e,u,r,o)}return e})}},{"./_baseRest":56,"./_isIterateeCall":94}],69:[function(t,e,n){var r=t("./isArrayLike");e.exports=function(t,e){return function(n,i){if(null==n)return n;if(!r(n))return t(n,i);for(var a=n.length,o=e?a:-1,s=Object(n);(e?o--:++o<a)&&!1!==i(s[o],o,s););return n}}},{"./isArrayLike":152}],70:[function(t,e,n){e.exports=function(t){return function(e,n,r){for(var i=-1,a=Object(e),o=r(e),s=o.length;s--;){var u=o[t?s:++i];if(!1===n(a[u],u,a))break}return e}}},{}],71:[function(t,e,n){var r=t("./_baseIteratee"),i=t("./isArrayLike"),a=t("./keys");e.exports=function(t){return function(e,n,o){var s=Object(e);if(!i(e)){var u=r(n,3);e=a(e),n=function(t){return u(s[t],t,s)}}var _=t(e,n,o);return _>-1?s[u?e[_]:_]:void 0}}},{"./_baseIteratee":46,"./isArrayLike":152,"./keys":169}],72:[function(t,e,n){var r=t("./eq"),i=Object.prototype,a=i.hasOwnProperty;e.exports=function(t,e,n,o){return void 0===t||r(t,i[n])&&!a.call(o,n)?e:t}},{"./eq":140}],73:[function(t,e,n){var r=t("./_getNative"),i=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();e.exports=i},{"./_getNative":81}],74:[function(t,e,n){var r=t("./_SetCache"),i=t("./_arraySome"),a=t("./_cacheHas"),o=1,s=2;e.exports=function(t,e,n,u,_,l){var c=n&o,d=t.length,h=e.length;if(d!=h&&!(c&&h>d))return!1;var f=l.get(t);if(f&&l.get(e))return f==e;var p=-1,E=!0,v=n&s?new r:void 0;for(l.set(t,e),l.set(e,t);++p<d;){var A=t[p],y=e[p];if(u)var R=c?u(y,A,p,e,t,l):u(A,y,p,t,e,l);if(void 0!==R){if(R)continue;E=!1;break}if(v){if(!i(e,function(t,e){if(!a(v,e)&&(A===t||_(A,t,n,u,l)))return v.push(e)})){E=!1;break}}else if(A!==y&&!_(A,y,n,u,l)){E=!1;break}}return l.delete(t),l.delete(e),E}},{"./_SetCache":13,"./_arraySome":24,"./_cacheHas":63}],75:[function(t,e,n){var r=t("./_Symbol"),i=t("./_Uint8Array"),a=t("./eq"),o=t("./_equalArrays"),s=t("./_mapToArray"),u=t("./_setToArray"),_=1,l=2,c="[object Boolean]",d="[object Date]",h="[object Error]",f="[object Map]",p="[object Number]",E="[object RegExp]",v="[object Set]",A="[object String]",y="[object Symbol]",R="[object ArrayBuffer]",S="[object DataView]",O=r?r.prototype:void 0,g=O?O.valueOf:void 0;e.exports=function(t,e,n,r,O,m,T){switch(n){case S:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case R:return!(t.byteLength!=e.byteLength||!m(new i(t),new i(e)));case c:case d:case p:return a(+t,+e);case h:return t.name==e.name&&t.message==e.message;case E:case A:return t==e+"";case f:var I=s;case v:var b=r&_;if(I||(I=u),t.size!=e.size&&!b)return!1;var P=T.get(t);if(P)return P==e;r|=l,T.set(t,e);var D=o(I(t),I(e),r,O,m,T);return T.delete(t),D;case y:if(g)return g.call(t)==g.call(e)}return!1}},{"./_Symbol":15,"./_Uint8Array":16,"./_equalArrays":74,"./_mapToArray":110,"./_setToArray":124,"./eq":140}],76:[function(t,e,n){var r=t("./_getAllKeys"),i=1,a=Object.prototype.hasOwnProperty;e.exports=function(t,e,n,o,s,u){var _=n&i,l=r(t),c=l.length;if(c!=r(e).length&&!_)return!1;for(var d=c;d--;){var h=l[d];if(!(_?h in e:a.call(e,h)))return!1}var f=u.get(t);if(f&&u.get(e))return f==e;var p=!0;u.set(t,e),u.set(e,t);for(var E=_;++d<c;){var v=t[h=l[d]],A=e[h];if(o)var y=_?o(A,v,h,e,t,u):o(v,A,h,t,e,u);if(!(void 0===y?v===A||s(v,A,n,o,u):y)){p=!1;break}E||(E="constructor"==h)}if(p&&!E){var R=t.constructor,S=e.constructor;R!=S&&"constructor"in t&&"constructor"in e&&!("function"==typeof R&&R instanceof R&&"function"==typeof S&&S instanceof S)&&(p=!1)}return u.delete(t),u.delete(e),p}},{"./_getAllKeys":78}],77:[function(t,e,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],78:[function(t,e,n){var r=t("./_baseGetAllKeys"),i=t("./_getSymbols"),a=t("./keys");e.exports=function(t){return r(t,a,i)}},{"./_baseGetAllKeys":35,"./_getSymbols":84,"./keys":169}],79:[function(t,e,n){var r=t("./_isKeyable");e.exports=function(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}},{"./_isKeyable":96}],80:[function(t,e,n){var r=t("./_isStrictComparable"),i=t("./keys");e.exports=function(t){for(var e=i(t),n=e.length;n--;){var a=e[n],o=t[a];e[n]=[a,o,r(o)]}return e}},{"./_isStrictComparable":99,"./keys":169}],81:[function(t,e,n){var r=t("./_baseIsNative"),i=t("./_getValue");e.exports=function(t,e){var n=i(t,e);return r(n)?n:void 0}},{"./_baseIsNative":44,"./_getValue":86}],82:[function(t,e,n){var r=t("./_overArg")(Object.getPrototypeOf,Object);e.exports=r},{"./_overArg":118}],83:[function(t,e,n){var r=t("./_Symbol"),i=Object.prototype,a=i.hasOwnProperty,o=i.toString,s=r?r.toStringTag:void 0;e.exports=function(t){var e=a.call(t,s),n=t[s];try{t[s]=void 0;var r=!0}catch(t){}var i=o.call(t);return r&&(e?t[s]=n:delete t[s]),i}},{"./_Symbol":15}],84:[function(t,e,n){var r=t("./_arrayFilter"),i=t("./stubArray"),a=Object.prototype.propertyIsEnumerable,o=Object.getOwnPropertySymbols,s=o?function(t){return null==t?[]:(t=Object(t),r(o(t),function(e){return a.call(t,e)}))}:i;e.exports=s},{"./_arrayFilter":20,"./stubArray":179}],85:[function(t,e,n){var r=t("./_DataView"),i=t("./_Map"),a=t("./_Promise"),o=t("./_Set"),s=t("./_WeakMap"),u=t("./_baseGetTag"),_=t("./_toSource"),l="[object Promise]",c="[object WeakMap]",d="[object DataView]",h=_(r),f=_(i),p=_(a),E=_(o),v=_(s),A=u;(r&&A(new r(new ArrayBuffer(1)))!=d||i&&"[object Map]"!=A(new i)||a&&A(a.resolve())!=l||o&&"[object Set]"!=A(new o)||s&&A(new s)!=c)&&(A=function(t){var e=u(t),n="[object Object]"==e?t.constructor:void 0,r=n?_(n):"";if(r)switch(r){case h:return d;case f:return"[object Map]";case p:return l;case E:return"[object Set]";case v:return c}return e}),e.exports=A},{"./_DataView":6,"./_Map":9,"./_Promise":11,"./_Set":12,"./_WeakMap":17,"./_baseGetTag":36,"./_toSource":135}],86:[function(t,e,n){e.exports=function(t,e){return null==t?void 0:t[e]}},{}],87:[function(t,e,n){var r=t("./_castPath"),i=t("./isArguments"),a=t("./isArray"),o=t("./_isIndex"),s=t("./isLength"),u=t("./_toKey");e.exports=function(t,e,n){for(var _=-1,l=(e=r(e,t)).length,c=!1;++_<l;){var d=u(e[_]);if(!(c=null!=t&&n(t,d)))break;t=t[d]}return c||++_!=l?c:!!(l=null==t?0:t.length)&&s(l)&&o(d,l)&&(a(t)||i(t))}},{"./_castPath":65,"./_isIndex":93,"./_toKey":134,"./isArguments":150,"./isArray":151,"./isLength":158}],88:[function(t,e,n){var r=t("./_nativeCreate");e.exports=function(){this.__data__=r?r(null):{},this.size=0}},{"./_nativeCreate":113}],89:[function(t,e,n){e.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},{}],90:[function(t,e,n){var r=t("./_nativeCreate"),i="__lodash_hash_undefined__",a=Object.prototype.hasOwnProperty;e.exports=function(t){var e=this.__data__;if(r){var n=e[t];return n===i?void 0:n}return a.call(e,t)?e[t]:void 0}},{"./_nativeCreate":113}],91:[function(t,e,n){var r=t("./_nativeCreate"),i=Object.prototype.hasOwnProperty;e.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:i.call(e,t)}},{"./_nativeCreate":113}],92:[function(t,e,n){var r=t("./_nativeCreate"),i="__lodash_hash_undefined__";e.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?i:e,this}},{"./_nativeCreate":113}],93:[function(t,e,n){var r=9007199254740991,i=/^(?:0|[1-9]\d*)$/;e.exports=function(t,e){return!!(e=null==e?r:e)&&("number"==typeof t||i.test(t))&&t>-1&&t%1==0&&t<e}},{}],94:[function(t,e,n){var r=t("./eq"),i=t("./isArrayLike"),a=t("./_isIndex"),o=t("./isObject");e.exports=function(t,e,n){if(!o(n))return!1;var s=typeof e;return!!("number"==s?i(n)&&a(e,n.length):"string"==s&&e in n)&&r(n[e],t)}},{"./_isIndex":93,"./eq":140,"./isArrayLike":152,"./isObject":162}],95:[function(t,e,n){var r=t("./isArray"),i=t("./isSymbol"),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;e.exports=function(t,e){if(r(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!i(t))||o.test(t)||!a.test(t)||null!=e&&t in Object(e)}},{"./isArray":151,"./isSymbol":166}],96:[function(t,e,n){e.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},{}],97:[function(t,e,n){var r=t("./_coreJsData"),i=function(){var t=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();e.exports=function(t){return!!i&&i in t}},{"./_coreJsData":67}],98:[function(t,e,n){var r=Object.prototype;e.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||r)}},{}],99:[function(t,e,n){var r=t("./isObject");e.exports=function(t){return t==t&&!r(t)}},{"./isObject":162}],100:[function(t,e,n){e.exports=function(){this.__data__=[],this.size=0}},{}],101:[function(t,e,n){var r=t("./_assocIndexOf"),i=Array.prototype.splice;e.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0||(n==e.length-1?e.pop():i.call(e,n,1),--this.size,0))}},{"./_assocIndexOf":26}],102:[function(t,e,n){var r=t("./_assocIndexOf");e.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},{"./_assocIndexOf":26}],103:[function(t,e,n){var r=t("./_assocIndexOf");e.exports=function(t){return r(this.__data__,t)>-1}},{"./_assocIndexOf":26}],104:[function(t,e,n){var r=t("./_assocIndexOf");e.exports=function(t,e){var n=this.__data__,i=r(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}},{"./_assocIndexOf":26}],105:[function(t,e,n){var r=t("./_Hash"),i=t("./_ListCache"),a=t("./_Map");e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(a||i),string:new r}}},{"./_Hash":7,"./_ListCache":8,"./_Map":9}],106:[function(t,e,n){var r=t("./_getMapData");e.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}},{"./_getMapData":79}],107:[function(t,e,n){var r=t("./_getMapData");e.exports=function(t){return r(this,t).get(t)}},{"./_getMapData":79}],108:[function(t,e,n){var r=t("./_getMapData");e.exports=function(t){return r(this,t).has(t)}},{"./_getMapData":79}],109:[function(t,e,n){var r=t("./_getMapData");e.exports=function(t,e){var n=r(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}},{"./_getMapData":79}],110:[function(t,e,n){e.exports=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}},{}],111:[function(t,e,n){e.exports=function(t,e){return function(n){return null!=n&&n[t]===e&&(void 0!==e||t in Object(n))}}},{}],112:[function(t,e,n){var r=t("./memoize"),i=500;e.exports=function(t){var e=r(t,function(t){return n.size===i&&n.clear(),t}),n=e.cache;return e}},{"./memoize":174}],113:[function(t,e,n){var r=t("./_getNative")(Object,"create");e.exports=r},{"./_getNative":81}],114:[function(t,e,n){var r=t("./_overArg")(Object.keys,Object);e.exports=r},{"./_overArg":118}],115:[function(t,e,n){e.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},{}],116:[function(t,e,n){var r=t("./_freeGlobal"),i="object"==typeof n&&n&&!n.nodeType&&n,a=i&&"object"==typeof e&&e&&!e.nodeType&&e,o=a&&a.exports===i&&r.process,s=function(){try{return o&&o.binding&&o.binding("util")}catch(t){}}();e.exports=s},{"./_freeGlobal":77}],117:[function(t,e,n){var r=Object.prototype.toString;e.exports=function(t){return r.call(t)}},{}],118:[function(t,e,n){e.exports=function(t,e){return function(n){return t(e(n))}}},{}],119:[function(t,e,n){var r=t("./_apply"),i=Math.max;e.exports=function(t,e,n){return e=i(void 0===e?t.length-1:e,0),function(){for(var a=arguments,o=-1,s=i(a.length-e,0),u=Array(s);++o<s;)u[o]=a[e+o];o=-1;for(var _=Array(e+1);++o<e;)_[o]=a[o];return _[e]=n(u),r(t,this,_)}}},{"./_apply":18}],120:[function(t,e,n){var r=t("./_baseGet"),i=t("./_baseSlice");e.exports=function(t,e){return e.length<2?t:r(t,i(e,0,-1))}},{"./_baseGet":34,"./_baseSlice":58}],121:[function(t,e,n){var r=t("./_freeGlobal"),i="object"==typeof self&&self&&self.Object===Object&&self,a=r||i||Function("return this")();e.exports=a},{"./_freeGlobal":77}],122:[function(t,e,n){var r="__lodash_hash_undefined__";e.exports=function(t){return this.__data__.set(t,r),this}},{}],123:[function(t,e,n){e.exports=function(t){return this.__data__.has(t)}},{}],124:[function(t,e,n){e.exports=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}},{}],125:[function(t,e,n){var r=t("./_baseSetToString"),i=t("./_shortOut")(r);e.exports=i},{"./_baseSetToString":57,"./_shortOut":126}],126:[function(t,e,n){var r=800,i=16,a=Date.now;e.exports=function(t){var e=0,n=0;return function(){var o=a(),s=i-(o-n);if(n=o,s>0){if(++e>=r)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}},{}],127:[function(t,e,n){var r=t("./_ListCache");e.exports=function(){this.__data__=new r,this.size=0}},{"./_ListCache":8}],128:[function(t,e,n){e.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},{}],129:[function(t,e,n){e.exports=function(t){return this.__data__.get(t)}},{}],130:[function(t,e,n){e.exports=function(t){return this.__data__.has(t)}},{}],131:[function(t,e,n){var r=t("./_ListCache"),i=t("./_Map"),a=t("./_MapCache"),o=200;e.exports=function(t,e){var n=this.__data__;if(n instanceof r){var s=n.__data__;if(!i||s.length<o-1)return s.push([t,e]),this.size=++n.size,this;n=this.__data__=new a(s)}return n.set(t,e),this.size=n.size,this}},{"./_ListCache":8,"./_Map":9,"./_MapCache":10}],132:[function(t,e,n){e.exports=function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}},{}],133:[function(t,e,n){var r=/^\./,i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,o=t("./_memoizeCapped")(function(t){var e=[];return r.test(t)&&e.push(""),t.replace(i,function(t,n,r,i){e.push(r?i.replace(a,"$1"):n||t)}),e});e.exports=o},{"./_memoizeCapped":112}],134:[function(t,e,n){var r=t("./isSymbol"),i=1/0;e.exports=function(t){if("string"==typeof t||r(t))return t;var e=t+"";return"0"==e&&1/t==-i?"-0":e}},{"./isSymbol":166}],135:[function(t,e,n){var r=Function.prototype.toString;e.exports=function(t){if(null!=t){try{return r.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},{}],136:[function(t,e,n){var r=t("./_copyObject"),i=t("./_createAssigner"),a=t("./keysIn"),o=i(function(t,e){r(e,a(e),t)});e.exports=o},{"./_copyObject":66,"./_createAssigner":68,"./keysIn":170}],137:[function(t,e,n){var r=t("./_copyObject"),i=t("./_createAssigner"),a=t("./keysIn"),o=i(function(t,e,n,i){r(e,a(e),t,i)});e.exports=o},{"./_copyObject":66,"./_createAssigner":68,"./keysIn":170}],138:[function(t,e,n){e.exports=function(t){return function(){return t}}},{}],139:[function(t,e,n){var r=t("./_apply"),i=t("./assignInWith"),a=t("./_baseRest"),o=t("./_customDefaultsAssignIn"),s=a(function(t){return t.push(void 0,o),r(i,void 0,t)});e.exports=s},{"./_apply":18,"./_baseRest":56,"./_customDefaultsAssignIn":72,"./assignInWith":137}],140:[function(t,e,n){e.exports=function(t,e){return t===e||t!=t&&e!=e}},{}],141:[function(t,e,n){e.exports=t("./assignIn")},{"./assignIn":136}],142:[function(t,e,n){var r=t("./_arrayFilter"),i=t("./_baseFilter"),a=t("./_baseIteratee"),o=t("./isArray");e.exports=function(t,e){return(o(t)?r:i)(t,a(e,3))}},{"./_arrayFilter":20,"./_baseFilter":30,"./_baseIteratee":46,"./isArray":151}],143:[function(t,e,n){var r=t("./_createFind")(t("./findIndex"));e.exports=r},{"./_createFind":71,"./findIndex":144}],144:[function(t,e,n){var r=t("./_baseFindIndex"),i=t("./_baseIteratee"),a=t("./toInteger"),o=Math.max;e.exports=function(t,e,n){var s=null==t?0:t.length;if(!s)return-1;var u=null==n?0:a(n);return u<0&&(u=o(s+u,0)),r(t,i(e,3),u)}},{"./_baseFindIndex":31,"./_baseIteratee":46,"./toInteger":182}],145:[function(t,e,n){var r=t("./_arrayEach"),i=t("./_baseEach"),a=t("./_castFunction"),o=t("./isArray");e.exports=function(t,e){return(o(t)?r:i)(t,a(e))}},{"./_arrayEach":19,"./_baseEach":28,"./_castFunction":64,"./isArray":151}],146:[function(t,e,n){var r=t("./_baseGet");e.exports=function(t,e,n){var i=null==t?void 0:r(t,e);return void 0===i?n:i}},{"./_baseGet":34}],147:[function(t,e,n){var r=t("./_baseHasIn"),i=t("./_hasPath");e.exports=function(t,e){return null!=t&&i(t,e,r)}},{"./_baseHasIn":37,"./_hasPath":87}],148:[function(t,e,n){e.exports=function(t){return t}},{}],149:[function(t,e,n){var r=t("./_baseIndexOf"),i=t("./toInteger"),a=Math.max;e.exports=function(t,e,n){var o=null==t?0:t.length;if(!o)return-1;var s=null==n?0:i(n);return s<0&&(s=a(o+s,0)),r(t,e,s)}},{"./_baseIndexOf":38,"./toInteger":182}],150:[function(t,e,n){var r=t("./_baseIsArguments"),i=t("./isObjectLike"),a=Object.prototype,o=a.hasOwnProperty,s=a.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(t){return i(t)&&o.call(t,"callee")&&!s.call(t,"callee")};e.exports=u},{"./_baseIsArguments":39,"./isObjectLike":163}],151:[function(t,e,n){var r=Array.isArray;e.exports=r},{}],152:[function(t,e,n){var r=t("./isFunction"),i=t("./isLength");e.exports=function(t){return null!=t&&i(t.length)&&!r(t)}},{"./isFunction":156,"./isLength":158}],153:[function(t,e,n){var r=t("./_baseGetTag"),i=t("./isObjectLike"),a="[object Boolean]";e.exports=function(t){return!0===t||!1===t||i(t)&&r(t)==a}},{"./_baseGetTag":36,"./isObjectLike":163}],154:[function(t,e,n){var r=t("./_root"),i=t("./stubFalse"),a="object"==typeof n&&n&&!n.nodeType&&n,o=a&&"object"==typeof e&&e&&!e.nodeType&&e,s=o&&o.exports===a?r.Buffer:void 0,u=(s?s.isBuffer:void 0)||i;e.exports=u},{"./_root":121,"./stubFalse":180}],155:[function(t,e,n){var r=t("./isObjectLike"),i=t("./isPlainObject");e.exports=function(t){return r(t)&&1===t.nodeType&&!i(t)}},{"./isObjectLike":163,"./isPlainObject":164}],156:[function(t,e,n){var r=t("./_baseGetTag"),i=t("./isObject"),a="[object AsyncFunction]",o="[object Function]",s="[object GeneratorFunction]",u="[object Proxy]";e.exports=function(t){if(!i(t))return!1;var e=r(t);return e==o||e==s||e==a||e==u}},{"./_baseGetTag":36,"./isObject":162}],157:[function(t,e,n){var r=t("./toInteger");e.exports=function(t){return"number"==typeof t&&t==r(t)}},{"./toInteger":182}],158:[function(t,e,n){var r=9007199254740991;e.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=r}},{}],159:[function(t,e,n){var r=t("./isNumber");e.exports=function(t){return r(t)&&t!=+t}},{"./isNumber":161}],160:[function(t,e,n){e.exports=function(t){return null===t}},{}],161:[function(t,e,n){var r=t("./_baseGetTag"),i=t("./isObjectLike"),a="[object Number]";e.exports=function(t){return"number"==typeof t||i(t)&&r(t)==a}},{"./_baseGetTag":36,"./isObjectLike":163}],162:[function(t,e,n){e.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},{}],163:[function(t,e,n){e.exports=function(t){return null!=t&&"object"==typeof t}},{}],164:[function(t,e,n){var r=t("./_baseGetTag"),i=t("./_getPrototype"),a=t("./isObjectLike"),o="[object Object]",s=Function.prototype,u=Object.prototype,_=s.toString,l=u.hasOwnProperty,c=_.call(Object);e.exports=function(t){if(!a(t)||r(t)!=o)return!1;var e=i(t);if(null===e)return!0;var n=l.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&_.call(n)==c}},{"./_baseGetTag":36,"./_getPrototype":82,"./isObjectLike":163}],165:[function(t,e,n){var r=t("./_baseGetTag"),i=t("./isArray"),a=t("./isObjectLike"),o="[object String]";e.exports=function(t){return"string"==typeof t||!i(t)&&a(t)&&r(t)==o}},{"./_baseGetTag":36,"./isArray":151,"./isObjectLike":163}],166:[function(t,e,n){var r=t("./_baseGetTag"),i=t("./isObjectLike"),a="[object Symbol]";e.exports=function(t){return"symbol"==typeof t||i(t)&&r(t)==a}},{"./_baseGetTag":36,"./isObjectLike":163}],167:[function(t,e,n){var r=t("./_baseIsTypedArray"),i=t("./_baseUnary"),a=t("./_nodeUtil"),o=a&&a.isTypedArray,s=o?i(o):r;e.exports=s},{"./_baseIsTypedArray":45,"./_baseUnary":61,"./_nodeUtil":116}],168:[function(t,e,n){var r=Array.prototype.join;e.exports=function(t,e){return null==t?"":r.call(t,e)}},{}],169:[function(t,e,n){var r=t("./_arrayLikeKeys"),i=t("./_baseKeys"),a=t("./isArrayLike");e.exports=function(t){return a(t)?r(t):i(t)}},{"./_arrayLikeKeys":21,"./_baseKeys":47,"./isArrayLike":152}],170:[function(t,e,n){var r=t("./_arrayLikeKeys"),i=t("./_baseKeysIn"),a=t("./isArrayLike");e.exports=function(t){return a(t)?r(t,!0):i(t)}},{"./_arrayLikeKeys":21,"./_baseKeysIn":48,"./isArrayLike":152}],171:[function(t,e,n){e.exports=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}},{}],172:[function(t,e,n){var r=t("./_arrayMap"),i=t("./_baseIteratee"),a=t("./_baseMap"),o=t("./isArray");e.exports=function(t,e){return(o(t)?r:a)(t,i(e,3))}},{"./_arrayMap":22,"./_baseIteratee":46,"./_baseMap":50,"./isArray":151}],173:[function(t,e,n){var r=t("./_baseAssignValue"),i=t("./_baseForOwn"),a=t("./_baseIteratee");e.exports=function(t,e){var n={};return e=a(e,3),i(t,function(t,i,a){r(n,i,e(t,i,a))}),n}},{"./_baseAssignValue":27,"./_baseForOwn":33,"./_baseIteratee":46}],174:[function(t,e,n){function r(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(a);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=t.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(r.Cache||i),n}var i=t("./_MapCache"),a="Expected a function";r.Cache=i,e.exports=r},{"./_MapCache":10}],175:[function(t,e,n){var r=t("./_baseExtremum"),i=t("./_baseLt"),a=t("./identity");e.exports=function(t){return t&&t.length?r(t,a,i):void 0}},{"./_baseExtremum":29,"./_baseLt":49,"./identity":148}],176:[function(t,e,n){var r=t("./_root");e.exports=function(){return r.Date.now()}},{"./_root":121}],177:[function(t,e,n){var r=t("./_baseProperty"),i=t("./_basePropertyDeep"),a=t("./_isKey"),o=t("./_toKey");e.exports=function(t){return a(t)?r(o(t)):i(t)}},{"./_baseProperty":53,"./_basePropertyDeep":54,"./_isKey":95,"./_toKey":134}],178:[function(t,e,n){var r=t("./_baseIteratee"),i=t("./_basePullAt");e.exports=function(t,e){var n=[];if(!t||!t.length)return n;var a=-1,o=[],s=t.length;for(e=r(e,3);++a<s;){var u=t[a];e(u,a,t)&&(n.push(u),o.push(a))}return i(t,o),n}},{"./_baseIteratee":46,"./_basePullAt":55}],179:[function(t,e,n){e.exports=function(){return[]}},{}],180:[function(t,e,n){e.exports=function(){return!1}},{}],181:[function(t,e,n){var r=t("./toNumber"),i=1/0,a=1.7976931348623157e308;e.exports=function(t){if(!t)return 0===t?t:0;if((t=r(t))===i||t===-i)return(t<0?-1:1)*a;return t==t?t:0}},{"./toNumber":183}],182:[function(t,e,n){var r=t("./toFinite");e.exports=function(t){var e=r(t),n=e%1;return e==e?n?e-n:e:0}},{"./toFinite":181}],183:[function(t,e,n){var r=t("./isObject"),i=t("./isSymbol"),a=NaN,o=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,_=/^0o[0-7]+$/i,l=parseInt;e.exports=function(t){if("number"==typeof t)return t;if(i(t))return a;if(r(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=r(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(o,"");var n=u.test(t);return n||_.test(t)?l(t.slice(2),n?2:8):s.test(t)?a:+t}},{"./isObject":162,"./isSymbol":166}],184:[function(t,e,n){var r=t("./_baseToString");e.exports=function(t){return null==t?"":r(t)}},{"./_baseToString":60}],185:[function(t,e,n){(function(t){function e(){e=function(){},s.Symbol||(s.Symbol=n)}function n(t){return"jscomp_symbol_"+(t||"")+u++}function r(){e();var t=s.Symbol.iterator;t||(t=s.Symbol.iterator=s.Symbol("iterator")),"function"!=typeof Array.prototype[t]&&o(Array.prototype,t,{configurable:!0,writable:!0,value:function(){return i(this)}}),r=function(){}}function i(t){var e=0;return function(t){return r(),t={next:t},t[s.Symbol.iterator]=function(){return this},t}(function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}})}function a(t){r();var e=t[Symbol.iterator];return e?e.call(t):i(t)}for(var o="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},s="undefined"!=typeof window&&window===this?this:void 0!==t&&null!=t?t:this,u=0,_=s,l=["Promise"],c=0;c<l.length-1;c++){var d=l[c];d in _||(_[d]={}),_=_[d]}var h=l[l.length-1],f=_[h],p=function(){function t(t){this.c=0,this.h=void 0,this.b=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function e(){this.b=null}function n(e){return e instanceof t?e:new t(function(t){t(e)})}if(f)return f;e.prototype.c=function(t){this.b||(this.b=[],this.g()),this.b.push(t)},e.prototype.g=function(){var t=this;this.f(function(){t.i()})};var r=s.setTimeout;e.prototype.f=function(t){r(t,0)},e.prototype.i=function(){for(;this.b&&this.b.length;){var t=this.b;this.b=[];for(var e=0;e<t.length;++e){var n=t[e];delete t[e];try{n()}catch(t){this.h(t)}}}this.b=null},e.prototype.h=function(t){this.f(function(){throw t})},t.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.v),reject:t(this.g)}},t.prototype.v=function(e){if(e===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.w(e);else{t:switch(typeof e){case"object":var n=null!=e;break t;case"function":n=!0;break t;default:n=!1}n?this.s(e):this.i(e)}},t.prototype.s=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.A(e,t):this.i(t)},t.prototype.g=function(t){this.l(2,t)},t.prototype.i=function(t){this.l(1,t)},t.prototype.l=function(t,e){if(0!=this.c)throw Error("Cannot settle("+t+", "+e|"): Promise already settled in state"+this.c);this.c=t,this.h=e,this.o()},t.prototype.o=function(){if(this.b){for(var t=this.b,e=0;e<t.length;++e)t[e].call(),t[e]=null;this.b=null}};var i=new e;return t.prototype.w=function(t){var e=this.f();t.j(e.resolve,e.reject)},t.prototype.A=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},t.prototype.then=function(e,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(t){a(t)}}:e}var i,a,o=new t(function(t,e){i=t,a=e});return this.j(r(e,i),r(n,a)),o},t.prototype.catch=function(t){return this.then(void 0,t)},t.prototype.j=function(t,e){function n(){switch(r.c){case 1:t(r.h);break;case 2:e(r.h);break;default:throw Error("Unexpected state: "+r.c)}}var r=this;this.b?this.b.push(function(){i.c(n)}):i.c(n)},t.resolve=n,t.reject=function(e){return new t(function(t,n){n(e)})},t.race=function(e){return new t(function(t,r){for(var i=a(e),o=i.next();!o.done;o=i.next())n(o.value).j(t,r)})},t.all=function(e){var r=a(e),i=r.next();return i.done?n([]):new t(function(t,e){function a(e){return function(n){o[e]=n,--s||t(o)}}var o=[],s=0;do{o.push(void 0),s++,n(i.value).j(a(o.length-1),e),i=r.next()}while(!i.done)})},t}();p!=f&&null!=p&&o(_,h,{configurable:!0,writable:!0,value:p}),function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={B:r,m:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.m=!0,i.exports}var n={};e.i=t,e.f=n,e.b=function(t,n){e.c(t)||Object.defineProperty(t,"a",{configurable:!1,enumerable:!0,get:n})},e.g=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.b(n,n),n},e.c=function(t){return Object.prototype.hasOwnProperty.call(t,"a")},e.h="",e(e.l=0)}([function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),t=n(1),window.oath||(window.oath={}),window.oath.viewability=t.a},function(t,e,n){var r=n(2),i=n(3);e.a=new Promise(function(t,e){Object(r.a)(i.a.u).then(function(){t(new window.oath.viewabilitySDK)}).catch(function(t){e(t)})})},function(t,e){var n=[];e.a=function(t){return-1!==n.indexOf(t)?Promise.resolve():new Promise(function(e,r){var i=document.getElementsByTagName("head")[0],a=document.createElement("script");a.type="text/javascript",a.src=t,a.async=!0,a.onload=a.onreadystatechange=function(){this.readyState&&"complete"!==this.readyState||(a.onload=a.onreadystatechange=null,n.push(t),e())},a.onerror=a.onabort=r,i.appendChild(a)})}},function(t,e){e.a={u:"https://cdn-ssl.vidible.tv/prod/client-utils/js/oath-viewability-sdk.js"}}])}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],186:[function(t,e,n){(function(t){!function(r){function i(t){throw RangeError(C[t])}function a(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function o(t,e){var n=t.split("@"),r="";n.length>1&&(r=n[0]+"@",t=n[1]);return r+a((t=t.replace(V,".")).split("."),e).join(".")}function s(t){for(var e,n,r=[],i=0,a=t.length;i<a;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<a?56320==(64512&(n=t.charCodeAt(i++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--):r.push(e);return r}function u(t){return a(t,function(t){var e="";return t>65535&&(e+=w((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=w(t)}).join("")}function _(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:R}function l(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function c(t,e,n){var r=0;for(t=n?L(t/m):t>>1,t+=L(t/e);t>N*O>>1;r+=R)t=L(t/N);return L(r+(N+1)*t/(t+g))}function d(t){var e,n,r,a,o,s,l,d,h,f,p=[],E=t.length,v=0,A=I,g=T;for((n=t.lastIndexOf(b))<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&i("not-basic"),p.push(t.charCodeAt(r));for(a=n>0?n+1:0;a<E;){for(o=v,s=1,l=R;a>=E&&i("invalid-input"),((d=_(t.charCodeAt(a++)))>=R||d>L((y-v)/s))&&i("overflow"),v+=d*s,h=l<=g?S:l>=g+O?O:l-g,!(d<h);l+=R)s>L(y/(f=R-h))&&i("overflow"),s*=f;g=c(v-o,e=p.length+1,0==o),L(v/e)>y-A&&i("overflow"),A+=L(v/e),v%=e,p.splice(v++,0,A)}return u(p)}function h(t){var e,n,r,a,o,u,_,d,h,f,p,E,v,A,g,m=[];for(E=(t=s(t)).length,e=I,n=0,o=T,u=0;u<E;++u)(p=t[u])<128&&m.push(w(p));for(r=a=m.length,a&&m.push(b);r<E;){for(_=y,u=0;u<E;++u)(p=t[u])>=e&&p<_&&(_=p);for(_-e>L((y-n)/(v=r+1))&&i("overflow"),n+=(_-e)*v,e=_,u=0;u<E;++u)if((p=t[u])<e&&++n>y&&i("overflow"),p==e){for(d=n,h=R;f=h<=o?S:h>=o+O?O:h-o,!(d<f);h+=R)g=d-f,A=R-f,m.push(w(l(f+g%A,0))),d=L(g/A);m.push(w(l(d,0))),o=c(n,v,r==a),n=0,++r}++n,++e}return m.join("")}var f="object"==typeof n&&n&&!n.nodeType&&n,p="object"==typeof e&&e&&!e.nodeType&&e,E="object"==typeof t&&t;E.global!==E&&E.window!==E&&E.self!==E||(r=E);var v,A,y=2147483647,R=36,S=1,O=26,g=38,m=700,T=72,I=128,b="-",P=/^xn--/,D=/[^\x20-\x7E]/,V=/[\x2E\u3002\uFF0E\uFF61]/g,C={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},N=R-S,L=Math.floor,w=String.fromCharCode;if(v={version:"1.3.2",ucs2:{decode:s,encode:u},decode:d,encode:h,toASCII:function(t){return o(t,function(t){return D.test(t)?"xn--"+h(t):t})},toUnicode:function(t){return o(t,function(t){return P.test(t)?d(t.slice(4).toLowerCase()):t})}},f&&p)if(e.exports==f)p.exports=v;else for(A in v)v.hasOwnProperty(A)&&(f[A]=v[A]);else r.punycode=v}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],187:[function(t,e,n){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.exports=function(t,e,n,a){e=e||"&",n=n||"=";var o={};if("string"!=typeof t||0===t.length)return o;var s=/\+/g;t=t.split(e);var u=1e3;a&&"number"==typeof a.maxKeys&&(u=a.maxKeys);var _=t.length;u>0&&_>u&&(_=u);for(var l=0;l<_;++l){var c,d,h,f,p=t[l].replace(s,"%20"),E=p.indexOf(n);E>=0?(c=p.substr(0,E),d=p.substr(E+1)):(c=p,d=""),h=decodeURIComponent(c),f=decodeURIComponent(d),r(o,h)?i(o[h])?o[h].push(f):o[h]=[o[h],f]:o[h]=f}return o};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],188:[function(t,e,n){"use strict";function r(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n}var i=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};e.exports=function(t,e,n,s){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?r(o(t),function(o){var s=encodeURIComponent(i(o))+n;return a(t[o])?r(t[o],function(t){return s+encodeURIComponent(i(t))}).join(e):s+encodeURIComponent(i(t[o]))}).join(e):s?encodeURIComponent(i(s))+n+encodeURIComponent(i(t)):""};var a=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},o=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},{}],189:[function(t,e,n){"use strict";n.decode=n.parse=t("./decode"),n.encode=n.stringify=t("./encode")},{"./decode":187,"./encode":188}],190:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};n.default=function(t,e){function n(){if(!x&&document.getElementsByTagName("body")[0]){try{var e,n=p("span");n.style.display="none",(e=t.getElementsByTagName("body")[0].appendChild(n)).parentNode.removeChild(e),e=null,n=null}catch(t){return}x=!0;for(var r=w.length,i=0;i<r;i++)w[i]()}}function i(t){x?t():w[w.length]=t}function a(){var t=M.length;if(t>0)for(var e=0;e<t;e++){var n=M[e].id,i=M[e].callbackFn,a={success:!1,id:n};if(H.pv[0]>0){var l=f(n);if(l)if(!v(M[e].swfVersion)||H.wk&&H.wk<312)if(M[e].expressInstall&&s()){var d={};d.data=M[e].expressInstall,d.width=l.getAttribute("width")||"0",d.height=l.getAttribute("height")||"0",l.getAttribute("class")&&(d.styleclass=l.getAttribute("class")),l.getAttribute("align")&&(d.align=l.getAttribute("align"));for(var h={},E=l.getElementsByTagName("param"),A=E.length,R=0;R<A;R++)"movie"!==E[R].getAttribute("name").toLowerCase()&&(h[E[R].getAttribute("name")]=E[R].getAttribute("value"));u(d,h,n,i)}else!function(t){if(H.ie&&4!=t.readyState){t.style.display="none";var e=p("div");t.parentNode.insertBefore(e,t),e.parentNode.replaceChild(_(t),e),c(t)}else t.parentNode.replaceChild(_(t),t)}(l),i&&i(a);else y(n,!0),i&&(a.success=!0,a.ref=o(n),a.id=n,i(a))}else if(y(n,!0),i){var S=o(n);S&&r(S.SetVariable)!==b&&(a.success=!0,a.ref=S,a.id=S.id),i(a)}}}function o(t){var e=null,n=f(t);return n&&"OBJECT"===n.nodeName.toUpperCase()&&(e=r(n.SetVariable)!==b?n:n.getElementsByTagName(P)[0]||n),e}function s(){return!U&&v("6.0.65")&&(H.win||H.mac)&&!(H.wk&&H.wk<312)}function u(n,i,a,o){var s=f(a);if(a=h(a),U=!0,g=o||null,m={success:!1,id:a},s){"OBJECT"===s.nodeName.toUpperCase()?(S=_(s),O=null):(S=s,O=a),n.id=V,(r(n.width)===b||!/%$/.test(n.width)&&E(n.width)<310)&&(n.width="310"),(r(n.height)===b||!/%$/.test(n.height)&&E(n.height)<137)&&(n.height="137");var u=H.ie?"ActiveX":"PlugIn",d="MMredirectURL="+encodeURIComponent(e.location.toString().replace(/&/g,"%26"))+"&MMplayerType="+u+"&MMdoctitle="+encodeURIComponent(t.title.slice(0,47)+" - Flash Player Installation");if(r(i.flashvars)!==b?i.flashvars+="&"+d:i.flashvars=d,H.ie&&4!=s.readyState){var v=p("div");a+="SWFObjectNew",v.setAttribute("id",a),s.parentNode.insertBefore(v,s),s.style.display="none",c(s)}l(n,i,a)}}function _(t){var e=p("div");if(H.win&&H.ie)e.innerHTML=t.innerHTML;else{var n=t.getElementsByTagName(P)[0];if(n){var r=n.childNodes;if(r)for(var i=r.length,a=0;a<i;a++)1==r[a].nodeType&&"PARAM"===r[a].nodeName||8==r[a].nodeType||e.appendChild(r[a].cloneNode(!0))}}return e}function l(t,e,n){var i,a=f(n);if(n=h(n),H.wk&&H.wk<312)return i;if(a){var o,s,u,_=p(H.ie?"div":P);r(t.id)===b&&(t.id=n);for(u in e)e.hasOwnProperty(u)&&"movie"!==u.toLowerCase()&&function(t,e,n){var r=p("param");r.setAttribute("name",e),r.setAttribute("value",n),t.appendChild(r)}(_,u,e[u]);H.ie&&(_=function(t,e){var n=p("div");return n.innerHTML="<object classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000'><param name='movie' value='"+t+"'>"+e+"</object>",n.firstChild}(t.data,_.innerHTML));for(o in t)t.hasOwnProperty(o)&&("styleclass"===(s=o.toLowerCase())?_.setAttribute("class",t[o]):"classid"!==s&&"data"!==s&&_.setAttribute(o,t[o]));H.ie?j[j.length]=t.id:(_.setAttribute("type",D),_.setAttribute("data",t.data)),a.parentNode.replaceChild(_,a),i=_}return i}function c(t){var e=f(t);e&&"OBJECT"===e.nodeName.toUpperCase()&&(H.ie?(e.style.display="none",function t(){if(4==e.readyState){for(var n in e)"function"==typeof e[n]&&(e[n]=null);e.parentNode.removeChild(e)}else setTimeout(t,10)}()):e.parentNode.removeChild(e))}function d(t){return t&&t.nodeType&&1===t.nodeType}function h(t){return d(t)?t.id:t}function f(e){if(d(e))return e;var n=null;try{n=t.getElementById(e)}catch(t){}return n}function p(e){return t.createElement(e)}function E(t){return parseInt(t,10)}function v(t){t+="";var e=H.pv,n=t.split(".");return n[0]=E(n[0]),n[1]=E(n[1])||0,n[2]=E(n[2])||0,e[0]>n[0]||e[0]==n[0]&&e[1]>n[1]||e[0]==n[0]&&e[1]==n[1]&&e[2]>=n[2]}function A(e,n,i,a){var o=t.getElementsByTagName("head")[0];if(o){var s="string"==typeof i?i:"screen";if(a&&(T=null,I=null),!T||I!=s){var u=p("style");u.setAttribute("type","text/css"),u.setAttribute("media",s),T=o.appendChild(u),H.ie&&r(t.styleSheets)!==b&&t.styleSheets.length>0&&(T=t.styleSheets[t.styleSheets.length-1]),I=s}T&&(r(T.addRule)!==b?T.addRule(e,n):r(t.createTextNode)!==b&&T.appendChild(t.createTextNode(e+" {"+n+"}")))}}function y(t,e){if(F){var n=e?"visible":"hidden",r=f(t);x&&r?r.style.visibility=n:"string"==typeof t&&A("#"+t,"visibility:"+n)}}function R(t){return null!==/[\\\"<>\.;]/.exec(t)&&("undefined"==typeof encodeURIComponent?"undefined":r(encodeURIComponent))!==b?encodeURIComponent(t):t}var S,O,g,m,T,I,b="undefined",P="object",D="application/x-shockwave-flash",V="SWFObjectExprInst",C="onreadystatechange",N=navigator,L=!1,w=[],M=[],j=[],k=[],x=!1,U=!1,F=!0,B=!1,H=function(){var n=r(t.getElementById)!==b&&r(t.getElementsByTagName)!==b&&r(t.createElement)!==b,i=N.userAgent.toLowerCase(),a=N.platform.toLowerCase(),o=/win/.test(a||i),s=/mac/.test(a||i),u=!!/webkit/.test(i)&&parseFloat(i.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),_="Microsoft Internet Explorer"===N.appName,l=[0,0,0],c=null;if(r(N.plugins)!==b&&r(N.plugins["Shockwave Flash"])===P)(c=N.plugins["Shockwave Flash"].description)&&r(N.mimeTypes)!==b&&N.mimeTypes[D]&&N.mimeTypes[D].enabledPlugin&&(L=!0,_=!1,c=c.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),l[0]=E(c.replace(/^(.*)\..*$/,"$1")),l[1]=E(c.replace(/^.*\.(.*)\s.*$/,"$1")),l[2]=/[a-zA-Z]/.test(c)?E(c.replace(/^.*[a-zA-Z]+(.*)$/,"$1")):0);else if(r(e.ActiveXObject)!==b)try{var d=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");d&&(c=d.GetVariable("$version"))&&(_=!0,l=[E((c=c.split(" ")[1].split(","))[0]),E(c[1]),E(c[2])])}catch(t){}return{w3:n,pv:l,wk:u,ie:_,win:o,mac:s}}();return H.w3&&((r(t.readyState)!==b&&("complete"===t.readyState||"interactive"===t.readyState)||r(t.readyState)===b&&(t.getElementsByTagName("body")[0]||t.body))&&n(),x||(r(t.addEventListener)!==b&&t.addEventListener("DOMContentLoaded",n,!1),H.ie&&(t.attachEvent(C,function e(){"complete"===t.readyState&&(t.detachEvent(C,e),n())}),e==top&&function e(){if(!x){try{t.documentElement.doScroll("left")}catch(t){return void setTimeout(e,0)}n()}}()),H.wk&&function e(){x||(/loaded|complete/.test(t.readyState)?n():setTimeout(e,0))}())),w[0]=function(){L?function(){var e=t.getElementsByTagName("body")[0],n=p(P);n.setAttribute("style","visibility: hidden;"),n.setAttribute("type",D);var i=e.appendChild(n);if(i){var o=0;!function t(){if(r(i.GetVariable)!==b)try{var s=i.GetVariable("$version");s&&(s=s.split(" ")[1].split(","),H.pv=[E(s[0]),E(s[1]),E(s[2])])}catch(t){H.pv=[8,0,0]}else if(o<10)return o++,void setTimeout(t,10);e.removeChild(n),i=null,a()}()}else a()}():a()},H.ie&&window.attachEvent("onunload",function(){for(var t=k.length,e=0;e<t;e++)k[e][0].detachEvent(k[e][1],k[e][2]);for(var n=j.length,r=0;r<n;r++)c(j[r]);for(var i in H)H[i]=null;H=null;for(var a in swfobject)swfobject[a]=null;swfobject=null}),{registerObject:function(t,e,n,r){if(H.w3&&t&&e){var i={};i.id=t,i.swfVersion=e,i.expressInstall=n,i.callbackFn=r,M[M.length]=i,y(t,!1)}else r&&r({success:!1,id:t})},getObjectById:function(t){if(H.w3)return o(t)},embedSWF:function(t,e,n,a,o,_,c,d,f,p){var E=h(e),A={success:!1,id:E};H.w3&&!(H.wk&&H.wk<312)&&t&&e&&n&&a&&o?(y(E,!1),i(function(){n+="",a+="";var i={};if(f&&(void 0===f?"undefined":r(f))===P)for(var h in f)i[h]=f[h];i.data=t,i.width=n,i.height=a;var R={};if(d&&(void 0===d?"undefined":r(d))===P)for(var S in d)R[S]=d[S];if(c&&(void 0===c?"undefined":r(c))===P)for(var O in c)if(c.hasOwnProperty(O)){var g=B?encodeURIComponent(O):O,m=B?encodeURIComponent(c[O]):c[O];r(R.flashvars)!==b?R.flashvars+="&"+g+"="+m:R.flashvars=g+"="+m}if(v(o)){var T=l(i,R,e);i.id==E&&y(E,!0),A.success=!0,A.ref=T,A.id=T.id}else{if(_&&s())return i.data=_,void u(i,R,e,p);y(E,!0)}p&&p(A)})):p&&p(A)},switchOffAutoHideShow:function(){F=!1},enableUriEncoding:function(t){B=(void 0===t?"undefined":r(t))===b||t},ua:H,getFlashPlayerVersion:function(){return{major:H.pv[0],minor:H.pv[1],release:H.pv[2]}},hasFlashPlayerVersion:v,createSWF:function(t,e,n){return H.w3?l(t,e,n):void 0},showExpressInstall:function(t,e,n,r){H.w3&&s()&&u(t,e,n,r)},removeSWF:function(t){H.w3&&c(t)},createCSS:function(t,e,n,r){H.w3&&A(t,e,n,r)},addDomLoadEvent:i,addLoadEvent:function(n){if(r(e.addEventListener)!==b)e.addEventListener("load",n,!1);else if(r(t.addEventListener)!==b)t.addEventListener("load",n,!1);else if(r(e.attachEvent)!==b)!function(t,e,n){t.attachEvent(e,n),k[k.length]=[t,e,n]}(e,"onload",n);else if("function"==typeof e.onload){var i=e.onload;e.onload=function(){i(),n()}}else e.onload=n},getQueryParamValue:function(e){var n=t.location.search||t.location.hash;if(n){if(/\?/.test(n)&&(n=n.split("?")[1]),!e)return R(n);for(var r=n.split("&"),i=0;i<r.length;i++)if(r[i].substring(0,r[i].indexOf("="))==e)return R(r[i].substring(r[i].indexOf("=")+1))}return""},expressInstallCallback:function(){if(U){var t=f(V);t&&S&&(t.parentNode.replaceChild(S,t),O&&(y(O,!0),H.ie&&(S.style.display="block")),g&&g(m)),U=!1}},version:"2.3"}}},{}],191:[function(t,e,n){"use strict";n.__IASVANS=function(t){var e={now:function(){return(new Date).getTime()},sendMonitoringPixel:function(t){try{this.sendUrlRequest(["//pixel.adsafeprotected.com/mon?anId=10173&campId=",encodeURIComponent(o.getPartnerId()),"&pubId=",encodeURIComponent("vans-js_"+t)].join(""))}catch(t){n.report("smp",t)}},sendMonitoringDebugPixel:function(){var t=["adstop"],r={};return function(i,a){var s=o.hasDebugEnabled(),u=-1<t.indexOf(i)&&r[i];if(s&&!u)try{var _,l=o.getAltMonDomain(),c=e.addProtocolToDomain("spixel.adsafeprotected.com")+"/mon?anId=10173&campId="+encodeURIComponent(o.getPartnerId())+"&pubId=",d=e.addProtocolToDomain(l)+"/mon?anId=925116&campId="+encodeURIComponent(o.getPartnerId())+"&pubId=",h=encodeURIComponent(i);_=a.replace(/=undefined&/g,"=&"),this.sendUrlRequest([c,h,_].join("")),this.sendUrlRequest([d,h,_].join("")),r[i]=!0}catch(t){n.report("smp",t)}}}(),sendUrlRequest:function(t,e){var n,r;if(t){n=this.getWindow();try{r=new n.XMLHttpRequest,e&&(r.onreadystatechange=e),r.open("GET",t),r.send()}catch(t){}}},stringify:function(t){if("AdImpression"!==t.messageType)return JSON.stringify(t);var e={};e.passthroughObj=o.getPassThroughObj();var r="";try{r=JSON.stringify(t)}catch(t){return void n.report("ser",t,e)}return r},addProtocolToDomain:function(t){return t.match(/^[a-zA-Z]+:\/\//)?t:"https://"+t},getWindow:function(){return s.getWin()},getDocument:function(){return s.getDoc()},generateUID:function(){var t,e="";try{for(t=0;8>t;t++)e=[e,Math.floor(65536*(1+Math.random())).toString(16).substring(1)].join("")}catch(t){}return e},noop:function(){}},n=function(){var t={};return{report:function(n,r,i){if(!t[n])try{t[n]=!0;var a="//pixel.adsafeprotected.com/jsdiagnostic?code:vans-js_"+encodeURIComponent(o.getPartnerId())+"_"+n+"&err:"+encodeURIComponent(r.message);i&&(a+="&config:"+encodeURIComponent(JSON.stringify(i))),e.sendUrlRequest(a)}catch(t){}}}}(),r=function(){var t,r=!1,i=function(t,n){return t==o()&&(r=!0,a.setImpressionCallback(n),e.sendMonitoringDebugPixel("hs",a.monitoringQS()),a.flushUnsentEvents()),r?"jv3":null},o=function(){return t||(t=e.generateUID()),t};return{getVideoId:o,setNodeInterface:function(t){var r,a,s,u=o();try{r="IASid"+u,a="blockAd"+u,s="getIasVidBridgeVersion"+u,t.className+=" integral-vid-"+u,t[a]=e.noop,t[r]=i,t[s]=function(){return"2"},t.getVersion=function(){return"3.5.0"}}catch(t){n.report("sni",t)}},isEstablished:function(){return r},resetHandshake:function(){r=!1}}}(),i=function(){var t,i=function(){var t=function(t){return void 0!==t};return{br:function(){var e="u";try{t(window.opera)&&t(window.opera.buildNumber)?e="o":t(window.mozInnerScreenY)?e="g":t(window.chrome)&&t(window.chrome.csi)?e="c":t(window.msWriteProfilerMark)&&t(window.crypto)?e="e":t(window.attachEvent)||t(window.msCrypto)?e="i":t(window.WebKitPoint)&&(e="w")}catch(t){}return e}(),urls:function(){var e=function(){var e={g:"",q:""};try{e.q=window.parent.parent.parent.parent.parent.parent.parent.parent.parent.parent.location.href}catch(a){var n,r=(r=a.message).substring(r.lastIndexOf("<")+1,r.lastIndexOf(">"));if((n=t(r))&&(n=!1,t(window.navigator)&&t(window.navigator.userAgent))){var i=window.navigator.userAgent.match(/Firefox\/([\.0-9]+)/);null!==i&&2==i.length&&(i=i[1].split("."),3==parseInt(i[0],10)&&6>=parseInt(i[1],10)&&(3==i.length?13>=parseInt(i[2],10)&&(n=!0):n=!0))}n&&(e.g=r)}return e},n={};try{n.a=encodeURIComponent(top.location.href)}catch(t){}try{n.b=encodeURIComponent(parent.location.href)}catch(t){}if(window!=top){try{n.c=encodeURIComponent(parent.document.referrer)}catch(t){}try{n.e=encodeURIComponent(window.document.referrer)}catch(t){}}try{n.d=encodeURIComponent(window.location.href)}catch(t){}try{var r=e();n.g=encodeURIComponent(r.g),n.q=encodeURIComponent(r.q)}catch(t){}var i,n=function(e){var n,r,i={};for(r in e)e.hasOwnProperty(r)&&(n=e[r],t(i[n])?i[n]+=r:i[n]=r);e={};for(r in i)i.hasOwnProperty(r)&&(n=i[r],e[n]=r);return e}(n=function(e){for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];""!==r&&"null"!==r&&"undefined"!==r&&null!==r&&t(r)||delete e[n]}return e}(n)),e=[];for(i in n)n.hasOwnProperty(i)&&e.push({key:i,val:n[i]});return e.sort(function(t,e){return t.val.length>e.val.length?1:t.val.length<e.val.length?-1:0}),e}()}},a=function(){if(4==this.readyState)if(200==this.status)try{t("failed"===JSON.parse(this.responseText).action?"block":"safe")}catch(t){n.report("ba",t)}else n.report("blk_url_req_err",{message:this.status})};return{init:function(o,s,u){o=function(t,e,i){var a=["//pixel.adsafeprotected.com/db2/video/",e,"/",i,"/skeleton.js?videoId=",r.getVideoId()].join("");e=function(t){a=[a,"&adsafe_url=",t.val,"&adsafe_type=",t.key].join("")};try{t.urls.forEach(e),a=[a,"&adsafe_jsinfo=br:",t.br].join("")}catch(t){n.report("bvu",t)}return a}(i(),o,s),t=u,e.sendUrlRequest(o,a)}}}(),a=function(){var i,s=[],u=!1,_=function(o){if(r.isEstablished()){var u;try{(u=e.stringify(o))&&("AdImpression"===o.messageType?e.getWindow()[i](u):e.getWindow().postMessage(u,"*"))}catch(t){n.report("dm",t)}}else if(a.nodeProvided)try{s.push(o)}catch(t){n.report("cm",t)}else{u=t||"pixel.adsafeprotected.com";var _=a.config;try{e.stringify(o),"AdImpression"===o.messageType&&(a.isCmTag?e.sendUrlRequest(["//"+u,"/mon?",function(t){var e="";return Object.keys(t).forEach(function(n){-1===["advEntityId","pubEntityId","partner","debug"].indexOf(n)&&(e+="&"+n+"="+t[n])}),e}(_)].join("")):a.isFwTag&&e.sendUrlRequest(["//"+u,"/rfw/st/",_.advEntityId+"/"+_.pubEntityId,"/skeleton.js"].join("")))}catch(t){n.report("dm",t)}}};return{sendEvent:function(t,i){if("AdImpression"===t){if(u)return;i&&(i.ext_passthrough=a.passThroughObj),u=!0,e.sendMonitoringDebugPixel("ai",a.monitoringQS())}else"AdStopped"===t||"AdVideoComplete"===t?e.sendMonitoringDebugPixel("adstop",a.monitoringQS()):"AdError"===t&&e.sendMonitoringDebugPixel("aderr",a.monitoringQS());try{_({messageType:t,id:r.getVideoId(),time:e.now(),partner:o.getPartnerId(),eventData:i})}catch(t){n.report("se",t)}},setImpressionCallback:function(t){i=t},flushUnsentEvents:function(){try{s.forEach(_)}catch(t){n.report("fue",t)}},passThroughObj:{},monitoringQS:function(){},clearSessionState:function(){u=!1,s.length=0}}}(),o=function(){var o,u,_,l={},c={},d="impId creativeId campId placementId advEntityId pubEntityId chanId".split(" "),h=function(i,a,o){var s,u=e.getDocument();try{(s=u.createElement("script")).src=function(e,i){var a,o=t||"pixel.adsafeprotected.com";try{a=["//",o,e,"?videoId=",r.getVideoId(),function(t){var e="";return Object.keys(t).forEach(function(n){"advEntityId"!=n&&"pubEntityId"!=n&&"partner"!=n&&(e+="&"+n+"="+t[n])}),e}(i)].join("")}catch(t){n.report("bsurl",t)}return a}(i,a),s.addEventListener("load",function(t){e.sendMonitoringDebugPixel("fwjsload",E())}),s.addEventListener("error",function(t){e.sendMonitoringDebugPixel("fwjsload_err",E())}),function(t,n){var r,i=!1,a=function(){!i&&t.parentNode&&(t.parentNode.appendChild(n),clearInterval(r),i=!0,e.sendMonitoringDebugPixel("fwjsinj",E()))};a(),i||(r=setInterval(a,200))}(o,s)}catch(t){e.sendMonitoringPixel("inj_err")}},f=function(t,e,n){r.setNodeInterface(n);var i={};Object.getOwnPropertyNames(e).forEach(function(t){"debug"!==t&&(i[t]=e[t])}),h(t,i,n)},p=function(t){d.forEach(function(e){l[e]=t[e]}),_&&(l.monDomain=t.debug.monDomain)},E=function(){return"&chanId="+l.chanId+"&planId="+l.advEntityId+"&placementId="+l.pubEntityId+"&advId="+l.campId+"&pubOrder="+l.placementId+"&pubCreative="+l.creativeId+"&impId="+l.impId+"&ts="+Date.now()+"&custom=3.5.0&custom2=jv3&custom3="+u+"&adsafe_par"},v=function(t){var n=t&&t.ownerDocument,r=t&&t.parentNode,i=n&&(n.defaultView||n.parentWindow),a="adnode_type_"+(t?t.constructor.name||t.nodeName:"null");t||e.sendMonitoringDebugPixel("adnode_null",E()),t&&!r&&e.sendMonitoringDebugPixel("adnode_detached",E()),t&&!n&&e.sendMonitoringDebugPixel("adnode_nodoc",E()),n&&!i&&e.sendMonitoringDebugPixel("adnode_nowin",E()),e.sendMonitoringDebugPixel(a,E())},A=function(){c.vv="3.5.0",c.vanstag=u,c.xcamp=l.campId,c.xplac=l.placementId,c.xcreat=l.creativeId,c.ximp=l.impId},y=function(t){t.monitoringQS=E,t.passThroughObj=c,Object.keys(t).forEach(function(e){a[e]=t[e]})},R=function(t){var e=(t=t&&t.ownerDocument)&&t.parentWindow;return!!(t&&t.defaultView||e)};return{initCM:function(t,r){var i=R(r);if(!t||!t.partner)throw Error("Missing partnerId");s.setWin(r),o=t.partner,_=t.debug&&t.debug.enabled,u="cm";try{if(!t.anId)throw Error("Missing anId");p(t),A(),y({isFwTag:!1,isCmTag:!0,nodeProvided:i,config:t}),e.sendMonitoringDebugPixel("init",E()),v(r),i&&f("/jsvid",t,r)}catch(t){n.report("icm",t)}},initFW:function(t,r,a){var l,c=R(r);if(!t||!t.partner)throw Error("Missing partnerId");s.setWin(r),o=t.partner,_=t.debug&&t.debug.enabled,u="fw";try{if(!t.advEntityId||!t.pubEntityId)throw Error("Missing client id: advEntityId: "+t.advEntityId+" ,pubEntityId: "+t.pubEntityId);p(t),A(),y({isFwTag:!0,isCmTag:!1,nodeProvided:c,config:t}),e.sendMonitoringDebugPixel("init",E()),v(r),a&&i.init(t.advEntityId,t.pubEntityId,a),c&&(l="/fwjsvid/st/"+t.advEntityId+"/"+t.pubEntityId+"/skeleton.js",f(l,t,r))}catch(t){n.report("ifw",t)}},getPartnerId:function(){return o},getPassThroughObj:function(){return c},getAltMonDomain:function(){return l.monDomain},hasDebugEnabled:function(){return _}}}(),s=function(){var t=window;return{getWin:function(){return t},setWin:function(e){(e=e&&e.ownerDocument)&&e.defaultView?t=e.defaultView:e&&e.parentWindow?t=e.parentWindow:n.report("sc",{message:""})},getDoc:function(){return t.document}}}();return{initFW:o.initFW,initCM:o.initCM,sendEvent:a.sendEvent}}},{}],192:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,n,r)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(r)},s=i(t("../utils")),u=r(t("../vidio_demand_tag_sender")),_=r(t("../ad_state")),l=i(t("../constants")),c=function(t){function e(t,n,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"AdContainer",t,i));return a._cabinet=t,a.idx_=n,a.demandTag_=r,a.uuid_=t.uuid,a.vidIoDemandTagSender_=new u.default(a.callSSEvent_.bind(a),a._cabinet.historyManager,a.demandTag_),a.adSlotState_=l.SLOT_STATES.DEMAND_TAG_READY,a.vast_=null,a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,_.default),a(e,[{key:"internalError",value:function(t,e){this.vidIoDemandTagSender_.internalError(t,e),this.failureCb()}},{key:"getAdSlotState",value:function(){return this.adSlotState_}},{key:"sendJsDemandResponse",value:function(t,e,n){if(t!==l.VID_IO_EVENTS.cm_js_demand_req_resp)throw new Error(l.VD_ERROR_CODES.NOT_JS_DEMAND_RESPONSE);this.vidIoDemandTagSender_.jsDemandResponse(e,n)}},{key:"successCb",value:function(t){this.vast_=t,this.isAdDead_||(this.adSlotState_=l.SLOT_STATES.VAST_READY,this.callSSEvent_(l.SLOT_EVENTS.VastDone,this.idx_,t))}},{key:"failureCb",value:function(){this.isAdDead_||(this.adSlotState_=l.SLOT_STATES.NO_VAST,this.callSSEvent_(l.SLOT_EVENTS.VastDone,this.idx_,null))}},{key:"vpaidStart",value:function(){this.adSlotState_=l.SLOT_STATES.REQUESTING_VPAID}},{key:"vpaidFailed",value:function(){this.adSlotState_=l.SLOT_STATES.VPAID_FAILED}},{key:"stopAd",value:function(){this.failureCb(),o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"stopAd",this).call(this)}},{key:"skipAd",value:function(){this.failureCb(),o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"skipAd",this).call(this)}},{key:"_containerRequestVast",value:function(t){}},{key:"requestVast",value:function(t){!this.isAdDead_&&this.passesTargeting(t)&&(this.adSlotState_=l.SLOT_STATES.REQUESTING_VAST,this._containerRequestVast(t))}},{key:"passesTargeting",value:function(t){var e=void 0;try{e=!this._cabinet.isDomainMatch&&this.demandTag_.td}catch(t){return this.internalError(l.VD_ERROR_CODES.PRE_INIT_TD_MISMATCH_FAIL,!1),!1}var n=void 0;try{n=this.demandTag_.ts&&!s.sizeMatch(this._cabinet.manifest,t)}catch(t){return this.internalError(l.VD_ERROR_CODES.PRE_INIT_TS_MISMATCH_FAIL,!1),!1}try{if(e||n)return this.failureCb(),!1}catch(t){return this.internalError(l.VD_ERROR_CODES.PRE_INIT_MISSED_OPPORTUNITY_FAIL,!1),!1}try{this.vidIoDemandTagSender_.jsDemandRequest({request_time:this._cabinet.timeoutManager.getRequestTime(this.demandTag_.waterfallIdx)})}catch(t){return this.internalError(l.VD_ERROR_CODES.DO_GET_VAST_RESPONSE_START_RESPONSE_FAIL,!1),!1}return!0}}]),e}();n.default=c},{"../ad_state":209,"../constants":223,"../utils":233,"../vidio_demand_tag_sender":235}],193:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=r(t("./spotx_ad_container")),o=r(t("./telaria_ad_container")),s=r(t("./ima_ad_container")),u=r(t("./demand_tag_ad_container")),_=r(t("lodash/defaults")),l=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.default;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.DEFAULT_CONTAINER=n,this.CONTAINERS=(0,_.default)(e,{spotx:a.default,telaria:o.default,ima:s.default})}return i(t,[{key:"build",value:function(t,e,n,r){return new(this.containerFor(n.bid_platform))(t,e,n,r)}},{key:"containerFor",value:function(t){return t&&this.CONTAINERS.hasOwnProperty(t)?this.CONTAINERS[t]:this.DEFAULT_CONTAINER}}]),t}();n.default=l},{"./demand_tag_ad_container":194,"./ima_ad_container":196,"./spotx_ad_container":197,"./telaria_ad_container":198,"lodash/defaults":139}],194:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(t("../ad_vast")),a=function(t){return t&&t.__esModule?t:{default:t}}(t("./ad_container")),o=function(t){function e(t,n,r,i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,r,i))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),r(e,[{key:"_containerRequestVast",value:function(t){new i.AdVast(this._cabinet,this.sendJsDemandResponse.bind(this),this.demandTag_,this.successCb.bind(this),this.failureCb.bind(this),this.initParams_.environmentVars,this.callLogEvent_.bind(this),t).requestVast(null,!0)}}]),e}();n.default=o},{"../ad_vast":211,"./ad_container":192}],195:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=r(t("./ad_container")),o=r(t("lodash/isNaN")),s=r(t("lodash/toNumber")),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(t("../constants")),_=function(t){function e(t,n,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,r,i));return a.bidParams=a.demandTag_.hasOwnProperty("bid_params")?a.demandTag_.bid_params:{},a.bidFloor=(0,s.default)(a.demandTag_.hasOwnProperty("bid_floor")?a.demandTag_.bid_floor:0),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),i(e,[{key:"failedBidRequest",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.VD_ERROR_CODES.HB_BID_ERROR;this.sendJsDemandResponse(u.VID_IO_EVENTS.cm_js_demand_req_resp,this.demandTag_,{cc_i:this.demandTag_.callChain.getCallChainIndices(this._cabinet.historyManager.demand_events.response,!0).join(","),response_time:0,has_ad:!1,reason:t,wrapper_count:0,dtype:u.DEMAND_TYPES.UNKNOWN}),this.failureCb()}},{key:"validBid",value:function(t){var e=(0,s.default)(t);return!(0,o.default)(e)&&e>=this.bidFloor}}]),e}();n.default=_},{"../constants":223,"./ad_container":192,"lodash/isNaN":159,"lodash/toNumber":183}],196:[function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=i(t("lodash/forEach")),s=i(t("lodash/defaults")),u=(i(t("../utils")),i(t("../constants"))),_=i(t("./ad_container")),l=function(t){function e(t,n,r,i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,r,i))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,_.default),a(e,[{key:"_containerRequestVast",value:function(t){this._cabinet.imaManager.state===u.default.IMA_MANAGER_STATES.ADS_MANAGER_LOAD_ERROR?this.onADS_MANAGER_LOAD_ERROR():this._cabinet.imaManager.state===u.default.IMA_MANAGER_STATES.ADS_MANAGER_LOADED?this.onADS_MANAGER_LOADED():this._cabinet.imaManager.state===u.default.IMA_MANAGER_STATES.INIT?(this.registerImaManagerEventListeners(),this._cabinet.imaManager.loadAndStartIma()):this.registerImaManagerEventListeners()}},{key:"onADS_MANAGER_LOAD_ERROR",value:function(){this.demandResponseFail(!1,u.default.VD_ERROR_CODES.ADS_MANAGER_LOAD_ERROR)}},{key:"onADS_MANAGER_LOADED",value:function(){this.demandResponseSuccess()}},{key:"registerImaManagerEventListeners",value:function(){var t=this;(0,o.default)(u.default.IMA_MANAGER_EVENT_TYPES,function(e,n){var r="on"+n;t._cabinet.imaManager.subscribeImaManagerEvent(t[r],n,t)})}},{key:"unregisterImaManagerEventListeners",value:function(){var t=this;(0,o.default)(u.default.IMA_MANAGER_EVENT_TYPES,function(e,r){t._cabinet.imaManager.unsubscribeImaManagerEvent(r,t[n])})}},{key:"demandResponseSuccess",value:function(){this.sendJsDemandResponse(u.default.VID_IO_EVENTS.cm_js_demand_req_resp,this.demandTag,{cc_i:this.demandTag.callChain.getCallChainIndices(this._cabinet.historyManager.demand_events.response,!0).join(","),response_time:this._cabinet.timeoutManager.getResponseTime(this.demandTag.waterfallIdx),wrapper_count:0,has_ad:!0,timeout:!1,dtype:u.default.DEMAND_TYPES.IMA}),this.successCb((0,s.default)(u.default.getDefaultVast(),u.default.getDefaultVastPixels()))}},{key:"demandResponseFail",value:function(t,e){this.sendJsDemandResponse(u.default.VID_IO_EVENTS.cm_js_demand_req_resp,this.demandTag,{cc_i:this.demandTag.callChain.getCallChainIndices(this._cabinet.historyManager.demand_events.response,!0).join(","),response_time:this._cabinet.timeoutManager.getResponseTime(this.demandTag.waterfallIdx),wrapper_count:0,has_ad:!1,timeout:t,reason:e,dtype:u.default.DEMAND_TYPES.IMA}),this.failureCb()}}]),e}();r.default=l},{"../constants":223,"../utils":233,"./ad_container":192,"lodash/defaults":139,"lodash/forEach":145}],197:[function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=i(t("./header_bidding_ad_container")),s=i(t("../ss_utils/async_js_loader")),u=r(t("../ad_vast")),_=r(t("../constants")),l=r(t("../utils")),c=function(t){function e(t,n,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,r,i));return a.channelId=null,a.bidParams.hasOwnProperty("channel_id")&&(a.channelId=a.bidParams.channel_id),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default),a(e,[{key:"validBid",value:function(t){return null!==t&&(!(!t.hasOwnProperty("spotx_bid")||!t.hasOwnProperty("spotx_ad_key"))&&function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,n,r)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(r)}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"validBid",this).call(this,t.spotx_bid))}},{key:"_containerRequestVast",value:function(t){if(null!==this.channelId){try{l.maybeCreateVideoSlot(this.initParams_.environmentVars,this._cabinet.videoElementManager)}catch(t){return void this.failureCb()}this.spotxOptions={channel_id:this.channelId,video_slot:this.initParams_.environmentVars.videoSlot,slot:this.initParams_.environmentVars.slot,hide_skin:!1,autoplay:!0,ad_mute:!1},s.default.loadScript(this._cabinet.pageProtocol+"//js.spotx.tv/directsdk/v1/"+this.spotxOptions.channel_id+".js",function(){var e=null;try{e=new SpotX.DirectAdOS(this.spotxOptions)}catch(t){return void this.failedBidRequest(_.VD_ERROR_CODES.HB_BID_ERROR+"_"+t.message)}e.getAdServerKVPs().then(function(e){if(this.validBid(e)){var n={bp:e.spotx_bid};this.endpoint_="//search.spotxchange.com/ad/vast.html?key="+e.spotx_ad_key,this.demandTag_.url=this.endpoint_;new u.AdVast(this._cabinet,this.sendJsDemandResponse.bind(this),this.demandTag_,this.successCb.bind(this),this.failureCb.bind(this),this.initParams_.environmentVars,this.callLogEvent_.bind(this),t).requestVast(null,!0,n)}else this.failedBidRequest()}.bind(this),function(){this.failedBidRequest()}.bind(this))}.bind(this))}else this.failureCb()}}]),e}();n.default=c},{"../ad_vast":211,"../constants":223,"../ss_utils/async_js_loader":229,"../utils":233,"./header_bidding_ad_container":195}],198:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=r(t("./header_bidding_ad_container")),o=t("../ss_utils/ajax"),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(t("../ad_vast")),u=r(t("lodash/forEach")),_=function(t){function e(t,n,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,r,i));return a.adCode=null,a.supplyCode=null,a.setParams(),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),i(e,[{key:"setParams",value:function(){this.bidParams.hasOwnProperty("adCode")&&(this.adCode=this.bidParams.adCode),this.bidParams.hasOwnProperty("supplyCode")&&(this.supplyCode=this.bidParams.supplyCode)}},{key:"_containerRequestVast",value:function(t){var e=this.generateUrl();if(null!==e){var n=this.handleResponse.bind(this),r=this.handleError.bind(this);e&&(0,o.ajax)(e,{success:function(e){n({},e,t)},error:function(){r()}},null,{method:"GET",withCredentials:!0})}else this.failedBidRequest()}},{key:"handleError",value:function(){this.failedBidRequest()}},{key:"generateUrl",value:function(){if(null===this.adCode||null===this.supplyCode)return null;var t=this._cabinet.manifest.width,e=this._cabinet.manifest.height,n=this._cabinet.pageProtocol+"//"+this.supplyCode+".ads.tremorhub.com/ad/tag?adCode="+this.adCode;return n+="&playerWidth="+t,n+="&playerHeight="+e,n+="&srcPageUrl="+encodeURIComponent(this._cabinet.locationInfo.domain_match),n+="&fmt=json"}},{key:"getBestBid",value:function(t){var e=null;return(0,u.default)(t.seatbid,function(t){(0,u.default)(t.bid,function(t){(null===e||t.price>e.price)&&(e=t)})}),e}},{key:"handleResponse",value:function(t,e,n){var r=void 0;try{r=JSON.parse(e)}catch(t){console.log(t)}if(!r.hasOwnProperty("seatbid")||r.seatbid.length<1)this.failedBidRequest();else{var i=this.getBestBid(r);if(null!==i&&this.validBid(i.price)){var a=(new DOMParser).parseFromString(i.adm,"application/xml"),o=new s.AdVast(this._cabinet,this.sendJsDemandResponse.bind(this),this.demandTag_,this.successCb.bind(this),this.failureCb.bind(this),this.initParams_.environmentVars,this.callLogEvent_.bind(this),n),u={bp:i.price};o.processVast(a,"",u)}else this.failedBidRequest()}}}]),e}();n.default=_},{"../ad_vast":211,"../ss_utils/ajax":228,"./header_bidding_ad_container":195,"lodash/forEach":145}],199:[function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e,n,r,i){var a={};if(null!==e.urlparams)for(var o in e.urlparams)e.urlparams.hasOwnProperty(o)&&(a[o]=e.urlparams[o]);return a[p.JSON_PIXEL_PARAMS.declaredDomain]=e.domain,a[p.JSON_PIXEL_PARAMS.declaredWidth]=e.width,a[p.JSON_PIXEL_PARAMS.declaredHeight]=e.height,a[p.JSON_PIXEL_PARAMS.detectedDomain]=n.domain_match,a[p.JSON_PIXEL_PARAMS.detectedWidth]=r.detectedWidth,a[p.JSON_PIXEL_PARAMS.detectedHeight]=r.detectedHeight,a[p.JSON_PIXEL_PARAMS.fullUrl]=n.url,a[p.JSON_PIXEL_PARAMS.cb]=y.getCb(),a[p.JSON_PIXEL_PARAMS.url]=e.td?n.domain_match:e.domain,a[p.JSON_PIXEL_PARAMS.w]=e.ts?r.detectedWidth:e.width,a[p.JSON_PIXEL_PARAMS.h]=e.ts?r.detectedHeight:e.height,y.makeUrl(y.getProtocol(i),t+"/json/"+e.supplyTagId,a)}Object.defineProperty(n,"__esModule",{value:!0}),n.AdController=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,n,r)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(r)};n.getJsonUrl=a;var u=i(t("lodash/defaults")),_=i(t("lodash/isElement")),l=r(t("./ad_manifest")),c=r(t("./ad_pixel")),d=i(t("./ad_processor")),h=i(t("./ad_js_bridge_manager")),f=i(t("./ad_vd")),p=r(t("./constants")),E=i(t("./fsm")),v=r(t("./moat_wrapper")),A=r(t("./ssc_detection")),y=r(t("./utils")),R=i(t("../../../moat.json")),S=r(t("./__IASVANS_3.5.0")),O=r(t("../../../ias.json")),g=i(t("../../../timeouts.json")),m=r(t("./post_imp_detection")),T=r(t("./viewability_detection")),I=i(t("./cabinet"));n.AdController=function(t){function e(t,n,r,i,a,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"AdController"));return s._cabinet=new I.default(t,n,r,i,a,o,g.default),s.MoatApiReference_=null,s.IasApiReference_=null,s.fsmVpaidEvent_=new E.default(p.VPAID_FINAL_EVENTS,p.VPAID_ONCE_EVENTS),s.fsmPixelEvent_=new E.default(p.PIXEL_MUTEX_EVENTS,p.PIXEL_ONCE_EVENTS),s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,f.default),o(e,[{key:"callEvent_",value:function(t){for(var e=this,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(this.fsmVpaidEvent_.sendEventType(t)){if(p.VOLUME_EVENTS.hasOwnProperty(t)&&this.setAdVolumeInternal(this.getAdVolumeInternal()),null!==this.ad_&&this.ad_.currentWaterfallIndex_>=0&&this.ad_.currentWaterfallIndex_<this._cabinet.manifest.dx.length&&y.firePixels(document,l.getPixelUrlsByEvent(this._cabinet.manifest.dx[this.ad_.currentWaterfallIndex_][0],t)),null!==this.MoatApiReference_){var a={type:t,adVolume:this.getAdVolumeInternal()};this.MoatApiReference_.dispatchEvent(a)}if(p.IAS_EVENTS.hasOwnProperty(t)&&null!==this.IasApiReference_){var o={ad_duration:this.ad_.getAdDuration(),ad_dimensions:this.initParams_.width+"x"+this.initParams_.height,player_dimensions:this.initParams_.environmentVars.videoSlot.width+"x"+this.initParams_.environmentVars.videoSlot.height,volume:this.getAdVolumeInternal()};this.IasApiReference_.sendEvent(t,o)}t===p.VPAID_EVENTS.AdLoaded&&null!==this.ad_&&this.ad_.setAdVolume(this.getAdVolumeInternal());var s=function(){e.callSuperEvent.apply(e,[t].concat(r))};p.VPAID_FINAL_EVENTS.hasOwnProperty(t)?setTimeout(s,g.default.SUPPLY_ERROR_PIXEL_TIMEOUT):s()}}},{key:"callSuperEvent",value:function(t){for(var n,r=arguments.length,i=Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];(n=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"callEvent_",this)).call.apply(n,[this,t].concat(i))}},{key:"initAd",value:function(t,n,r,i,a,o){var u=this;try{s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initAd",this).call(this,t,n,r,i,a,o)}catch(t){return void this.initAdError(p.VD_ERROR_CODES.INIT_AD_ERROR,t)}try{this._cabinet.manifest=l.parse(JSON.parse(this.creativeData_.AdParameters))}catch(t){return void this.initAdError(p.VD_ERROR_CODES.MANIFEST_PARSE_ERROR,t)}try{this._cabinet.jsBridgeManager=new h.default(this._cabinet.uuid,this._cabinet.flashBridgeUrl)}catch(t){return void this.initAdError(p.VD_ERROR_CODES.JS_BRIDGE_MANAGER_CREATE_ERROR,t)}var c=void 0;try{c=this._cabinet.getStateInfo(this.initParams_)}catch(t){return void this.initAdError(p.VD_ERROR_CODES.INIT_AD_STATE_INFO_ERROR,t)}var d=void 0;try{d=this._cabinet.isDomainMatch}catch(t){return void this.initAdError(p.VD_ERROR_CODES.INIT_AD_TD_MISMATCH_ERROR,t)}var f=void 0;try{f=this._cabinet.isSizeMatch(c)}catch(t){return void this.initAdError(p.VD_ERROR_CODES.INIT_AD_TS_MISMATCH_ERROR,t)}try{if(this._cabinet.manifest.td&&!d||this._cabinet.manifest.ts&&!f)return void this.getNewAdParameters(t,n,r,i,a,o,c)}catch(t){return void this.initAdError(p.VD_ERROR_CODES.INIT_AD_GET_NEW_AD_PARAMETERS_ERROR,t)}var E=!1,v=function(){if(!E){E=!0;try{var e=u.postInit(t,n,r,i,a,o);null!==e&&u.initAdError(e.reason,e.error)}catch(t){u.initAdError(p.VD_ERROR_CODES.INIT_AD_POST_INIT_ERROR,t)}}};try{var A=(0,_.default)(this.initParams_.environmentVars.videoSlot)?this.initParams_.environmentVars.videoSlot:this.initParams_.environmentVars.slot;T.init(A,document,v)}catch(t){}setTimeout(v,50)}},{key:"postInit",value:function(t,e,n,r,i,a){try{this._cabinet.initialize(a)}catch(t){return void this.initAdError(t.message,t)}try{if(0===this._cabinet.manifest.numWaterfalls)return{reason:p.VD_ERROR_CODES.NO_RESPONSES,error:null}}catch(t){return{reason:p.VD_ERROR_CODES.POST_INIT_WATERFALL_CHECK_ERROR,error:t}}try{this.ad_=new d.default(this._cabinet,this.initParams_),this.ad_.handshakeVersion(this.handshakeVersion_),this.registerVpaidEventListeners_(this.ad_),this.registerLogEventListeners_(this.ad_),this.registerSSEventListeners_(this.ad_),this.callSSEvent_(p.VID_IO_EVENTS.js_opportunity,null,{},null),y.firePixels(document,l.getPixelUrlsByEvent(this._cabinet.manifest,p.PIXEL_EVENTS.initAd)),this.ad_.initAd(t,e,n,r,i,a),this.ad_.nextBroadcast()}catch(t){return{reason:p.VD_ERROR_CODES.PROCESSOR_INIT_ERROR,error:t}}return null}},{key:"resizeAd",value:function(t,n,r){if(s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"resizeAd",this).call(this,t,n,r),this.ad_&&null!==this.IasApiReference_){var i={ad_duration:this.ad_.getAdDuration(),ad_dimensions:this.initParams_.width+"x"+this.initParams_.height,player_dimensions:this.initParams_.environmentVars.videoSlot.width+"x"+this.initParams_.environmentVars.videoSlot.height,volume:this.getAdVolumeInternal(),height:n,width:t,viewMode:r};this.IasApiReference_.sendEvent("resizeAd",i)}}},{key:"startAd",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"startAd",this).call(this),this.ad_&&this.ad_.setAdVolume(this.getAdVolumeInternal())}},{key:"initAdError",value:function(t,e){var n=t+(e?"_"+e.message:""),r={reason:n,timeout:!1};null!==this._cabinet.timeoutManager&&t!==p.VD_ERROR_CODES.TIMEOUT_MANAGER_INIT_ERROR&&(r.on_page_time=this._cabinet.timeoutManager.timeOnPage),this.callSSEvent_(p.VID_IO_EVENTS.js_supply_error,null,r,null),this.callEvent_(p.VPAID_EVENTS.AdError,n)}},{key:"on_js_impression",value:function(t,n,r){if(A.load(document,this._cabinet.manifest,t,this.initParams_.width,this.initParams_.height,this._cabinet.locationInfo.domain_match,this._cabinet.pageProtocol).length,null===this.MoatApiReference_&&m.shouldFire(this._cabinet.manifest,t,p.POST_IMP_PROVIDER_ID_MOAT)){var i=m.addMoatToCallChain(this._cabinet.manifest,t);this.MoatApiReference_=v.initMoatTracking(this.initParams_.environmentVars.slot,{level1:this._cabinet.manifest.aid,level2:this._cabinet.manifest.supplyTagId,level3:this._cabinet.manifest.domain,level4:p.MOAT_DUMMY_VALUE,slicer1:p.MOAT_DUMMY_VALUE,slicer2:i},this.getAdDuration(),R.default.moatPartnerCode,this.initParams_.environmentVars.videoSlot.src)}if(null===this.IasApiReference_&&m.shouldFire(this._cabinet.manifest,t,p.POST_IMP_PROVIDER_ID_IAS)){var a=this._cabinet.getStateInfo(this.initParams_),o={partner:O.partner,anId:O.adNetworkId,placementId:this._cabinet.manifest.supplyTagId,impId:this._cabinet.uuid},u=[];u.push(p.IAS_EXTRA_PARAMS.declaredDomain+"="+this._cabinet.manifest.domain),u.push(p.IAS_EXTRA_PARAMS.declaredWidth+"="+this._cabinet.manifest.width),u.push(p.IAS_EXTRA_PARAMS.declaredHeight+"="+this._cabinet.manifest.height),u.push(p.IAS_EXTRA_PARAMS.detectedDomain+"="+this._cabinet.locationInfo.domain_match),u.push(p.IAS_EXTRA_PARAMS.detectedWidth+"="+a.detectedWidth),u.push(p.IAS_EXTRA_PARAMS.detectedHeight+"="+a.detectedHeight),u.push(p.IAS_EXTRA_PARAMS.aId+"="+this._cabinet.manifest.aid),u.push(p.IAS_EXTRA_PARAMS.aCc+"="+t.a_cc),u.push(p.IAS_EXTRA_PARAMS.ssId+"="+this._cabinet.manifest.ssid),u.push(p.IAS_EXTRA_PARAMS.country+"="+this._cabinet.manifest.country),o.planId=u.join("|"),this.IasApiReference_=new S.__IASVANS,this.IasApiReference_.initCM(o,this.initParams_.environmentVars.slot)}s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"on_js_impression",this).call(this,t,n,r)}},{key:"callSSEvent_",value:function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(p.VID_IO_EVENTS.hasOwnProperty(t)){var a=y.getArgs(arguments),o=a[1],u=a[2],_=a[3],l=a[4];if(this.fsmPixelEvent_.sendEventType(t)){var d;(d=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"callSSEvent_",this)).call.apply(d,[this,t].concat(r));var h=this._cabinet.getStateInfo(this.initParams_);y.addImage(document,y.makeUrl(y.getProtocol(this._cabinet.forceSecure||this._cabinet.manifest.secure),this._cabinet.pixelUrl,c.getPixelParams(this._cabinet.uuid,this._cabinet.version,this.instanceId_,this._cabinet.locationInfo,h,this._cabinet.manifest,this.initParams_.width,this.initParams_.height,t,o,u,_,l)))}}}},{key:"getNewAdParameters",value:function(t,e,n,r,i,o,s){var _=this,c=y.getRequestMethod(a(this._cabinet.endpoint,this._cabinet.manifest,this._cabinet.locationInfo,s,this._cabinet.forceSecure||this._cabinet.manifest.secure),!1);if(c){var d=c.xhr;d.timeout=g.default.JSON_TIMEOUT,d.ontimeout=function(){_.initAdError(p.VD_ERROR_CODES.JSON_TIMEOUT,null)},d.onload=function(){try{if(200!==d.status)return void _.initAdError(p.VD_ERROR_CODES.BAD_XHR_STATUS+"_"+d.status,null);var a=void 0;try{var c=JSON.parse(d.responseText),h={dx:c.dx};c.hasOwnProperty("dto")&&(h.dto=c.dto);var f={};_._cabinet.manifest.td&&(f.domain=_._cabinet.locationInfo.domain_match),_._cabinet.manifest.ts&&(f.width=s.detectedWidth,f.height=s.detectedHeight),a=(0,u.default)(h,f,JSON.parse(_.creativeData_.AdParameters)),_.creativeData_.AdParameters=JSON.stringify(a),i.AdParameters=_.creativeData_.AdParameters}catch(t){return void _.initAdError(p.VD_ERROR_CODES.JSON_RESPONSE_PARSE_ERROR,t)}try{_._cabinet.manifest=l.parse(a)}catch(t){return void _.initAdError(p.VD_ERROR_CODES.JSON_MANIFEST_PARSE_ERROR,t)}var E=_.postInit(t,e,n,r,i,o);null!==E&&_.initAdError(E.reason,E.error)}catch(t){_.initAdError(p.VD_ERROR_CODES.JSON_PARSE_UNKNOWN_ERROR,t)}},d.onerror=function(){_.initAdError(p.VD_ERROR_CODES.XHR_ERROR,null)},d.send()}else this.initAdError(p.VD_ERROR_CODES.NO_XHR,null)}}]),e}()},{"../../../ias.json":2,"../../../moat.json":3,"../../../timeouts.json":238,"./__IASVANS_3.5.0":191,"./ad_js_bridge_manager":203,"./ad_manifest":206,"./ad_pixel":207,"./ad_processor":208,"./ad_vd":213,"./cabinet":217,"./constants":223,"./fsm":224,"./moat_wrapper":226,"./post_imp_detection":227,"./ssc_detection":231,"./utils":233,"./viewability_detection":236,"lodash/defaults":139,"lodash/isElement":155}],200:[function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,n,r)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(r)},s=i(t("lodash/map")),u=i(t("lodash/forEach")),_=i(t("lodash/extend")),l=i(t("./ad_state")),c=i(t("./child_vpaid/video_wrapper")),d=r(t("./ad_iframe")),h=r(t("./ad_pixel")),f=r(t("./constants")),p=r(t("./utils")),E=i(t("../../../timeouts.json")),v=function(t){function e(t,n,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"DemandRequest",t,n));return a.demandTag_=r,a.vast_=i,a.creativeType_=null,a.slotListeners_={},a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,l.default),a(e,[{key:"fireVastPixels",value:function(t,e){try{this.callLogEvent_(f.LOG_EVENTS.VAST_FIRE_PIXEL,t)}catch(t){}try{p.firePixels(document,(0,s.default)(e,function(t){return t.replace(f.VAST_MACROS.CACHEBUSTING,p.getCb())}))}catch(e){try{this.callLogEvent_(f.LOG_EVENTS.VAST_FIRE_PIXEL_ERROR,t)}catch(t){}}}},{key:"fireErrorPixels",value:function(){this.fireVastPixels(f.VAST_PIXEL_TYPES.VAST_ERROR,(0,s.default)(this.vast_.errorPixels,function(t){return t.replace(f.VAST_MACROS.ERRORCODE,f.VAST_ERRORCODES.VAST_ERRORCODE_901)}))}},{key:"demandError",value:function(t,e){this.fireErrorPixels(),this.vidIODemandError(t,e)}},{key:"getOptions",value:function(t){return null!==this.vast_.ortb_detail?(0,_.default)(t,this.vast_.ortb_detail):this.vast_.hasOwnProperty("hbDetails")&&null!==this.vast_.hbDetails?(0,_.default)(t,this.vast_.hbDetails):t}},{key:"vidIODemandError",value:function(t,e){this.callSSEvent_(f.VID_IO_EVENTS.js_demand_error,this.demandTag_,this.getOptions({cc_i:this.demandTag_.callChain.getCallChainIndices(this._cabinet.historyManager.demand_events.error,!0).join(","),response_time:this._cabinet.timeoutManager.getResponseTime(this.demandTag_.waterfallIdx),reason:t,timeout:e,creative_type:this.creativeType_}),null)}},{key:"getCreativeData",value:function(){return{AdParameters:this.vast_.adParameters}}},{key:"bridgeLoadBegin",value:function(){var t=this._cabinet.timeoutManager.getTimeoutInfo(this.demandTag_.waterfallIdx,null);if(t.timeout<=0){try{this.stopAd()}catch(t){}this.demandError(t.reason,!0)}else{try{this._cabinet.jsBridgeManager.adJsBridge.load(this.vast_)}catch(t){this.demandError(f.VD_ERROR_CODES.JS_VPAID_BRIDGE_LOAD_ERROR,!1)}try{this.begin(this.getCreativeData(),this._cabinet.jsBridgeManager.adJsBridge,this.initParams_.environmentVars)}catch(t){try{this.stopAd()}catch(t){}this.demandError(f.VD_ERROR_CODES.JS_VPAID_BRIDGE_BEGIN_ERROR,!1)}}}},{key:"load",value:function(){var t=this;try{if(this.vast_.hasPlayableMedia)this.creativeType_=f.CREATIVE_TYPES.MEDIA;else if(null!==this.vast_.jsVpaidUrl)this.creativeType_=f.CREATIVE_TYPES.JS_VPAID;else if(null!==this.vast_.flashVpaidUrl)this.creativeType_=f.CREATIVE_TYPES.FLASH_VPAID;else{if(!(this.vast_.xFlvMedia.length>0))return void this.demandError(f.VD_ERROR_CODES.VAST_LOGIC_ERROR,!1);this.creativeType_=f.CREATIVE_TYPES.XFLV}if(this.callSSEvent_(f.VID_IO_EVENTS.js_demand_opportunity,this.demandTag_,this.getOptions({cc_i:this.demandTag_.callChain.getCallChainIndices(this._cabinet.historyManager.demand_events.opportunity,!0).join(","),response_time:this._cabinet.timeoutManager.getResponseTime(this.demandTag_.waterfallIdx),creative_type:this.creativeType_}),null),this.creativeType_===f.CREATIVE_TYPES.MEDIA)try{var e=new c.default(this._cabinet,this.vast_);this.addSlotEventListener_(f.ELEMENT_EVENTS.click,function(t){e.adClicked()}),this.begin(this.getCreativeData(),e,this.initParams_.environmentVars)}catch(t){try{this.stopAd()}catch(t){}this.demandError(f.VD_ERROR_CODES.VAST_WRAPPER_BEGIN_ERROR,!1)}else if(this.creativeType_===f.CREATIVE_TYPES.JS_VPAID){var n=this._cabinet.timeoutManager.getTimeoutInfo(this.demandTag_.waterfallIdx,[{timeout:E.default.VPAID_SCRIPT_TIMEOUT,reason:f.VD_ERROR_CODES.VPAID_TIMEOUT}]);d.createIframe(this._cabinet.uuid,document,this._cabinet.manifest.enableFlashIframe?null:f.ALLOW_SCRIPTS,this.vast_.jsVpaidUrl,n.timeout,function(){t.demandError(n.reason,!0)},function(e){if(t.isAdDead_)return!1;var n=void 0;try{n=e.contentWindow.getVPAIDAd}catch(e){return t.demandError(f.VD_ERROR_CODES.GET_JS_VPAID_AD_ERROR,!1),!1}var r=n&&"function"==typeof n;if(r)try{t.begin(t.getCreativeData(),n(),t.initParams_.environmentVars)}catch(e){try{t.stopAd()}catch(t){}return t.demandError(f.VD_ERROR_CODES.JS_VPAID_BEGIN_ERROR,!1),!1}else t.demandError(f.VD_ERROR_CODES.SCRIPT_ON_ERROR,!1);return r},function(){t.demandError(f.VD_ERROR_CODES.IFRAME_ON_ERROR,!1)})}else if(this._cabinet.jsBridgeManager.isSWFReady_)this.bridgeLoadBegin();else if(this._cabinet.jsBridgeManager.embedResult_&&!this._cabinet.jsBridgeManager.embedResult_.success)this.demandError(f.VD_ERROR_CODES.JS_VPAID_EMBED_FAIL,!1);else{try{this._cabinet.jsBridgeManager.subscribeBridgeEvent(function(){},f.BRIDGE_EVENTS.EMBED_SUCCESS,this),this._cabinet.jsBridgeManager.subscribeBridgeEvent(function(){this.demandError(f.VD_ERROR_CODES.JS_VPAID_EMBED_FAIL,!1)},f.BRIDGE_EVENTS.EMBED_FAIL,this),this._cabinet.jsBridgeManager.subscribeBridgeEvent(function(){this.isAdDead_||this.bridgeLoadBegin()},f.BRIDGE_EVENTS.SWF_IS_READY,this)}catch(t){return void this.demandError(f.VD_ERROR_CODES.JS_VPAID_BRIDGE_SUBSCRIBE_FAIL,!1)}if(null===this._cabinet.jsBridgeManager.adJsBridge)try{this._cabinet.jsBridgeManager.create(this._cabinet.manifest.secure,this.initParams_.width,this.initParams_.height,this.initParams_.environmentVars.slot)}catch(t){try{this.stopAd()}catch(t){}this.demandError(f.VD_ERROR_CODES.AD_BRIDGE_CREATE_ERROR,!1)}}}catch(t){this.demandError(f.VD_ERROR_CODES.DEMAND_TAG_ERROR,!1)}}},{key:"begin",value:function(t,e,n){var r=this,i=this._cabinet.timeoutManager.getTimeoutInfo(this.demandTag_.waterfallIdx,null);if(i.timeout<=0){try{this.stopAd()}catch(t){}this.demandError(i.reason,!0)}else{this.ad_=e,this.registerVpaidEventListeners_(this.ad_),this.demandTagTimeout_=setTimeout(function(){try{r.stopAd()}catch(t){}r.demandError(i.reason,!0)},i.timeout);try{this.ad_.handshakeVersion(this.handshakeVersion_)}catch(t){try{this.stopAd()}catch(t){}return void this.demandError(f.VD_ERROR_CODES.CHILD_HANDSHAKE_ERROR,!1)}try{this.ad_.initAd(this.initParams_.width,this.initParams_.height,this.initParams_.viewMode,this.initParams_.desiredBitrate,t,n)}catch(t){try{this.stopAd()}catch(t){}return void this.demandError(f.VD_ERROR_CODES.CHILD_INIT_AD_ERROR,!1)}try{this.ad_.setAdVolume(this.getAdVolume())}catch(t){}}}},{key:"addSlotEventListener_",value:function(t,e){this.slotListeners_.hasOwnProperty(t)||(this.slotListeners_[t]=[]),this.slotListeners_[t].push(e),this.initParams_.environmentVars.slot.addEventListener(t,e,!1)}},{key:"removeSlotEventListeners",value:function(){var t=this;(0,s.default)(this.slotListeners_,function(e,n){(0,u.default)(t.slotListeners_[n],function(e){t.initParams_.environmentVars.slot.removeEventListener(n,e)})}),this.slotListeners_={}}},{key:"stopAd",value:function(){this.removeSlotEventListeners(),o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"stopAd",this).call(this)}},{key:"maybeInitializeAdVolume",value:function(){if(!(this.isAdLoaded_||this.isAdImpression_||this.isAdStarted_||this.isAdVideoStart_))try{this.ad_.setAdVolume(this.getAdVolume())}catch(t){try{this.stopAd()}catch(t){this.demandError(f.VD_ERROR_CODES.CHILD_SET_VOLUME_ERROR,!1)}}}},{key:"onAdLoaded",value:function(){this.maybeInitializeAdVolume(),o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdLoaded",this).call(this)}},{key:"onAdStarted",value:function(){this.maybeInitializeAdVolume(),this.fireVastPixels(f.VAST_PIXEL_TYPES.VAST_CREATIVEVIEW,this.vast_.trackingEvents.creativeView),o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdStarted",this).call(this)}},{key:"onAdVideoStart",value:function(){this.maybeInitializeAdVolume(),this.fireVastPixels(f.VAST_PIXEL_TYPES.VAST_START,this.vast_.trackingEvents.start),o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdVideoStart",this).call(this)}},{key:"onAdImpression",value:function(){this.maybeInitializeAdVolume(),this.callSSEvent_(f.VID_IO_EVENTS.js_impression,this.demandTag_,this.getOptions({time_on_page:this._cabinet.timeoutManager.timeOnPage,response_time:this._cabinet.timeoutManager.getResponseTime(this.demandTag_.waterfallIdx),creative_type:this.creativeType_,dtype:h.getDemandType(this.vast_),ctype:h.getCreativeTypeToDemandType(this.creativeType_)}),null),clearTimeout(this.demandTagTimeout_),this.fireVastPixels(f.VAST_PIXEL_TYPES.VAST_IMPRESSION,this.vast_.impressionPixels),o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdImpression",this).call(this)}},{key:"onAdUserAcceptInvitation",value:function(){this.fireVastPixels(f.VAST_PIXEL_TYPES.VAST_ACCEPTINVITATION,this.vast_.trackingEvents.acceptInvitation),this.fireVastPixels(f.VAST_PIXEL_TYPES.VAST_ACCEPTINVITATIONLINEAR,this.vast_.trackingEvents.acceptInvitationLinear),o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdUserAcceptInvitation",this).call(this)}},{key:"onAdUserMinimize",value:function(){this.fireVastPixels(f.VAST_PIXEL_TYPES.VAST_COLLAPSE,this.vast_.trackingEvents.collapse),o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdUserMinimize",this).call(this)}},{key:"onAdUserClose",value:function(){this.fireVastPixels(f.VAST_PIXEL_TYPES.VAST_CLOSELINEAR,this.vast_.trackingEvents.closeLinear),o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdUserClose",this).call(this)}},{key:"onAdClickThru",value:function(t,n,r){this.callSSEvent_(f.VID_IO_EVENTS.js_click,this.demandTag_,this.getOptions({creative_type:this.creativeType_}),null),this.fireVastPixels(f.VAST_PIXEL_TYPES.VAST_CLICKTRACKING,this.vast_.clickTracking),o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdClickThru",this).call(this,t,n,r)}},{key:"onAdVideoFirstQuartile",value:function(){this.fireVastPixels(f.VAST_PIXEL_TYPES.VAST_FIRSTQUARTILE,this.vast_.trackingEvents.firstQuartile),this.callSSEvent_(f.VID_IO_EVENTS.js_first_quartile,this.demandTag_,this.vast_.ortb_detail||{},null),o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdVideoFirstQuartile",this).call(this)}},{key:"onAdVideoMidpoint",value:function(){this.fireVastPixels(f.VAST_PIXEL_TYPES.VAST_MIDPOINT,this.vast_.trackingEvents.midpoint),this.callSSEvent_(f.VID_IO_EVENTS.js_midpoint,this.demandTag_,this.vast_.ortb_detail||{},null),o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdVideoMidpoint",this).call(this)}},{key:"onAdVideoThirdQuartile",value:function(){this.fireVastPixels(f.VAST_PIXEL_TYPES.VAST_THIRDQUARTILE,this.vast_.trackingEvents.thirdQuartile),this.callSSEvent_(f.VID_IO_EVENTS.js_third_quartile,this.demandTag_,this.vast_.ortb_detail||{},null),o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdVideoThirdQuartile",this).call(this)}},{key:"onAdVideoComplete",value:function(){this.fireVastPixels(f.VAST_PIXEL_TYPES.VAST_COMPLETE,this.vast_.trackingEvents.complete),this.callSSEvent_(f.VID_IO_EVENTS.js_complete,this.demandTag_,this.vast_.ortb_detail||{},null),o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdVideoComplete",this).call(this)}},{key:"onAdPaused",value:function(){this.fireVastPixels(f.VAST_PIXEL_TYPES.VAST_PAUSE,this.vast_.trackingEvents.pause),o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdPaused",this).call(this)}},{key:"onAdPlaying",value:function(){this.fireVastPixels(f.VAST_PIXEL_TYPES.VAST_RESUME,this.vast_.trackingEvents.resume),o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdPlaying",this).call(this)}},{key:"onAdVolumeChange",value:function(){0===this.volume_&&this.previousVolume_>0&&this.fireVastPixels(f.VAST_PIXEL_TYPES.VAST_MUTE,this.vast_.trackingEvents.mute),this.volume_>0&&0===this.previousVolume_&&this.fireVastPixels(f.VAST_PIXEL_TYPES.VAST_UNMUTE,this.vast_.trackingEvents.unmute),o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdVolumeChange",this).call(this)}},{key:"onAdStopped",value:function(){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdStopped",this).call(this),this.isAdImpression_||this.vidIODemandError(f.VD_ERROR_CODES.AD_STOPPED,!1)}},{key:"onAdSkipped",value:function(){this.fireVastPixels(f.VAST_PIXEL_TYPES.VAST_SKIP,this.vast_.trackingEvents.skip),o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdSkipped",this).call(this),this.isAdImpression_||this.vidIODemandError(f.VD_ERROR_CODES.AD_SKIPPED,!1)}},{key:"onAdError",value:function(t){this.fireErrorPixels();var n=t?p.getTruncatedString(t,f.AD_ERROR_TRUNCATION_LENGTH):f.VD_ERROR_CODES.AD_ERROR;o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdError",this).call(this,n),this.isAdImpression_||this.vidIODemandError(n,!1)}}]),e}();n.default=v},{"../../../timeouts.json":238,"./ad_iframe":202,"./ad_pixel":207,"./ad_state":209,"./child_vpaid/video_wrapper":221,"./constants":223,"./utils":233,"lodash/extend":141,"lodash/forEach":145,"lodash/map":172}],201:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(t){return t&&t.__esModule?t:{default:t}}(t("lodash/remove")),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(t("./utils")),o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name_="AdEventListener("+e+")",this.uuid_=null,this.instanceId_=a.getCb(),this.playerEventListeners_={},this.logEventListeners_={}}return r(t,[{key:"callEvent_",value:function(t){var e=Array.prototype.slice.call(arguments,1);if(this.playerEventListeners_.hasOwnProperty(t))for(var n=0;n<this.playerEventListeners_[t].length;n++)this.playerEventListeners_[t][n].apply(this.playerEventListeners_[t][n],e)}},{key:"subscribe",value:function(t,e,n){this.playerEventListeners_.hasOwnProperty(e)||(this.playerEventListeners_[e]=[]),this.playerEventListeners_[e].push(t.bind(n))}},{key:"unsubscribe",value:function(t){this.playerEventListeners_&&this.playerEventListeners_.hasOwnProperty(t)&&(this.playerEventListeners_[t]=[])}},{key:"callLogEvent_",value:function(t){var e=Array.prototype.slice.call(arguments,1);if(this.logEventListeners_.hasOwnProperty(t))for(var n=0;n<this.logEventListeners_[t].length;n++)this.logEventListeners_[t][n].apply(this.logEventListeners_[t][n],e)}},{key:"subscribeLogEvent",value:function(t,e,n){this.logEventListeners_.hasOwnProperty(e)||(this.logEventListeners_[e]=[]),this.logEventListeners_[e].push(t.bind(n))}},{key:"unsubscribeLogEvent",value:function(t,e){this.logEventListeners_&&this.logEventListeners_.hasOwnProperty(t)&&(0,i.default)(this.logEventListeners_[t],function(t){return t===e})}}]),t}();n.default=o},{"./utils":233,"lodash/remove":178}],202:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.createIframe=function(t,e,n,r,i,a,o,s){function u(t){return function(){_||(_=!0,s(l))}}var _=!1,l=e.createElement("iframe");l.id="iframe-"+t,null!==n&&(l.sandbox=n);var c=l.frameElement||l;c.style.border="0px",c.style.width="100%",c.style.height="100%",c.style.position="relative",c.style.overflow="hidden",c.scrolling="no",l.src="javascript:false",e.body.appendChild(l);var d=u(),h=u(),f=u(),p=l.contentWindow,E=p.document;E.open().write("<body onload=\"var js = document.createElement('script');js.src = '"+r+"';js.addEventListener('load', function() { window.onLoadFn(); });js.addEventListener('error', function() { window.onErrorFn(); });js.addEventListener('abort', function() { window.onAbortFn(); });js.addEventListener('beforeunload', function() { window.onBeforeunloadFn(); });document.body.appendChild(js);\">"),p.onLoadFn=function(){_||(_=!0,o(l))},p.onErrorFn=d,p.onAbortFn=h,p.onBeforeunloadFn=f,E.close(),setTimeout(function(){_||(_=!0,a(l))},i)};!function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);e.default=t}(t("./utils"))},{"./utils":233}],203:[function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=i(t("lodash/remove")),s=r(t("./constants")),u=(r(t("./utils")),i(t("./child_vpaid/bridge_wrapper"))),_=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.uuid_=e,this.bridge_url_=n,this.embedResult_=null,this.isSWFReady_=!1,this._adJsBridge=null,this.bridgeEventListeners_={}}return a(t,[{key:"callBridgeEvent_",value:function(t){var e=Array.prototype.slice.call(arguments,1);if(this.bridgeEventListeners_.hasOwnProperty(t))for(var n=0;n<this.bridgeEventListeners_[t].length;n++)this.bridgeEventListeners_[t][n].apply(this.bridgeEventListeners_[t][n],e)}},{key:"subscribeBridgeEvent",value:function(t,e,n){this.bridgeEventListeners_.hasOwnProperty(e)||(this.bridgeEventListeners_[e]=[]),this.bridgeEventListeners_[e].push(t.bind(n))}},{key:"unsubscribeBridgeEvent",value:function(t,e){this.bridgeEventListeners_.hasOwnProperty(t)&&(0,o.default)(this.bridgeEventListeners_[t],function(t){return t===e})}},{key:"create",value:function(t,e,n,r){var i=this;this._adJsBridge=new u.default(this.uuid_,t,this.bridge_url_,e,n,r,function(t){i.embedResult_=t,t.success?i.callBridgeEvent_(s.BRIDGE_EVENTS.EMBED_SUCCESS):i.callBridgeEvent_(s.BRIDGE_EVENTS.EMBED_FAIL)},function(){i.isSWFReady_=!0,i.callBridgeEvent_(s.BRIDGE_EVENTS.SWF_IS_READY)})}},{key:"adJsBridge",get:function(){return this._adJsBridge}}]),t}();n.default=_},{"./child_vpaid/bridge_wrapper":220,"./constants":223,"./utils":233,"lodash/remove":178}],204:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getLocation=function(){function t(t){try{return new URL(t).hostname}catch(n){try{var e=new RegExp("(?:https?://)?(?:w+:/)?[^:?#/s]*?([^.s]+.(?:[a-z]{2,}|co.uk|org.uk|ac.uk|org.au|com.au))(?:[:?#/]|$)","gi").exec(t);return e?e[1]:null}catch(t){return null}}}var e=null,n=null,r=null,i=null,a=null,o=null,s=null,u=null,_=null,l=null,c=null,d=null,h=[],f=[],p=null,E=null,v=null,A=null,y=null,R=-1,S=-1;try{e=window.location.href}catch(t){}try{n=window.top.location.href}catch(t){}try{r=window.location.hostname}catch(t){}try{i=window.top.location.hostname}catch(t){}try{a=window.location.origin}catch(t){}try{o=window.top.location.origin}catch(t){}try{u=t(s=document.referrer)}catch(t){}try{_=[],l=[];for(var O=0;O<window.location.ancestorOrigins.length;O++){var g=window.location.ancestorOrigins[O];_.push(g),l.push(t(g))}}catch(t){}null!==_&&_.length>0&&(c=_[_.length-1]),null!==l&&l.length>0&&(d=l[l.length-1]);try{var m=window;R=0;do{try{h.push({url:window.location.href}),E=window.location.href}catch(t){h.push({error:t})}try{f.push({url:window.location.hostname}),p=window.location.hostname,S=R+1}catch(t){f.push({error:t})}m=m.parent,R++}while(m!==window.top&&m!==m.parent&&R<50)}catch(t){}return null!==d&&""!==d?(A=d,y="d_wla"):null!==i&&""!==i?(A=i,y="d_wtl"):R<=1?null!==r&&""!==r&&(A=r,y="d_wl"):2===R||S<=2?null!==u&&""!==u?(A=u,y="d_r"):null!==r&&""!==r&&(A=r,y="d_wl"):null!==p&&""!==p?(A=p,y="d_p"+S):null!==u&&""!==u?(A=u,y="d_r"):null!==r&&""!==r&&(A=r,y="d_wl"),null!==n&&""!==n?v=n:R<=1?null!==e&&""!==e&&(v=e):2===R||S<=2?null!==s&&""!==s?v=s:null!==e&&""!==e&&(v=e):null!==E&&""!==E?v=E:null!==s&&""!==s?v=s:null!==e&&""!==e&&(v=e),null===v&&null!==c&&""!==c&&(v=c),{window__location__href:e,window__top__location__href:n,window__location__hostname:r,window__top__location__hostname:i,window__location__origin:a,window__top__location__origin:o,document__referrer:s,document__referrer___hostname:u,window__location__ancestorOrigins:_,window__location__ancestorOrigins__hostnames:l,topAncestorOrigin:c,topAncestorOriginHostname:d,parents:h,parent_hostnames:f,topParentDomain:p,topParent:E,url:v,domain_match:A,domain_match_source:y}}},{}],205:[function(t,e,n){(function(n){"use strict";function r(){return new i.AdController("vid.springserve.com","vid-io.springserve.com/vd/i","vpaid.springserve.com/production/bridge_0a8171ba.swf","vpaid.springserve.com/posters/",!0,"0.2.95.11")}var i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(t("./ad_controller"));e.exports=r,n.getVPAIDAd=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./ad_controller":199}],206:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){return t.hasOwnProperty("to")&&t.to>0?t.to:c.NO_TIMEOUT}Object.defineProperty(n,"__esModule",{value:!0}),n.getTimeoutFromObj=i,n.getPixelUrlsByEvent=function(t,e){return t.hasOwnProperty("pixels")&&null!==t.pixels&&t.pixels.hasOwnProperty(e)?t.pixels[e]:null},n.parse=function(t){if(t.hasOwnProperty("passthru")&&!(0,o.default)(t.passthru))throw new Error(c.MANIFEST_PARSE_ERRORS.PASSTHRU,t.passthru);if(t.hasOwnProperty("urlparams")&&!(0,o.default)(t.urlparams))throw new Error(c.MANIFEST_PARSE_ERRORS.URLPARAMS,t.urlparams);if(t.hasOwnProperty("pixels")&&null!==t.pixels){if(!(0,o.default)(t.pixels))throw new Error(c.MANIFEST_PARSE_ERRORS.PIXELS_OBJECT,t.pixels);var e=t.pixels;for(var n in e)if(e.hasOwnProperty(n)){if(!c.MANIFEST_PIXEL_EVENTS.hasOwnProperty(n))throw new Error(c.MANIFEST_PARSE_ERRORS.PIXELS_INVALID_EVENT,n);if(!(0,s.default)(e[n]))throw new Error(c.MANIFEST_PARSE_ERRORS.PIXELS_ARRAY,e[n]);for(var r=e[n],h=0;h<r.length;h++)if(!(0,_.default)(r[h]))throw new Error(c.MANIFEST_PARSE_ERRORS.PIXELS_URL,r[h])}}if(t.hasOwnProperty("td")&&!(0,u.default)(t.td))throw new Error(c.MANIFEST_PARSE_ERRORS.TD,t.td);if(t.hasOwnProperty("ts")&&!(0,u.default)(t.ts))throw new Error(c.MANIFEST_PARSE_ERRORS.TS,t.ts);if(!t.hasOwnProperty("uuid")||!(0,_.default)(t.uuid))throw new Error(c.MANIFEST_PARSE_ERRORS.UUID,t.uuid);if(!t.hasOwnProperty("ssid")||!(0,_.default)(t.ssid))throw new Error(c.MANIFEST_PARSE_ERRORS.SSID,t.ssid);if(!t.hasOwnProperty("secure")||!(0,u.default)(t.secure))throw new Error(c.MANIFEST_PARSE_ERRORS.SECURE,t.secure);if(!t.hasOwnProperty("aid")||!(0,l.default)(t.aid))throw new Error(c.MANIFEST_PARSE_ERRORS.AID,t.aid);if(!t.hasOwnProperty("country")||!(0,_.default)(t.country))throw new Error(c.MANIFEST_PARSE_ERRORS.COUNTRY,t.country);if(t.hasOwnProperty("pimps")){if(!(0,o.default)(t.pimps))throw new Error(c.MANIFEST_PARSE_ERRORS.PIMPS,t.pimps);if(t.pimps.hasOwnProperty("w_pv")&&!(0,_.default)(t.pimps.w_pv))throw new Error(c.MANIFEST_PARSE_ERRORS.SSC_PV,t.pimps.w_pv);if(t.pimps.hasOwnProperty("w_to")&&!(0,l.default)(t.pimps.w_to))throw new Error(c.MANIFEST_PARSE_ERRORS.SSC_TO,t.pimps.w_to)}var f=(0,a.default)({timeout:i(t),numWaterfalls:t.dx.length,dx:[]},t,{pixels:null,ef:!1,td:!1,ts:!1,urlparams:null,passthru:null,pimps:{}});f.enableFlashIframe=!0;for(var p=0;p<t.dx.length;p++){var E=t.dx[p];f.dx.push([]);for(var v=0;v<E.length;v++){var A=E[v];if(!A.hasOwnProperty("a_cc")||!(0,_.default)(A.a_cc))throw new Error(c.MANIFEST_PARSE_ERRORS.WATERFALL_A_CC,A.a_cc);var y=new d.default(A.a_cc);if(A.hasOwnProperty("td")&&!(0,u.default)(A.td))throw new Error(c.MANIFEST_PARSE_ERRORS.WATERFALL_TD,A.td);if(A.hasOwnProperty("ts")&&!(0,u.default)(A.ts))throw new Error(c.MANIFEST_PARSE_ERRORS.WATERFALL_TS,A.ts);if(A.hasOwnProperty("pixels")&&null!==A.pixels){if(!(0,o.default)(A.pixels))throw new Error(c.MANIFEST_PARSE_ERRORS.WATERFALL_PIXELS_OBJECT,A.pixels);var R=A.pixels;for(var S in R)if(R.hasOwnProperty(S)){if(!c.VPAID_EVENTS.hasOwnProperty(S))throw new Error(c.MANIFEST_PARSE_ERRORS.WATERFALL_PIXELS_VPAID_EVENT,S);if(!(0,s.default)(R[S]))throw new Error(c.MANIFEST_PARSE_ERRORS.WATERFALL_PIXELS_ARRAY,R[S]);for(var O=R[S],g=0;g<O.length;g++)if(!(0,_.default)(O[g]))throw new Error(c.MANIFEST_PARSE_ERRORS.WATERFALL_PIXELS_URL,O[g])}}f.dx[p].push((0,a.default)({waterfallIdx:p,broadcastIdx:v,timeout:i(A),callChain:y},A,{td:!1,ts:!1,pixels:null}))}}return f};var a=r(t("lodash/defaults")),o=r(t("lodash/isObject")),s=r(t("lodash/isArray")),u=r(t("lodash/isBoolean")),_=r(t("lodash/isString")),l=r(t("lodash/isInteger")),c=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(t("./constants")),d=r(t("./call_chain"))},{"./call_chain":218,"./constants":223,"lodash/defaults":139,"lodash/isArray":151,"lodash/isBoolean":153,"lodash/isInteger":157,"lodash/isObject":162,"lodash/isString":165}],207:[function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0}),n.getPixelParams=function(t,e,n,r,i,l,c,d,h,f,p,E,v){var A={};A[u.VID_IO_PARAMS.event]=h;for(var y in p)p.hasOwnProperty(y)&&(A[y]=p[y]);if((0,s.default)(f)?void 0===v||(0,s.default)(v)||""===v||(A[u.VID_IO_PARAMS.auctionCallChain]=v):(A[u.VID_IO_PARAMS.auctionCallChain]=f.a_cc,A[u.VID_IO_PARAMS.dtidx]=f.waterfallIdx+1),A[u.VID_IO_PARAMS.timestamp]=(0,a.default)(),((0,o.default)(E)||!(0,s.default)(l)&&(0,o.default)(l.supplyTagId))&&(A[u.VID_IO_PARAMS.id]=(0,o.default)(E)?E:l.supplyTagId),!(0,s.default)(l)&&((0,o.default)(E)||(A[u.VID_IO_PARAMS.aid]=l.aid),A[u.VID_IO_PARAMS.d]=l.domain,A[u.VID_IO_PARAMS.w]=l.width,A[u.VID_IO_PARAMS.h]=l.height,A[u.VID_IO_PARAMS.cc]=l.country,A[u.VID_IO_PARAMS.v]=l.v,A[u.VID_IO_PARAMS.uuid]=l.uuid,A[u.VID_IO_PARAMS.dtnum]=l.numWaterfalls,l.hasOwnProperty("passthru")))for(var R in l.passthru)l.passthru.hasOwnProperty(R)&&(A[R]=l.passthru[R]);!(0,s.default)(f)&&f.hasOwnProperty("ol")&&f.ol>0?A[u.VID_IO_PARAMS.ol]=f.ol:!(0,s.default)(l)&&l.ol>0&&(A[u.VID_IO_PARAMS.ol]=l.ol),!(0,s.default)(l)&&l.ov>0&&(A[u.VID_IO_PARAMS.ov]=l.ov),A[u.VID_IO_PARAMS.domain_match]=r.domain_match,A[u.VID_IO_PARAMS.domain_match_source]=r.domain_match_source,(0,s.default)(i)||((0,s.default)(i.clientWidth)||(0,s.default)(i.clientHeight)?(A[u.VID_IO_PARAMS.detected_size_width]=c,A[u.VID_IO_PARAMS.detected_size_height]=d,A[u.VID_IO_PARAMS.detected_size_match_source]="vpaid"):(A[u.VID_IO_PARAMS.detected_size_width]=i.clientWidth,A[u.VID_IO_PARAMS.detected_size_height]=i.clientHeight,A[u.VID_IO_PARAMS.detected_size_match_source]="client"));var S=_.detector();return null!==S&&(A[u.VID_IO_PARAMS.inView]=S.isInView),A},n.getDemandType=function(t){var e=null!==t.jsVpaidUrl,n=t.media.length>0,r=null!==t.flashVpaidUrl,i=t.xFlvMedia.length>0;return e&&r?u.DEMAND_TYPES.BOTH:e?u.DEMAND_TYPES.JS_VPAID:r?u.DEMAND_TYPES.FLASH_VPAID:n||i?u.DEMAND_TYPES.VIDEO:u.DEMAND_TYPES.UNKNOWN},n.getCreativeTypeToDemandType=function(t){return t===u.CREATIVE_TYPES.MEDIA||t===u.CREATIVE_TYPES.XFLV?u.DEMAND_TYPES.VIDEO:t===u.CREATIVE_TYPES.FLASH_VPAID?u.DEMAND_TYPES.FLASH_VPAID:t===u.CREATIVE_TYPES.JS_VPAID?u.DEMAND_TYPES.JS_VPAID:u.DEMAND_TYPES.UNKNOWN};i(t("lodash/map"));var a=i(t("lodash/now")),o=i(t("lodash/isInteger")),s=i(t("lodash/isNull")),u=r(t("./constants")),_=(r(t("./utils")),r(t("./viewability_detection")))},{"./constants":223,"./utils":233,"./viewability_detection":236,"lodash/isInteger":157,"lodash/isNull":160,"lodash/map":172,"lodash/now":176}],208:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,n,r)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(r)},s=i(t("./constants")),u=(i(t("./utils")),r(t("./ad_demand_request"))),_=r(t("./broadcast_queue")),l=r(t("./ad_state")),c=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"AdProcessor",t,n));return r.broadcastQueues=[],r.currentWaterfallIndex_=-1,r.currentAdContainer_=-1,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,l.default),a(e,[{key:"initAd",value:function(t,n,r,i,a,s){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initAd",this).call(this,t,n,r,i,a,s);for(var u=0;u<this._cabinet.manifest.dx.length;u++){var l=new _.default(this._cabinet,this._cabinet.manifest.dx[u],this.initParams_,u);this.broadcastQueues.push(l)}}},{key:"maybeStopDemandRequest",value:function(){if(this.ad_){this.unregisterVpaidEventListeners_(this.ad_),this.unregisterLogEventListeners_(this.ad_),this.unregisterSSEventListeners_(this.ad_);try{this.ad_.stopAd()}catch(t){}}}},{key:"nextBroadcast",value:function(){if(!this.isAdDead_){if(this.maybeStopDemandRequest(),this.currentWaterfallIndex_>-1){var t=this.getBroadcastQueue();t.maybeClearRequestTimeout(),this.unregisterLogEventListeners_(t),this.unregisterSSEventListeners_(t)}if(this.currentWaterfallIndex_+1>=this.broadcastQueues.length)this.supplyError(s.VD_ERROR_CODES.NO_FILL,!1),this.callEvent_(s.VPAID_EVENTS.AdError,s.VD_ERROR_CODES.NO_FILL);else{this.currentWaterfallIndex_++;var e=this.getBroadcastQueue();this.registerSSEventListeners_(e),this.registerLogEventListeners_(e),e.load()}}}},{key:"getBroadcastQueue",value:function(){return this.broadcastQueues[this.currentWaterfallIndex_]}},{key:"on_js_demand_error",value:function(t,n,r){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"on_js_demand_error",this).call(this,t,n,r),this.getBroadcastQueue().getAdContainer(this.currentAdContainer_).vpaidFailed(),this.getBroadcastQueue().nextVpaid()}},{key:"onBroadcastVastReady",value:function(t){if(o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onBroadcastVastReady",this).call(this,t),!this.isAdDead_){this.maybeStopDemandRequest();var n=this.getBroadcastQueue().getAdContainer(t);n.vpaidStart(),this.currentAdContainer_=t,this.ad_=new u.default(this._cabinet,this.initParams_,n.demandTag_,n.vast_),this.registerVpaidEventListeners_(this.ad_),this.registerSSEventListeners_(this.ad_),this.registerLogEventListeners_(this.ad_),this.ad_.load()}}},{key:"onAdImpression",value:function(){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdImpression",this).call(this),this.getBroadcastQueue().finishBroadcast()}},{key:"onBroadcastDone",value:function(){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onBroadcastDone",this).call(this),this.isAdDead_||this.nextBroadcast()}},{key:"supplyError",value:function(t,e){this.callSSEvent_(s.VID_IO_EVENTS.js_supply_error,null,{on_page_time:this._cabinet.timeoutManager.timeOnPage,reason:t,timeout:e},null)}},{key:"stopAd",value:function(){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"stopAd",this).call(this),this.isAdImpression_||this.supplyError(s.VD_ERROR_CODES.STOP_AD_CALLED,!0)}},{key:"skipAd",value:function(){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"skipAd",this).call(this),this.isAdImpression_||this.supplyError(s.VD_ERROR_CODES.SKIP_AD_CALLED,!0)}},{key:"onAdLoaded",value:function(){this.isStartAd_&&this.ad_&&!this.ad_.isStartAd_&&this.ad_.startAd(),o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdLoaded",this).call(this)}},{key:"onAdSkipped",value:function(){this.isAdImpression_&&o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdSkipped",this).call(this)}},{key:"onAdStopped",value:function(){this.isAdImpression_&&o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdStopped",this).call(this)}},{key:"onAdError",value:function(t){this.isAdImpression_&&o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdError",this).call(this,t||s.VD_ERROR_CODES.PLAY_ERROR)}}]),e}();n.default=c},{"./ad_demand_request":200,"./ad_state":209,"./broadcast_queue":216,"./constants":223,"./utils":233}],209:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,n,r)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(r)},a=(function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);e.default=t}(t("./utils")),function(t){return t&&t.__esModule?t:{default:t}}(t("./ad_vd"))),o=function(t){function e(t,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"AdState("+t+")"));return i._cabinet=n,i.initParams_=r,i.isAdLoaded_=!1,i.isStartAd_=!1,i.isAdStarted_=!1,i.isAdVideoStart_=!1,i.isAdImpression_=!1,i.isDeadAd_=!1,i.isAdDead_=!1,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),r(e,[{key:"startAd",value:function(){this.isStartAd_=!0,i(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"startAd",this).call(this)}},{key:"stopAd",value:function(){this.isDeadAd_=!0,i(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"stopAd",this).call(this)}},{key:"skipAd",value:function(){this.isDeadAd_=!0,i(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"skipAd",this).call(this)}},{key:"onAdLoaded",value:function(){this.isAdLoaded_=!0,i(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdLoaded",this).call(this)}},{key:"onAdStarted",value:function(){this.isAdStarted_=!0,i(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdStarted",this).call(this)}},{key:"onAdVideoStart",value:function(){this.isAdVideoStart_=!0,i(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdVideoStart",this).call(this)}},{key:"onAdImpression",value:function(){this.isAdImpression_=!0,i(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdImpression",this).call(this)}},{key:"onAdStopped",value:function(){this.isAdDead_=!0,i(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdStopped",this).call(this)}},{key:"onAdSkipped",value:function(){this.isAdDead_=!0,i(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdSkipped",this).call(this)}},{key:"onAdError",value:function(t){this.isAdDead_=!0,i(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdError",this).call(this,t)}}]),e}();n.default=o},{"./ad_vd":213,"./utils":233}],210:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=r(t("lodash/mapValues")),o=r(t("lodash/map")),s=r(t("lodash/min")),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(t("./constants")),_=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.now_=e,this.start_=this.now_(),this.supplyTagTimeout_=null,this.manifest_=null,this.response_starts_={},this.dtoTime_=null}return i(t,[{key:"setManifest",value:function(t){this.manifest_=t,this.supplyTagTimeout_=this.manifest_.timeout,this.manifest_.dto&&(this.dtoTime_=(0,a.default)(this.manifest_.dto,function(){return 0}))}},{key:"startResponse",value:function(t){if(t>0&&null!==this.dtoTime_)for(var e=this.getResponseTime(t-1),n=this.getDtoKeys(t-1),r=0;r<n.length;r++){var i=n[r];this.dtoTime_[i]+=e}this.response_starts_[t]=this.now_()}},{key:"getRequestTime",value:function(t){return this.getResponseStart(t)-this.start_}},{key:"getResponseTime",value:function(t){return this.now_()-this.getResponseStart(t)}},{key:"getTimeoutInfo",value:function(t,e){var n=[];if(n.push({timeout:this.supplyTagRemaining,reason:u.VD_ERROR_CODES.SUPPLY_TAG_TIMEOUT},{timeout:this.getBroadcastRemaining(t),reason:u.VD_ERROR_CODES.DEMAND_PARTNER_TIMEOUT}),null!==this.dtoTime_)for(var r=this.getDtoKeys(t),i=0;i<r.length;i++){var a=r[i];n.push({timeout:this.manifest_.dto[a]-this.dtoTime_[a],reason:u.VD_ERROR_CODES.DTO_TIMEOUT})}return null!==e&&(n=n.concat(e)),function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n];(null===e||r.timeout<e.timeout)&&(e=r)}return e}(n)}},{key:"getResponseStart",value:function(t){return this.response_starts_[t]}},{key:"getDemandTags",value:function(t){return this.manifest_.dx[t]}},{key:"getBroadcastRemaining",value:function(t){var e=this.getDemandTags(t);return(0,s.default)((0,o.default)(e,"timeout"))-this.getResponseTime(t)}},{key:"getDtoKeys",value:function(t){if(t>=0&&t<this.manifest_.dx.length){for(var e={},n=this.getDemandTags(t),r=0;r<n.length;r++)for(var i=n[r].callChain.callChainLinks,a=0;a<i.length;a++){var o=i[a].demandTagId;0!==o&&(e[o]=!0)}var s=[];for(var u in this.dtoTime_)this.dtoTime_.hasOwnProperty(u)&&e.hasOwnProperty(u)&&s.push(u);return s}return[]}},{key:"supplyTagRemaining",get:function(){return this.supplyTagTimeout_-this.timeOnPage}},{key:"timeOnPage",get:function(){return this.now_()-this.start_}}]),t}();n.default=_},{"./constants":223,"lodash/map":172,"lodash/mapValues":173,"lodash/min":175}],211:[function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e){var n={errorPixels:t.errorPixels.concat(e.errorPixels),impressionPixels:t.impressionPixels.concat(e.impressionPixels),clickTracking:t.clickTracking.concat(e.clickTracking),trackingEvents:{}};return(0,l.default)(t.trackingEvents,function(t,r){n.trackingEvents[r]=[].concat(t,e.trackingEvents[r])}),n}function o(t,e,n){if(n.indexOf("{{")<0)return n;var r=n;null!==t&&(r=(r=(r=(r=r.replace(d.TRUST_BUT_VERIFY_MACROS.DETECTED_DOMAIN,t.domain_match)).replace(d.TRUST_BUT_VERIFY_MACROS.DETECTED_URL,t.url)).replace(d.TRUST_BUT_VERIFY_MACROS.DETECTED_ENCODED_URL,encodeURI(t.url))).replace(d.TRUST_BUT_VERIFY_MACROS.DETECTED_DOUBLE_ENCODED_URL,encodeURI(encodeURI(t.url)))),null!==e&&(r=(r=(r=(r=r.replace(d.TRUST_BUT_VERIFY_MACROS.DETECTED_HEIGHT,e.detectedHeight)).replace(d.TRUST_BUT_VERIFY_MACROS.DETECTED_WIDTH,e.detectedWidth)).replace(d.DEMAND_PARTNER_MACROS.D_HEIGHT,e.detectedHeight)).replace(d.DEMAND_PARTNER_MACROS.D_WIDTH,e.detectedWidth));var i=f.detector(),a=-1;return null!==i&&(a=i.isInView),r=r.replace(d.TRUST_BUT_VERIFY_MACROS.DETECTED_IN_VIEW,a),r=r.replace(d.TRUST_BUT_VERIFY_MACROS.DETECTED_IS_VISIBLE,a)}Object.defineProperty(n,"__esModule",{value:!0}),n.AdVast=void 0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();n.extendPixels=a,n.replaceDetectedMacros=o;var u=i(t("../lib/swfobjectdoc")),_=i(t("lodash/extend")),l=i(t("lodash/mapValues")),c=r(t("./utils")),d=r(t("./constants")),h=r(t("./ad_pixel")),f=r(t("./viewability_detection")),p=i(t("./ad_vast_parser")),E=i(t("../../../flash_config.json"));n.AdVast=function(){function t(e,n,r,i,a,o,s,u){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._cabinet=e,this.pixelNotifierFn=function(t,e,r){n(t,e,r)},this.demandTag=r,this.successCb=function(t){i(t)},this.failureCb=function(){a()},this.environmentVars=o,this.logNotifierFn=s,this.stateInfo=u,this.wrapperCount=0,this.vastPixels=d.getDefaultVastPixels()}return s(t,[{key:"getXhr",value:function(t,e,n){var r=c.getRequestMethod(e,n);{if(r){var i=r.xhr;i.responseType="document";try{"function"==typeof i.overrideMimeType&&i.overrideMimeType("text/xml")}catch(t){}return i.timeout=t.timeout,i.ontimeout=function(){this.demandResponseFail(!0,t.reason)}.bind(this),i.onerror=function(){r.withCredentials?this.requestVast(e,!1):this.demandResponseFail(!1,d.VD_ERROR_CODES.XHR_ERROR)}.bind(this),i}this.demandResponseFail(!1,d.VD_ERROR_CODES.NO_XHR)}}},{key:"replacePageProtocol",value:function(t){return c.promoteProtocol(t,this._cabinet.pageProtocol)}},{key:"requestVast",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=this.getTimeoutInfo();if(r.timeout<=0)this.demandResponseFail(!0,r.reason);else{var i=this.replacePageProtocol(o(this._cabinet.locationInfo,this.stateInfo,null===t?this.demandTag.url:t)),a=this.getXhr(r,i,e);a.onload=function(){try{if(200!==a.status)return void(e?this.requestVast(i,!1,n):this.demandResponseFail(!1,d.VD_ERROR_CODES.BAD_XHR_STATUS+"_"+a.status));var t=null;if(null!==a.responseXML)t=a.responseXML;else if("function"!=typeof a.overrideMimeType&&a.responseText)try{t=(new DOMParser).parseFromString(a.responseText,"application/xml")}catch(t){return void this.demandResponseFail(!1,d.VD_ERROR_CODES.DOM_PARSER_PARSE_FAILURE)}if(null===t)return void this.demandResponseFail(!1,d.VD_ERROR_CODES.RESPONSE_XML_NULL);this.processVast(t,i,n)}catch(t){this.demandResponseFail(!1,d.VD_ERROR_CODES.VAST_ONLOAD_EXCEPTION+"_"+t.message)}}.bind(this),a.send()}}},{key:"failOrSucceedPlayingMedia",value:function(t){try{var e=c.getDocumentAndWindow(this.environmentVars.slot),n={jsVpaid:null!==t.jsVpaidUrl,media:t.media.length>0,playableMedia:t.hasPlayableMedia,flashVpaid:null!==t.flashVpaidUrl,xFlvMedia:t.xFlvMedia.length>0,canPlayFlash:new u.default(e.document,e.window).hasFlashPlayerVersion(E.default.TARGET_PLAYER),flashEnabled:this._cabinet.manifest.ef};if(n.jsVpaid||n.media||n.flashVpaid||n.xFlvMedia)if(n.jsVpaid||n.playableMedia||n.flashEnabled&&n.canPlayFlash&&(n.flashVpaid||n.xFlvMedia)){var r=null!==t.ortb_detail?t.ortb_detail:{};this.pixelNotifierFn(d.VID_IO_EVENTS.cm_js_demand_req_resp,this.demandTag,(0,_.default)({cc_i:this.demandTag.callChain.getCallChainIndices(this._cabinet.historyManager.demand_events.response,!0).join(","),response_time:this._cabinet.timeoutManager.getResponseTime(this.demandTag.waterfallIdx),wrapper_count:this.wrapperCount,has_ad:!0,timeout:!1,dtype:h.getDemandType(t)},r)),this.successCb(t)}else{var i=n.media&&n.playableMedia,a=[];n.flashEnabled?!n.canPlayFlash&&(n.flashVpaid||n.xFlvMedia)&&a.push(d.VD_ERROR_CODES.FLASH_NOT_SUPPORTED):a.push(d.VD_ERROR_CODES.FLASH_DISABLED),i&&a.push(d.VD_ERROR_CODES.UNSUPPORTED_MEDIA),this.demandResponseFail(!1,a.join("_"),n)}else this.demandResponseFail(!1,d.VD_ERROR_CODES.EMPTY_VAST)}catch(t){this.demandResponseFail(!1,d.VD_ERROR_CODES.JS_DEMAND_RESPONSE_EXCEPTION+"_"+t.message)}}},{key:"playMedia",value:function(t){if(t.hasPlayableMedia=!1,t.media.length>0){try{this.environmentVars.videoSlot||this._cabinet.videoElementManager.videoSlot||this._cabinet.videoElementManager.createVideoSlot()}catch(t){return void this.demandResponseFail(!1,d.VD_ERROR_CODES.CREATE_VIDEO_ELEMENT_EXCEPTION+"_"+t.message)}try{for(var e=0;e<t.media.length;e++){var n=t.media[e];if(c.canPlayVideo(this.environmentVars.videoSlot||this._cabinet.videoElementManager.videoSlot,n.mimetype)){t.hasPlayableMedia=!0;break}}}catch(t){return void this.demandResponseFail(!1,d.VD_ERROR_CODES.CAN_PLAY_VIDEO_EXCEPTION+"_"+t.message)}}this.failOrSucceedPlayingMedia(t)}},{key:"processVast",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=void 0;try{r=new p.default(this._cabinet.endpoint,e,t).findVideoAd()}catch(t){return void this.demandResponseFail(!1,d.VD_ERROR_CODES.FIND_VIDEO_AD_EXCEPTION+"_"+t.message)}var i=void 0;try{i=(0,_.default)({},r,a(this.vastPixels,r)),null!==n?i.hbDetails=n:this.vastPixels.hasOwnProperty("hbDetails")&&(i.hbDetails=this.vastPixels.hbDetails),this.vastPixels.hasOwnProperty("ortb_detail")&&(i.ortb_detail=this.vastPixels.ortb_detail),this.vastPixels=i}catch(t){return void this.demandResponseFail(!1,d.VD_ERROR_CODES.EXTEND_VAST_EXCEPTION+"_"+t.message)}null!==i.wrapperUrl?this.wrapperCb(i.wrapperUrl):this.playMedia(i)}},{key:"getTimeoutInfo",value:function(){return this._cabinet.timeoutManager.getTimeoutInfo(this.demandTag.waterfallIdx,[{reason:d.VD_ERROR_CODES.WRAPPER_CHAIN_NO_TIME,timeout:this._cabinet.timeouts.WRAPPER_CHAIN_TIMEOUT-this._cabinet.timeoutManager.getResponseTime(this.demandTag.waterfallIdx)},{reason:d.VD_ERROR_CODES.VAST_TIMEOUT,timeout:this._cabinet.timeouts.VAST_TIMEOUT}])}},{key:"demandResponseFail",value:function(t,e){this.pixelNotifierFn(d.VID_IO_EVENTS.cm_js_demand_req_resp,this.demandTag,{cc_i:this.demandTag.callChain.getCallChainIndices(this._cabinet.historyManager.demand_events.response,!0).join(","),response_time:this._cabinet.timeoutManager.getResponseTime(this.demandTag.waterfallIdx),wrapper_count:this.wrapperCount,has_ad:!1,timeout:t,reason:e,dtype:d.DEMAND_TYPES.UNKNOWN}),this.failureCb()}},{key:"wrapperCb",value:function(t){this.wrapperCount++,this.wrapperCount>this._cabinet.timeouts.MAX_WRAPPERS?this.demandResponseFail(!1,d.VD_ERROR_CODES.TOO_MANY_WRAPPERS):this.requestVast(t,!0)}}]),t}()},{"../../../flash_config.json":1,"../lib/swfobjectdoc":190,"./ad_pixel":207,"./ad_vast_parser":212,"./constants":223,"./utils":233,"./viewability_detection":236,"lodash/extend":141,"lodash/mapValues":173}],212:[function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=i(t("lodash/defaults")),s=i(t("lodash/forEach")),u=r(t("./constants")),_=r(t("./utils")),l=r(t("./vast_parser_utils")),c=i(t("url")),d=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.endpoint_=e,this.baseUrl_=n,this.vastTag_=r}return a(t,[{key:"findVideoAd",value:function(){var t=(0,o.default)(u.getDefaultVast(),u.getDefaultVastPixels()),e=this.vastTag_.getElementsByTagName("Ad"),n=0===e.length?null:e[0];if(n){try{t.impressionPixels=this.getUnorderedUrls("Impression",n)}catch(t){throw new Error(u.VD_ERROR_CODES.VAST_IMPRESSION_PIXELS_ERROR+"_"+t.message)}try{t.errorPixels=this.getUnorderedUrls("Error",n)}catch(t){throw new Error(u.VD_ERROR_CODES.VAST_ERROR_PIXELS_ERROR+"_"+t.message)}}if(_.isBc(this.endpoint_,this.baseUrl_)){var r=null;try{r=this.vastTag_.getElementsByTagName("Extension")}catch(t){throw new Error(u.VD_ERROR_CODES.VAST_ERROR_EXTENSIONS+"_"+t.message)}try{for(var i=0;i<r.length;i++){var a=r[i];a.getAttribute("type")===u.ORTB_DETAIL&&(t.ortb_detail={bf:_.getORtbElement(a,"bf",parseFloat),bp:_.getORtbElement(a,"bp",parseFloat),scode:_.getORtbElement(a,"scode",parseInt),bid_result:_.getORtbElement(a,"bid_result",parseInt),seat_id:_.getORtbElement(a,"seat_id",function(t){return t})})}}catch(t){throw new Error(u.VD_ERROR_CODES.VAST_ERROR_ORTB_DETAIL+"_"+t.message)}}var s=void 0,c=void 0;try{s=l.getFirstElement("Wrapper",this.vastTag_),c=l.getFirstElement("Linear",this.vastTag_)}catch(t){throw new Error(u.VD_ERROR_CODES.VAST_GET_LINEAR_WRAPPER_XML_ERROR+"_"+t.message)}if(null!==s)try{var d=l.getFirstElement("VASTAdTagURI",s);t.wrapperUrl=null!==d?this.getUrl(d.textContent):null,t.impressionPixels=this.getUnorderedUrls("Impression",s),t.errorPixels=this.getUnorderedUrls("Error",s);var h=l.getFirstElement("Linear",s);null!==h&&this.setTrackingEvents(t,h),t.clickTracking=this.getUnorderedUrls("ClickTracking",s)}catch(t){throw new Error(u.VD_ERROR_CODES.VAST_IS_WRAPPER_XML_ERROR+"_"+t.message)}else if(null!==c)try{t.linear=!0;for(var f=c.getElementsByTagName("MediaFile"),p=0;p<f.length;p++){var E=f[p];if(E.hasAttribute("type")){var v=E.getAttribute("type");"video/x-flv"===v?t.xFlvMedia.push(this.getMedia(E)):"application/javascript"===v?t.jsVpaidUrl=this.getUrl(E.textContent):"application/x-shockwave-flash"===v?t.flashVpaidUrl=this.getUrl(E.textContent):0===v.indexOf("video")&&t.media.push(this.getMedia(E))}}var A=l.getFirstElement("AdParameters",c);null!==A&&(t.adParameters=A.textContent);var y=l.getTextFromTagName("Duration",c);if(null!==y){var R=l.parseDuration(y);null!==R&&(t.duration=R)}var S=c.getAttribute("skipOffset");if(null!==S){var O=l.getSkipOffset(S.textContent,t.duration);t.skipOffset=null===O?O:u.VPAID_CONSTANTS.NOT_IMPLEMENTED}this.setTrackingEvents(t,c),t.clickTracking=this.getUnorderedUrls("ClickTracking",c),t.clickThrough=this.getUrlFromTagName("ClickThrough",c)}catch(t){throw new Error(u.VD_ERROR_CODES.VAST_IS_LINEAR_XML_ERROR+"_"+t.message)}else try{t.noad=this.getUrlFromTagName("Error",this.vastTag_)}catch(t){throw new Error(u.VD_ERROR_CODES.VAST_NOAD_XML_ERROR+"_"+t.message)}return t}},{key:"getMedia",value:function(t){function e(t){return"true"===t}var n={mimetype:t.getAttribute("type"),url:this.getUrl(t.textContent)},r={delivery:function(t){return t},width:parseInt,height:parseInt,bitrate:parseInt,scalable:e,maintainAspectRatio:e};return(0,s.default)(r,function(e,r){t.hasAttribute(r)&&(n[r]=e(t.getAttribute(r)))}),n}},{key:"getUrlFromTagName",value:function(t,e){var n=l.getFirstElement(t,e);return null!==n?this.getUrl(n.textContent):null}},{key:"getUrl",value:function(t){var e=t.trim();return e?c.default.format(c.default.resolve(this.baseUrl_,e)):null}},{key:"setTrackingEvents",value:function(t,e){for(var n=e.getElementsByTagName("Tracking"),r=0;r<n.length;r++){var i=n[r],a=i.getAttribute("event");if(t.trackingEvents.hasOwnProperty(a)){var o=this.getUrl(i.textContent);o&&t.trackingEvents[a].push(o)}}}},{key:"getUnorderedUrls",value:function(t,e){for(var n=[],r=e.getElementsByTagName(t),i=0;i<r.length;i++){var a=this.getUrl(r[i].textContent);null!==a&&n.push(a)}return n}}]),t}();n.default=d},{"./constants":223,"./utils":233,"./vast_parser_utils":234,"lodash/defaults":139,"lodash/forEach":145,url:4}],213:[function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=r(t("./constants")),o=r(t("./utils")),s=function(t){return t&&t.__esModule?t:{default:t}}(t("./ad_vpaid")),u=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"AdVd("+t+")",o.identityWrapper));return n.ssEventListeners_={},o.forEachType(a.EVENT_TYPES,function(t,n,r){e.prototype["on"+n+r]=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];o.getArgs(arguments);this.callSSEvent_.apply(this,[r].concat(e))}}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default),i(e,[{key:"registerSSEventListeners_",value:function(t){var e=this;o.forEachType(a.EVENT_TYPES,function(n,r,i){var a="on"+r+i;t.subscribeSSEvent(e[a],i,e)})}},{key:"unregisterSSEventListeners_",value:function(t){o.forEachType(a.EVENT_TYPES,function(e,n,r){t.unsubscribeSSEvent(r)})}},{key:"callSSEvent_",value:function(t){var e=Array.prototype.slice.call(arguments,1);if(this.ssEventListeners_.hasOwnProperty(t))for(var n=0;n<this.ssEventListeners_[t].length;n++)this.ssEventListeners_[t][n].apply(this.ssEventListeners_[t][n],e)}},{key:"subscribeSSEvent",value:function(t,e,n){this.ssEventListeners_.hasOwnProperty(e)||(this.ssEventListeners_[e]=[]),this.ssEventListeners_[e].push(t.bind(n))}},{key:"unsubscribeSSEvent",value:function(t){this.ssEventListeners_.hasOwnProperty(t)&&(this.ssEventListeners_[t]=[])}}]),e}();n.default=u},{"./ad_vpaid":215,"./constants":223,"./utils":233}],214:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(t("./utils")),a=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._uuid=e,this._environmentVars=n,this._videoSlot=null}return r(t,[{key:"createVideoSlot",value:function(){this._videoSlot=i.getDocumentAndWindow(this._environmentVars.slot).document.createElement("video")}},{key:"videoSlot",get:function(){return this._videoSlot}}]),t}();n.default=a},{"./utils":233}],215:[function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=r(t("./constants")),o=r(t("./utils")),s=function(t){return t&&t.__esModule?t:{default:t}}(t("./ad_event_listener")),u=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"AdVpaid("+t+")"));r.wrapper_=n,r.ad_=null,r.initParams_=null,r.creativeData_=null,r.previousVolume_=a.DEFAULT_VOLUME,r.volume_=a.DEFAULT_VOLUME,r.handshakeVersion_=a.HANDSHAKE_VERSION_2_0;for(var i in a.VPAID_EVENTS)a.VPAID_EVENTS.hasOwnProperty(i)&&e.createEventListenerPrototype(i);for(var o in a.LOG_EVENTS)a.LOG_EVENTS.hasOwnProperty(o)&&e.createLogEventListenerPrototype(o);return r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default),i(e,null,[{key:"createEventListenerPrototype",value:function(t){e.prototype["on"+t]=function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];o.getArgs(arguments);this.callEvent_.apply(this,[t].concat(n))}}},{key:"createLogEventListenerPrototype",value:function(t){e.prototype["on"+t]=function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];o.getArgs(arguments);this.callLogEvent_.apply(this,[t].concat(n))}}}]),i(e,[{key:"handshakeVersion",value:function(t){try{if(t){var e=""+t;e.length>1&&2===parseInt(e[0])&&(this.handshakeVersion_=e)}}catch(t){}return this.handshakeVersion_}},{key:"initAd",value:function(t,e,n,r,i,a){this.initParams_={width:t,height:e,viewMode:n,desiredBitrate:r,environmentVars:a},this.creativeData_=i}},{key:"resizeAd",value:function(t,e,n){if(this.initParams_.width=t,this.initParams_.height=e,this.initParams_.viewMode=n,this.ad_)return this.wrapper_(this.ad_.resizeAd(t,e,n))}},{key:"startAd",value:function(){this.ad_&&this.wrapper_(this.ad_.startAd())}},{key:"stopAd",value:function(){if(this.ad_)return this.wrapper_(this.ad_.stopAd())}},{key:"pauseAd",value:function(){if(this.ad_)return this.wrapper_(this.ad_.pauseAd())}},{key:"resumeAd",value:function(){if(this.ad_)return this.wrapper_(this.ad_.resumeAd())}},{key:"expandAd",value:function(){if(this.ad_)return this.wrapper_(this.ad_.expandAd())}},{key:"collapseAd",value:function(){if(this.ad_)return this.wrapper_(this.ad_.collapseAd())}},{key:"skipAd",value:function(){if(this.ad_)return this.wrapper_(this.ad_.skipAd())}},{key:"getAdVolumeInternal",value:function(){return null!==this.ad_&&(this.volume_=this.wrapper_(this.ad_.getAdVolume())),this.volume_}},{key:"getAdVolume",value:function(){return this.getAdVolumeInternal()}},{key:"setAdVolumeInternal",value:function(t){this.previousVolume_=this.volume_,this.volume_=t,this.ad_&&this.wrapper_(this.ad_.setAdVolume(t))}},{key:"setAdVolume",value:function(t){this.setAdVolumeInternal(t)}},{key:"getAdExpanded",value:function(){return!this.ad_||this.wrapper_(this.ad_.getAdExpanded())}},{key:"getAdCompanions",value:function(){return this.ad_?this.wrapper_(this.ad_.getAdCompanions()):""}},{key:"getAdDuration",value:function(){return this.ad_?this.wrapper_(this.ad_.getAdDuration()):a.VPAID_CONSTANTS.UNKNOWN}},{key:"getAdHeight",value:function(){return this.ad_?this.wrapper_(this.ad_.getAdHeight()):a.VPAID_CONSTANTS.UNKNOWN}},{key:"getAdViewMode",value:function(){return this.ad_?this.wrapper_(this.ad_.getAdViewMode()):a.VPAID_CONSTANTS.UNKNOWN}},{key:"getAdIcons",value:function(){return!!this.ad_&&this.wrapper_(this.ad_.getAdIcons())}},{key:"getAdLinear",value:function(){return!this.ad_||this.wrapper_(this.ad_.getAdLinear())}},{key:"getAdRemainingTime",value:function(){return this.ad_?this.wrapper_(this.ad_.getAdRemainingTime()):a.VPAID_CONSTANTS.UNKNOWN}},{key:"getAdSkippableState",value:function(){return!!this.ad_&&this.wrapper_(this.ad_.getAdSkippableState())}},{key:"getAdWidth",value:function(){return this.ad_?this.wrapper_(this.ad_.getAdWidth()):a.VPAID_CONSTANTS.UNKNOWN}},{key:"registerVpaidEventListeners_",value:function(t){for(var e in a.VPAID_EVENTS)a.VPAID_EVENTS.hasOwnProperty(e)&&t.subscribe(this["on"+e],e,this)}},{key:"unregisterVpaidEventListeners_",value:function(t){for(var e in a.VPAID_EVENTS)a.VPAID_EVENTS.hasOwnProperty(e)&&t.unsubscribe(e)}},{key:"registerLogEventListeners_",value:function(t){for(var e in a.LOG_EVENTS)a.LOG_EVENTS.hasOwnProperty(e)&&t.subscribe(this["on"+e],e,this)}},{key:"unregisterLogEventListeners_",value:function(t){for(var e in a.LOG_EVENTS)a.LOG_EVENTS.hasOwnProperty(e)&&t.unsubscribeLogEvent(e,this["on"+e])}}]),e}();n.default=u},{"./ad_event_listener":201,"./constants":223,"./utils":233}],216:[function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=i(t("lodash/defaults")),s=i(t("lodash/forEach")),u=i(t("./ad_state")),_=i(t("./ad_containers/ad_container_factory")),l=r(t("./constants")),c=r(t("./utils")),d=i(t("../../../timeouts.json")),h=function(t){function e(t,n,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"BroadcastQueue",t,r));a._cabinet=t,a.waterfallIdx_=i,a.adContainers_=[];for(var s=new _.default,u=0;u<n.length;u++){var d=n[u],h=s.build(t,u,(0,o.default)({url:c.promoteProtocol(d.url,c.getProtocol(t.manifest.secure))},d),r);a.registerLogEventListeners_(h),a.registerSSEventListeners_(h),a.adContainers_.push(h),a.vastRequestTimer_=l.NO_TIMER}return a.broadcastState_=l.BROADCAST_STATES.INIT,a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,u.default),a(e,[{key:"load",value:function(){var t=this;this.broadcastState_=l.BROADCAST_STATES.REQUESTING,this.vastRequestTimer_=setTimeout(function(){t.callSSEvent_(l.BROADCAST_EVENTS.VastRequestTimerTimeout),t.nextVpaid(),t.vastRequestTimer_=l.NO_TIMER},d.default.BROADCAST_VAST_REQUEST_TIMEOUT);var e=this._cabinet.getStateInfo(this.initParams_);this._cabinet.timeoutManager.startResponse(this.waterfallIdx_),(0,s.default)(this.adContainers_,function(t){t.requestVast(e)})}},{key:"finishBroadcast",value:function(){this.maybeClearRequestTimeout()}},{key:"maybeClearRequestTimeout",value:function(){this.vastRequestTimer_!==l.NO_TIMER&&(clearTimeout(this.vastRequestTimer_),this.vastRequestTimer_=l.NO_TIMER)}},{key:"onSlotVastDone",value:function(t,e){this.nextVpaid()}},{key:"nextVpaid",value:function(){if(this.broadcastState_===l.BROADCAST_STATES.REQUESTING){for(var t=0;t<this.adContainers_.length;t++){var e=this.adContainers_[t].getAdSlotState();if([l.SLOT_STATES.REQUESTING_VPAID].indexOf(e)>-1)return;if(this.vastRequestTimer_!==l.NO_TIMER&&[l.SLOT_STATES.REQUESTING_VAST].indexOf(e)>-1)return;if(e===l.SLOT_STATES.VAST_READY)return void this.callSSEvent_(l.BROADCAST_EVENTS.VastReady,t)}this.broadcastState_=l.BROADCAST_STATES.DONE,this.callSSEvent_(l.BROADCAST_EVENTS.Done)}}},{key:"getAdContainer",value:function(t){return this.adContainers_[t]}}]),e}();n.default=h},{"../../../timeouts.json":238,"./ad_containers/ad_container_factory":193,"./ad_state":209,"./constants":223,"./utils":233,"lodash/defaults":139,"lodash/forEach":145}],217:[function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=i(t("lodash/now")),s=i(t("./ad_timeout_manager")),u=i(t("./ad_video_element_manager")),_=i(t("./ima_manager")),l=r(t("./utils")),c=r(t("./constants")),d=r(t("./ad_location")),h=r(t("./state_info")),f=function(){function t(e,n,r,i,a,o,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._endpoint=e,this._pixelUrl=n,this._flashBridgeUrl=r,this._posterUrl=i,this._forceSecure=a,this._version=o,this._timeouts=s,this._historyManager=l.getHistoryManager(),this._locationInfo=d.getLocation(),this._pageProtocol=l.getPageProtocol(),this._provisionalManifest=null,this._manifest=null,this._videoElementManager=null,this._imaManager=null,this._timeoutManager=null,this._jsBridgeManager=null}return a(t,[{key:"initialize",value:function(t){try{this._timeoutManager=new s.default(o.default),this._timeoutManager.setManifest(this.manifest)}catch(t){throw new Error({message:c.VD_ERROR_CODES.TIMEOUT_MANAGER_INIT_ERROR,error:t})}try{this._videoElementManager=new u.default(this.uuid,t)}catch(t){throw new Error({message:c.VD_ERROR_CODES.VIDEO_ELEMENT_MANAGER_INIT_ERROR,error:t})}try{this._imaManager=new _.default(this.uuid,this.pageProtocol,this.videoElementManager,t)}catch(t){throw new Error({message:c.VD_ERROR_CODES.JS_BRIDGE_MANAGER_CREATE_ERROR,error:t})}}},{key:"getStateInfo",value:function(t){return h.getStateInfo(t,this.manifest.width,this.manifest.height)}},{key:"isSizeMatch",value:function(t){return l.sizeMatch(this.manifest,t)}},{key:"endpoint",get:function(){return this._endpoint}},{key:"pixelUrl",get:function(){return this._pixelUrl}},{key:"flashBridgeUrl",get:function(){return this._flashBridgeUrl}},{key:"posterUrl",get:function(){return this._posterUrl}},{key:"forceSecure",get:function(){return this._forceSecure}},{key:"version",get:function(){return this._version}},{key:"historyManager",get:function(){return this._historyManager}},{key:"manifest",get:function(){return this._manifest},set:function(t){this._manifest=t}},{key:"pageProtocol",get:function(){return this._pageProtocol}},{key:"imaManager",get:function(){return this._imaManager}},{key:"timeoutManager",get:function(){return this._timeoutManager}},{key:"videoElementManager",get:function(){return this._videoElementManager}},{key:"locationInfo",get:function(){return this._locationInfo}},{key:"jsBridgeManager",get:function(){return this._jsBridgeManager},set:function(t){this._jsBridgeManager=t}},{key:"timeouts",get:function(){return this._timeouts}},{key:"uuid",get:function(){return this.manifest?this.manifest.uuid:null}},{key:"isDomainMatch",get:function(){return l.domainMatch(this.manifest,this.locationInfo)}}]),t}();n.default=f},{"./ad_location":204,"./ad_timeout_manager":210,"./ad_video_element_manager":214,"./constants":223,"./ima_manager":225,"./state_info":232,"./utils":233,"lodash/now":176}],218:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(t){return t&&t.__esModule?t:{default:t}}(t("./call_chain_link")),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(t("./constants")),o=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),/[^0-9a-z\-_.]/.test(e))throw new Error(a.CALL_CHAIN_ERRORS.INVALID_CALL_CHAIN);this._callChainLinks=[];for(var n=e.split(a.CALL_CHAIN_LINK_SEPARATOR),r=0;r<n.length;r++){var o=n[r].split(a.CALL_CHAIN_VARIABLE_SEPARATOR);if(o.length<2)throw new Error(a.CALL_CHAIN_ERRORS.NOT_A_VALID_CALL_CHAIN_LINK);for(var s=0,u=null,_=null,l=null,c=[],d=0;d<o.length;d++){if(2!==(u=o[d].split(a.CALL_CHAIN_VARIABLE_ID_SEPARATOR)).length)throw new Error(a.CALL_CHAIN_ERRORS.INVALID_CALL_CHAIN_LINK_GENERAL);if(_=u[0],l=parseInt(u[1]),isNaN(l)||0===l)throw new Error(a.CALL_CHAIN_ERRORS.INVALID_CALL_CHAIN_ID);if(/[^a-z]/.test(_)||_.length<1)throw new Error(a.CALL_CHAIN_ERRORS.INVALID_CALL_CHAIN_TAG);switch(_){case a.CALL_CHAIN_IDENTIFIERS.SUPPLY:s=l;break;default:c.push({id:l,tag:_})}}if(0===s)throw new Error(a.CALL_CHAIN_ERRORS.INVALID_CALL_CHAIN_LINK_NO_SUPPLY_TAG);this._callChainLinks.push(new i.default(s,c))}}return r(t,[{key:"toString",value:function(){return this.callChainLinkStrings.join(a.CALL_CHAIN_LINK_SEPARATOR)}},{key:"toVidIoString",value:function(){return this.vidIoCallChainLinkStrings.join(a.CALL_CHAIN_LINK_SEPARATOR)}},{key:"getCurrentCallChainBySupplyTag",value:function(t,e){for(var n=0;n<this._callChainLinks.length;n++)if(this._callChainLinks[n].supplyTagId===t){if(e)return this.callChainLinkStrings.slice(0,n+1).join(a.CALL_CHAIN_LINK_SEPARATOR);var r=this.callChainLinkStrings.slice(0,n).join(a.CALL_CHAIN_LINK_SEPARATOR);return r+(r.length>0?a.CALL_CHAIN_LINK_SEPARATOR:"")+a.CALL_CHAIN_IDENTIFIERS.SUPPLY+a.CALL_CHAIN_VARIABLE_ID_SEPARATOR+t}throw new Error(a.CALL_CHAIN_ERRORS.NO_SUPPLY_TAG_FOUND,t,e)}},{key:"getCallChainIndices",value:function(t,e){for(var n=[],r=this.callChainLinks,i=r.length,a=0;a<i;a++){var o=this.getCurrentCallChainBySupplyTag(r[a].supplyTagId,!0);(!t.hasOwnProperty(o)||e&&a===i-1)&&(t[o]=!0,n.push(a))}return n}},{key:"getSupplyTagHistory",value:function(t){for(var e=[],n=this.callChainLinks,r=0;r<n.length;r++){var i=this.getCurrentCallChainBySupplyTag(n[r].supplyTagId,!1);t.hasOwnProperty(i)||(t[i]=!0,e.push(r))}return e}},{key:"callChainLinks",get:function(){return this._callChainLinks}},{key:"callChainLinkStrings",get:function(){for(var t=[],e=0;e<this._callChainLinks.length;e++)t.push(this._callChainLinks[e].toString());return t}},{key:"vidIoCallChainLinkStrings",get:function(){for(var t=[],e=0;e<this._callChainLinks.length;e++)t.push(this._callChainLinks[e].toVidIoString());return t}}]),t}();n.default=o},{"./call_chain_link":219,"./constants":223}],219:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=r(t("lodash/map")),o=r(t("lodash/join")),s=r(t("lodash/find")),u=r(t("lodash/filter")),_=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(t("./constants")),l=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._supplyTagId=e,this._otherTags=n}return i(t,[{key:"getFirstOtherTagId",value:function(t){var e=(0,s.default)(this._otherTags,function(e){return e.tag===t});return e?e.id:0}},{key:"getString",value:function(t){var e=[{id:this.supplyTagId,tag:_.CALL_CHAIN_IDENTIFIERS.SUPPLY}].concat(t),n=(0,a.default)(e,function(t){return t.tag+_.CALL_CHAIN_VARIABLE_ID_SEPARATOR+t.id});return(0,o.default)(n,_.CALL_CHAIN_VARIABLE_SEPARATOR)}},{key:"toString",value:function(){return this.getString(this.otherTags)}},{key:"toMoatUsedString",value:function(){return this.getString(this.otherTags.concat({id:1,tag:_.CALL_CHAIN_IDENTIFIERS.MOAT_USED}))}},{key:"toVidIoString",value:function(){return this.getString((0,u.default)(this.otherTags,function(t){return!_.CALL_CHAIN_IDENTIFIER_BLACKLIST.hasOwnProperty(t.tag)}))}},{key:"supplyTagId",get:function(){return this._supplyTagId}},{key:"demandTagId",get:function(){return this.getFirstOtherTagId(_.CALL_CHAIN_IDENTIFIERS.DEMAND)}},{key:"otherTags",get:function(){return this._otherTags}}]),t}();n.default=l},{"./constants":223,"lodash/filter":142,"lodash/find":143,"lodash/join":168,"lodash/map":172}],220:[function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,n,r)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(r)},s=i(t("../../lib/swfobjectdoc")),u=i(t("../../../../flash_config.json")),_=r(t("../utils")),l=r(t("../constants")),c=i(t("../ad_vpaid")),d=!1;window.addEventListener("load",function(t){d=!0});var h=function(t){function e(t,n,r,i,a,o,c,h){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var f=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"AdJsBridge",function(t){if(t.success)return t.data;throw new Error(t.exception)}));f.uuid_=t,f.slot_=o;var p=_.getDocumentAndWindow(f.slot_);p.window.isReady=function(){return d=d||"complete"===p.document.readyState},p.window.forward=function(t,e){var n="on"+t;f[n]&&"function"==typeof f[n]&&(e&&e.hasOwnProperty("message")?f[n](e.message):f[n]())},p.window.setSWFIsReady=function(){h()};var E=p.document.createElement("div");E.id=l.FLASH_DIV_ID,E.style.width=i+"px",E.style.height=a+"px",_.cssreset(E),f.slot_.appendChild(E),f.objectDiv_=p.document.createElement("div"),f.objectDiv_.id=l.FLASH_OBJECT_ID,E.appendChild(f.objectDiv_);var v=new s.default(p.document,p.window);return v.switchOffAutoHideShow(),v.embedSWF(_.makeUrl(_.getProtocol(n),r,null),f.objectDiv_,"100%","100%",u.default.TARGET_PLAYER,!1,{uuid:t},{scale:"exactFit",allowscriptaccess:"always",allowfullscreen:"true",menu:"false",bgcolor:"#000000"},{bgcolor:"#000000",style:"left: 0; right: 0; top: 0; bottom: 0; display: block; position: absolute; margin:0; padding:0; border:0; outline:0; font-size:100%; vertical-align:baseline; background:transparent;"},function(t){if(t.success)try{f.ad_=p.document.getElementById(l.FLASH_OBJECT_ID)}catch(t){}c(t)}),f}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,c.default),a(e,[{key:"load",value:function(t){if(this.ad_){var e=0===t.xFlvMedia.length?null:t.xFlvMedia[0].url;this.ad_.load(t.flashVpaidUrl,e,t.duration)}}},{key:"handshakeVersion",value:function(t){if(o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"handshakeVersion",this).call(this,t),this.ad_)return this.ad_.handshakeVersion(this.handshakeVersion_)}},{key:"initAd",value:function(t,n,r,i,a,s){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initAd",this).call(this,t,n,r,i,a,s),this.changeDisplay(!0),this.ad_&&this.ad_.initAd(t,n,r,i,a.AdParameters,"")}},{key:"stopAd",value:function(){this.changeDisplay(!1),o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"stopAd",this).call(this)}},{key:"skipAd",value:function(){this.changeDisplay(!1),o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"skipAd",this).call(this)}},{key:"onAdStopped",value:function(){this.changeDisplay(!1),o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdStopped",this).call(this)}},{key:"onAdSkipped",value:function(){this.changeDisplay(!1),o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdSkipped",this).call(this)}},{key:"onAdError",value:function(t){this.changeDisplay(!1),o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdError",this).call(this,t)}},{key:"changeDisplay",value:function(t){var e=_.getDocumentAndWindow(this.slot_).document.getElementById(l.FLASH_OBJECT_ID);t?(this.callLogEvent_(l.LOG_EVENTS.BRIDGE_SHOW),e.style.visibility="visible"):(this.callLogEvent_(l.LOG_EVENTS.BRIDGE_HIDE),e.style.visibility="hidden")}}]),e}();n.default=h},{"../../../../flash_config.json":1,"../../lib/swfobjectdoc":190,"../ad_vpaid":215,"../constants":223,"../utils":233}],221:[function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,n,r)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(r)},s=i(t("lodash/map")),u=r(t("../constants")),_=r(t("../utils")),l=i(t("./vpaid_wrapper")),c=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"VpaidVideoWrapper",t));return r._vast=n,r._lastQuartileIndex=0,r._hasPlayedTimeout=0,r._expanded=!1,r._isPaused=!1,r._metaDataLoaded=!1,r._slotListeners={},r._videoSlotListeners={},r._clickCounter=0,r._isClicked=!1,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,l.default),a(e,[{key:"initAd",value:function(t,n,r,i,a,s){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initAd",this).call(this,t,n,r,i,a,s);try{this.volume_=this.initParams_.environmentVars.videoSlot.volume,this.callEvent_(u.VPAID_EVENTS.AdVolumeChange)}catch(t){return void this.callFinalEvent_(u.VPAID_EVENTS.AdError,u.VD_ERROR_CODES.GET_VOLUME_ERROR)}var l=!1;try{for(var c=0;c<this._vast.media.length;c++){var d=this._vast.media[c];if(_.canPlayVideo(this.initParams_.environmentVars.videoSlot,d.mimetype)){if(this.initParams_.environmentVars.videoSlot.setAttribute(u.VIDEO_ATTRIBUTES.src,d.url),this.initParams_.environmentVars.videoSlot.setAttribute(u.VIDEO_ATTRIBUTES.type,d.mimetype),this.initParams_.environmentVars.videoSlotCanAutoPlay,!1)try{this.initParams_.environmentVars.videoSlot.setAttribute(u.VIDEO_ATTRIBUTES_POSTER,d.poster)}catch(t){}l=!0;break}}}catch(t){return void this.callFinalEvent_(u.VPAID_EVENTS.AdError,u.VD_ERROR_CODES.FOUND_SOURCE_ERROR)}if(l){try{this.initParams_.environmentVars.videoSlot.readyState>this.initParams_.environmentVars.videoSlot.HAVE_METADATA?this._metaDataLoaded=!0:this.addVideoSlotEventListener_(u.VIDEO_EVENTS.loadedmetadata,this.loadedMetaDataHandler_.bind(this)),this.addVideoSlotEventListener_(u.VIDEO_EVENTS.timeupdate,this.timeUpdateHandler_.bind(this)),this.addVideoSlotEventListener_(u.VIDEO_EVENTS.ended,this.ended.bind(this))}catch(t){return void this.callFinalEvent_(u.VPAID_EVENTS.AdError,u.VD_ERROR_CODES.ADD_EVENT_LISTENERS_ERROR)}this.initParams_.environmentVars.videoSlotCanAutoPlay,1,this.callEvent_(u.VPAID_EVENTS.AdLoaded)}else this.callFinalEvent_(u.VPAID_EVENTS.AdError,u.VD_ERROR_CODES.NO_SOURCE)}},{key:"addSlotEventListener_",value:function(t,e){this._slotListeners[t]=e,this.initParams_.environmentVars.slot.addEventListener(t,e,!1)}},{key:"addVideoSlotEventListener_",value:function(t,e){this._videoSlotListeners[t]=e,this.initParams_.environmentVars.videoSlot.addEventListener(t,e,!1)}},{key:"callFinalEvent_",value:function(t){var n,r=this;(0,s.default)(this._videoSlotListeners,function(t,e){r.initParams_.environmentVars.videoSlot.removeEventListener(e,t)}),this._videoSlotListeners={},(0,s.default)(this._slotListeners,function(t,e){r.initParams_.environmentVars.slot.removeEventListener(e,t)}),this._slotListeners={};for(var i=arguments.length,a=Array(i>1?i-1:0),u=1;u<i;u++)a[u-1]=arguments[u];(n=o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"callEvent_",this)).call.apply(n,[this,t].concat(a))}},{key:"loadedMetaDataHandler_",value:function(){this._metaDataLoaded=!0}},{key:"timeUpdateHandler_",value:function(){if(!(this._lastQuartileIndex>=u.QUARTILE_EVENTS.length))for(var t=100*this.initParams_.environmentVars.videoSlot.currentTime/this.initParams_.environmentVars.videoSlot.duration;t>=u.QUARTILE_EVENTS[this._lastQuartileIndex].value&&(this.callEvent_(u.QUARTILE_EVENTS[this._lastQuartileIndex].event),this._lastQuartileIndex+=1,!(this._lastQuartileIndex>=u.QUARTILE_EVENTS.length)););}},{key:"startAd",value:function(){var t=this,e=function(){try{t.addVideoSlotEventListener_(u.VIDEO_EVENTS.click,function(t){this.adClicked()}.bind(t))}catch(e){return void t.callFinalEvent_(u.VPAID_EVENTS.AdError,u.VD_ERROR_CODES.ADD_CLICK_LISTENER)}t.initParams_.environmentVars.videoSlot.play(),t.isPlayingTimer_(),t.callEvent_(u.VPAID_EVENTS.AdStarted)};this.initParams_.environmentVars.videoSlotCanAutoPlay,e()}},{key:"isPlayingTimer_",value:function(){this.hasPlayed_()?(this.callEvent_(u.VPAID_EVENTS.AdImpression),this._hasPlayedTimeout>0&&clearTimeout(this._hasPlayedTimeout)):this._hasPlayedTimeout=setTimeout(this.isPlayingTimer_.bind(this),u.RETRY_MS)}},{key:"hasPlayed_",value:function(){return this.initParams_.environmentVars.videoSlot.currentTime>0}},{key:"getAdRemainingTime",value:function(){var t=this.getAdDuration();return null!==this.initParams_.environmentVars.videoSlot&&this.initParams_.environmentVars.videoSlot.hasOwnProperty("currentTime")&&null!==this.initParams_.environmentVars.videoSlot.currentTime&&this.initParams_.environmentVars.videoSlot.currentTime>=0?t-Math.max(this.initParams_.environmentVars.videoSlot.currentTime,t):u.VPAID_CONSTANTS.UNKNOWN}},{key:"getAdDuration",value:function(){return null!==this.initParams_.environmentVars.videoSlot&&this.initParams_.environmentVars.videoSlot.hasOwnProperty("duration")&&null!==this.initParams_.environmentVars.videoSlot.duration&&this.initParams_.environmentVars.videoSlot.duration>0?this.initParams_.environmentVars.videoSlot.duration:null!==this._vast.duration?this._vast.duration:u.VPAID_CONSTANTS.UNKNOWN}},{key:"getAdCompanions",value:function(){return this._vast.companions}},{key:"getAdIcons",value:function(){return this._vast.icons}},{key:"getAdLinear",value:function(){return this._vast.linear}},{key:"collapseAd",value:function(){this._expanded=!1}},{key:"expandAd",value:function(){this._expanded=!0,this.initParams_.environmentVars.videoSlot.requestFullscreen?this.initParams_.environmentVars.videoSlot.requestFullscreen():this.initParams_.environmentVars.videoSlot.msRequestFullscreen?this.initParams_.environmentVars.videoSlot.msRequestFullscreen():this.initParams_.environmentVars.videoSlot.mozRequestFullScreen?this.initParams_.environmentVars.videoSlot.mozRequestFullScreen():this.initParams_.environmentVars.videoSlot.webkitRequestFullscreen&&this.initParams_.environmentVars.videoSlot.webkitRequestFullscreen(),this.callEvent_(u.VPAID_EVENTS.AdExpandedChange)}},{key:"getAdExpanded",value:function(){return this._expanded}},{key:"getAdSkippableState",value:function(){return this._vast.skipOffset===u.VPAID_CONSTANTS.NOT_IMPLEMENTED||this.getAdRemainingTime()<this._vast.skipOffset}},{key:"skipAd",value:function(){this.getAdSkippableState()&&this.callEvent_(u.VPAID_EVENTS.AdSkipped)}},{key:"getAdVolume",value:function(){return null!==this.initParams_.environmentVars.videoSlot&&(this.volume_=this.initParams_.environmentVars.videoSlot.volume),this.volume_}},{key:"setAdVolume",value:function(t){null!==this.initParams_.environmentVars.videoSlot&&(this.initParams_.environmentVars.videoSlot.volume=t),t!==this.volume_&&(this.volume_=t,this.callEvent_(u.VPAID_EVENTS.AdVolumeChange))}},{key:"resumeAd",value:function(){this._isPaused=!1,this.initParams_.environmentVars.videoSlot.play(),this.callEvent_(u.VPAID_EVENTS.AdPlaying)}},{key:"pauseAd",value:function(){this._isPaused=!0,this.initParams_.environmentVars.videoSlot.pause(),this.callEvent_(u.VPAID_EVENTS.AdPaused)}},{key:"resizeAd",value:function(t,e,n){this._width===t&&this._height===e&&this._viewMode===n||(this._width=t,this._height=e,this._viewMode=n,this.callEvent_(u.VPAID_EVENTS.AdSizeChange))}},{key:"stopAd",value:function(){var t=this;this._hasPlayedTimeout>0&&clearTimeout(this._hasPlayedTimeout),setTimeout(function(){t.callFinalEvent_(u.VPAID_EVENTS.AdStopped)},u.STOP_AD_TIMEOUT)}},{key:"ended",value:function(t){this.callEvent_(u.VPAID_EVENTS.AdVideoComplete),this.stopAd()}},{key:"adClicked",value:function(){this._vast.clickThrough&&(!1===this._isPaused?(this.pauseAd(),this.callEvent_(u.VPAID_EVENTS.AdClickThru,this._vast.clickThrough,"adClickId-"+this._clickCounter++,!1),window.open(this._vast.clickThrough,"_blank")):this.resumeAd())}}]),e}();n.default=c},{"../constants":223,"../utils":233,"./vpaid_wrapper":222,"lodash/map":172}],222:[function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=r(t("../utils")),o=r(t("../constants")),s=function(t){return t&&t.__esModule?t:{default:t}}(t("../ad_vpaid")),u=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,a.identityWrapper));return r._cabinet=n,r._width=o.VPAID_CONSTANTS.UNKNOWN,r._height=o.VPAID_CONSTANTS.UNKNOWN,r._viewMode=o.VPAID_CONSTANTS.UNKNOWN,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default),i(e,[{key:"initAd",value:function(t,n,r,i,a,s){(function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,n,r)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(r)})(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initAd",this).call(this,t,n,r,i,a,s),this._width=t,this._height=n,this._viewMode=r;try{if(!this.initParams_.environmentVars.hasOwnProperty("videoSlot")||null===this.initParams_.environmentVars.videoSlot){if(null===this._cabinet.videoElementManager.videoSlot)return void this.callFinalEvent_(o.VPAID_EVENTS.AdError,o.VD_ERROR_CODES.CREATE_VIDEO_SLOT_LOGIC_ERROR);this.initParams_.environmentVars.videoSlot=this._cabinet.videoElementManager.videoSlot,this.initParams_.environmentVars.slot.appendChild(this.initParams_.environmentVars.videoSlot)}}catch(t){this.callFinalEvent_(o.VPAID_EVENTS.AdError,o.VD_ERROR_CODES.CREATE_VIDEO_SLOT_ERROR)}}},{key:"getAdWidth",value:function(){return this._width}},{key:"getAdHeight",value:function(){return this._height}},{key:"getAdViewMode",value:function(){return this._viewMode}}]),e}();n.default=u},{"../ad_vpaid":215,"../constants":223,"../utils":233}],223:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getDefaultVast=function(){return{wrapperUrl:null,duration:null,media:[],jsVpaidUrl:null,flashVpaidUrl:null,xFlvMedia:[],adParameters:"",clickThrough:null,noad:null,companions:"",icons:!1,linear:!1,skipOffset:a.NOT_IMPLEMENTED,ortb_detail:null,ima:!1}},n.getDefaultVastPixels=function(){return{errorPixels:[],impressionPixels:[],clickTracking:[],trackingEvents:{creativeView:[],start:[],firstQuartile:[],midpoint:[],thirdQuartile:[],complete:[],mute:[],unmute:[],pause:[],rewind:[],resume:[],fullscreen:[],exitFullscreen:[],expand:[],collapse:[],acceptInvitationLinear:[],acceptInvitation:[],closeLinear:[],skip:[],progress:[]}}};n.DEFAULT_DURATION=30,n.NO_TIMEOUT=1e9,n.NO_MAX_WRAPPERS=100,n.HANDSHAKE_VERSION_1_0="1.0",n.HANDSHAKE_VERSION_2_0="2.0",n.MOAT_DUMMY_VALUE=1,n.DIGEST_LENGTH=8,n.AD_ERROR_TRUNCATION_LENGTH=50,n.DEFAULT_VOLUME=1,n.ALLOW_SCRIPTS="allow-scripts",n.DEMAND_TYPES={UNKNOWN:0,FLASH_VPAID:1,JS_VPAID:2,VIDEO:3,BOTH:4,IMA:5};var r=n.VID_IO_EVENTS={ad_request:"ad_request",js_opportunity:"js_opportunity",cm_req_js_opp:"cm_req_js_opp",cm_js_demand_req_resp:"cm_js_demand_req_resp",js_demand_request:"js_demand_request",js_demand_response:"js_demand_response",js_demand_opportunity:"js_demand_opportunity",js_demand_error:"js_demand_error",js_demand_missed_opportunity:"js_demand_missed_opportunity",js_impression:"js_impression",js_supply_error:"js_supply_error",js_click:"js_click",js_first_quartile:"js_first_quartile",js_midpoint:"js_midpoint",js_third_quartile:"js_third_quartile",js_complete:"js_complete"},i=(n.PIXEL_MUTEX_EVENTS={js_impression:"js_impression",js_supply_error:"js_supply_error"},n.PIXEL_ONCE_EVENTS={js_click:"js_click",js_first_quartile:"js_first_quartile",js_midpoint:"js_midpoint",js_third_quartile:"js_third_quartile",js_complete:"js_complete"},n.MANIFEST_PARSE_ERRORS={PIMPS:"PIMPS",UUID:"UUID",SECURE:"SECURE",AID:"AID",SUPPLY_TAG_ID:"SUPPLY_TAG_ID",TO:"TO",V:"V",COUNTRY:"COUNTRY",SSID:"SSID",WIDTH:"WIDTH",HEIGHT:"HEIGHT",DOMAIN:"DOMAIN",IMP_PXL:"IMP_PXL",TD:"TD",TS:"TS",URLPARAMS:"URLPARAMS",OL:"OL",OV:"OV",SSC_PV:"SSC_PV",SSC_TO:"SSC_TO",PP:"PP",DX_ARRAY:"DX_ARRAY",BROADCAST_ARRAY:"BROADCAST_ARRAY",WATERFALL_OBJECT:"WATERFALL_OBJECT",WATERFALL_ID:"WATERFALL_ID",WATERFALL_URL:"WATERFALL_URL",WATERFALL_TO:"WATERFALL_TO",WATERFALL_A_CC:"WATERFALL_A_CC",WATERFALL_TD:"WATERFALL_TD",WATERFALL_TS:"WATERFALL_TS",WATERFALL_SSC_F:"WATERFALL_SSC_F",WATERFALL_SSC_ID:"WATERFALL_SSC_ID",WATERFALL_PIXELS_OBJECT:"WATERFALL_PIXELS_OBJECT",WATERFALL_PIXELS_VPAID_EVENT:"WATERFALL_PIXELS_VPAID_EVENT",WATERFALL_PIXELS_ARRAY:"WATERFALL_PIXELS_ARRAY",WATERFALL_PIXELS_URL:"WATERFALL_PIXELS_URL",WATERFALL_CALL_CHAIN:"WATERFALL_CALL_CHAIN",WATERFALL_CALL_CHAIN_2:"WATERFALL_CALL_CHAIN_2",WATERFALL_PREDECESSORS:"WATERFALL_PREDECESSORS",WATERFALL_PREDECESSORS_2:"WATERFALL_PREDECESSORS_2",WATERFALL_OL:"WATERFALL_OL",PASSTHRU:"PASSTHRU",PIXELS_OBJECT:"PIXELS_OBJECT",PIXELS_INVALID_EVENT:"PIXELS_INVALID_EVENT",PIXELS_ARRAY:"PIXELS_ARRAY",PIXELS_URL:"PIXELS_URL"},n.CALL_CHAIN_ERRORS={INVALID_CALL_CHAIN:"INVALID_CALL_CHAIN",INVALID_SUPPLY_DEMAND_PAIR:"INVALID_SUPPLY_DEMAND_PAIR",NO_SUPPLY_TAG_FOUND:"NO_SUPPLY_TAG_FOUND",INVALID_CALL_CHAIN_LINK_GENERAL:"INVALID_CALL_CHAIN_LINK_GENERAL",INVALID_CALL_CHAIN_LINK:"INVALID_CALL_CHAIN_LINK",INVALID_CALL_CHAIN_ID:"INVALID_CALL_CHAIN_ID",INVALID_CALL_CHAIN_TAG:"INVALID_CALL_CHAIN_TAG",INVALID_CALL_CHAIN_LINK_NO_SUPPLY_TAG:"INVALID_CALL_CHAIN_LINK_NO_SUPPLY_TAG",NOT_A_VALID_CALL_CHAIN_LINK:"NOT_A_VALID_CALL_CHAIN_LINK"},n.VD_ERROR_CODES={TIMEOUT_MANAGER_INIT_ERROR:"TIMEOUT_MANAGER_INIT_ERROR",VIDEO_ELEMENT_MANAGER_INIT_ERROR:"VIDEO_ELEMENT_MANAGER_INIT_ERROR",PROCESSOR_INIT_ERROR:"PROCESSOR_INIT_ERROR",SSC_RESULT_MANAGER_INIT_ERROR:"SSC_RESULT_MANAGER_INIT_ERROR",INIT_AD_ERROR:"INIT_AD_ERROR",SCRIPT_ON_ERROR:"SCRIPT_ON_ERROR",IFRAME_ON_ERROR:"IFRAME_ON_ERROR",AD_ERROR:"AD_ERROR",HB_BID_ERROR:"HB_BID_ERROR",JSON_PARSE_ERROR:"JSON_PARSE_ERROR",JSON_PARSE_UNKNOWN_ERROR:"JSON_PARSE_UNKNOWN_ERROR",JSON_PARSE_UNKNOWN_ERROR_2:"JSON_PARSE_UNKNOWN_ERROR_2",MANIFEST_PARSE_ERROR:"MANIFEST_PARSE_ERROR",MANIFEST_PARSE_UNKNOWN_ERROR:"MANIFEST_PARSE_UNKNOWN_ERROR",MANIFEST_PARSE_UNKNOWN_ERROR_2:"MANIFEST_PARSE_UNKNOWN_ERROR_2",JSON_RESPONSE_PARSE_ERROR:"JSON_RESPONSE_PARSE_ERROR",JSON_MANIFEST_PARSE_ERROR:"JSON_MANIFEST_PARSE_ERROR",JSON_TIMEOUT:"JSON_TIMEOUT",NO_FILL:"NO_FILL",PLAY_ERROR:"PLAY_ERROR",NO_RESPONSES:"NO_RESPONSES",STOP_AD_CALLED:"STOP_AD_CALLED",SKIP_AD_CALLED:"SKIP_AD_CALLED",NO_SOURCE:"NO_SOURCE",UNKNOWN_REJECTION:"UNKNOWN_REJECTION",VAST_ERROR_EVENT:"VAST_ERROR_EVENT",VPAID_TIMEOUT:"VPAID_TIMEOUT",VIDEO_TIMEOUT:"VIDEO_TIMEOUT",IS_PLAYING_TIMEOUT:"IS_PLAYING_TIMEOUT",NO_XHR:"NO_XHR",BAD_XHR_STATUS:"BAD_XHR_STATUS",FLASH_DISABLED:"FLASH_DISABLED",FLASH_NOT_SUPPORTED:"FLASH_NOT_SUPPORTED",UNSUPPORTED_MEDIA:"UNSUPPORTED_MEDIA",EMPTY_VAST:"EMPTY_VAST",VAST_TIMEOUT:"VAST_TIMEOUT",TOO_MANY_WRAPPERS:"TOO_MANY_WRAPPERS",WRAPPER_CHAIN_NO_TIME:"VASTS_NO_TIME",AD_STOPPED:"AD_STOPPED",AD_SKIPPED:"AD_SKIPPED",AD_TIMEOUT:"AD_TIMEOUT",XHR_ERROR:"XHR_ERROR",DEMAND_TAG_ERROR:"DEMAND_TAG_ERROR",SUPPLY_TAG_TIMEOUT:"SUPPLY_TAG_TIMEOUT",DEMAND_PARTNER_TIMEOUT:"DEMAND_PARTNER_TIMEOUT",DTO_TIMEOUT:"DTO_TIMEOUT",FLASH_DISPLAY_LOAD_ERROR:"FLASH_DISPLAY_LOAD_ERROR",VAST_LOGIC_ERROR:"VAST_LOGIC_ERROR",CHILD_HANDSHAKE_ERROR:"CHILD_HANDSHAKE_ERROR",CHILD_INIT_AD_ERROR:"CHILD_INIT_AD_ERROR",CHILD_SET_VOLUME_ERROR:"CHILD_SET_VOLUME_ERROR",VAST_WRAPPER_BEGIN_ERROR:"VAST_WRAPPER_BEGIN_ERROR",JS_VPAID_BEGIN_ERROR:"JS_VPAID_BEGIN_ERROR",GET_JS_VPAID_AD_ERROR:"GET_JS_VPAID_AD_ERROR",CREATE_VIDEO_SLOT_ERROR:"CREATE_VIDEO_SLOT_ERROR",GET_VOLUME_ERROR:"GET_VOLUME_ERROR",ADD_CLICK_LISTENER:"ADD_CLICK_LISTENER",FOUND_SOURCE_ERROR:"FOUND_SOURCE_ERROR",ADD_EVENT_LISTENERS_ERROR:"ADD_EVENT_LISTENERS_ERROR",RESPONSE_XML_NULL:"RESPONSE_XML_NULL",DOM_PARSER_PARSE_FAILURE:"RESPONSE_PARSE_FAILURE",JS_VPAID_EMBED_FAIL:"JS_VPAID_EMBED_FAIL",AD_BRIDGE_CREATE_ERROR:"AD_BRIDGE_CREATE_ERROR",JS_VPAID_BRIDGE_LOAD_ERROR:"JS_VPAID_BRIDGE_LOAD_ERROR",JS_VPAID_BRIDGE_SUBSCRIBE_FAIL:"JS_VPAID_BRIDGE_SUBSCRIBE_FAIL",CREATE_VIDEO_SLOT_LOGIC_ERROR:"CREATE_VIDEO_SLOT_LOGIC_ERROR",VAST_IMPRESSION_PIXELS_ERROR:"VAST_IMPRESSION_PIXELS_ERROR",VAST_ERROR_PIXELS_ERROR:"VAST_ERROR_PIXELS_ERROR",VAST_IS_LINEAR_XML_ERROR:"VAST_IS_LINEAR_XML_ERROR",VAST_IS_WRAPPER_XML_ERROR:"VAST_IS_WRAPPER_XML_ERROR",VAST_NOAD_XML_ERROR:"VAST_NOAD_XML_ERROR",VAST_ERROR_ORTB_DETAIL:"VAST_ERROR_ORTB_DETAIL",VAST_ERROR_EXTENSIONS:"VAST_ERROR_EXTENSIONS",FIND_VIDEO_AD_EXCEPTION:"FIND_VIDEO_AD_EXCEPTION",CREATE_VIDEO_ELEMENT_EXCEPTION:"CREATE_VIDEO_ELEMENT_EXCEPTION",CAN_PLAY_VIDEO_EXCEPTION:"CAN_PLAY_VIDEO_EXCEPTION",JS_DEMAND_RESPONSE_EXCEPTION:"JS_DEMAND_RESPONSE_EXCEPTION",VAST_ONLOAD_EXCEPTION:"VAST_ONLOAD_EXCEPTION",EXTEND_VAST_EXCEPTION:"EXTEND_VAST_EXCEPTION",VAST_GET_LINEAR_WRAPPER_XML_ERROR:"VAST_GET_LINEAR_WRAPPER_XML_ERROR",INIT_AD_STATE_INFO_ERROR:"INIT_AD_STATE_INFO_ERROR",INIT_AD_TD_MISMATCH_ERROR:"INIT_AD_TD_MISMATCH_ERROR",INIT_AD_TS_MISMATCH_ERROR:"INIT_AD_TS_MISMATCH_ERROR",INIT_AD_GET_NEW_AD_PARAMETERS_ERROR:"INIT_AD_GET_NEW_AD_PARAMETERS_ERROR",INIT_AD_POST_INIT_ERROR:"INIT_AD_POST_INIT_ERROR",PRE_INIT_STATE_INFO_FAIL:"PRE_INIT_STATE_INFO_FAIL",PRE_INIT_TD_MISMATCH_FAIL:"PRE_INIT_TD_MISMATCH_FAIL",PRE_INIT_TS_MISMATCH_FAIL:"PRE_INIT_TS_MISMATCH_FAIL",PRE_INIT_MISSED_OPPORTUNITY_FAIL:"PRE_INIT_MISSED_OPPORTUNITY_FAIL",POST_INIT_WATERFALL_CHECK_ERROR:"POST_INIT_WATERFALL_CHECK_ERROR",DO_GET_VAST_RESPONSE_START_RESPONSE_FAIL:"DO_GET_VAST_RESPONSE_START_RESPONSE_FAIL",AD_VAST_GET_TIMEOUT_INFO_FAIL:"AD_VAST_GET_TIMEOUT_INFO_FAIL",AD_VAST_GET_OPTIONS_FAIL:"AD_VAST_GET_OPTIONS_FAIL",AD_VAST_GET_CALL_CHAIN_VARS_FAIL:"AD_VAST_GET_CALL_CHAIN_VARS_FAIL",AD_VAST_SEND_AD_REQUEST_FAIL:"AD_VAST_SEND_AD_REQUEST_FAIL",AD_VAST_GV_FAIL:"AD_VAST_GV_FAIL",SSC_NO_XHR:"SSC_NO_XHR",SSC_TIMEOUT:"SSC_TIMEOUT",SSC_BAD_XHR_STATUS:"SSC_BAD_XHR_STATUS",SSC_JSON_PARSE_ERROR:"SSC_JSON_PARSE_ERROR",SSC_RESULT_ERROR:"SSC_RESULT_ERROR",SSC_XHR_ERROR:"SSC_XHR_ERROR",SSC_UNKNOWN_ERROR:"SSC_UNKNOWN_ERROR",SSC_UNKNOWN_ERROR_2:"SSC_UNKNOWN_ERROR_2",SSC_MAKE_DEMAND_REQUEST_ERROR:"SSC_MAKE_DEMAND_REQUEST_ERROR",SSC_MAKE_DEMAND_REQUEST_ERROR_2:"SSC_MAKE_DEMAND_REQUEST_ERROR_2",SSC_JS_VPAID_BR_ERROR:"SSC_JS_VPAID_BR_ERROR",SSC_JS_VPAID_BR_ERROR_2:"SSC_JS_VPAID_BR_ERROR_2",SSC_CALL_LOG_EVENT_ERROR:"SSC_CALL_LOG_EVENT_ERROR",NOT_JS_DEMAND_RESPONSE:"NOT_JS_DEMAND_RESPONSE",ALREADY_SENT_DEMAND_RESPONSE:"ALREADY_SENT_DEMAND_RESPONSE",NEED_SSC_RESULT_IN_AD_CONTAINER:"NEED_SSC_RESULT_IN_AD_CONTAINER",JS_VPAID_BRIDGE_BEGIN_ERROR:"JS_VPAID_BRIDGE_BEGIN_ERROR",JS_BRIDGE_MANAGER_CREATE_ERROR:"JS_BRIDGE_MANAGER_CREATE_ERROR",ADS_MANAGER_LOAD_ERROR:"ADS_MANAGER_LOAD_ERROR"},n.VPAID_EVENTS={AdStarted:"AdStarted",AdStopped:"AdStopped",AdSkipped:"AdSkipped",AdLoaded:"AdLoaded",AdLinearChange:"AdLinearChange",AdSizeChange:"AdSizeChange",AdExpandedChange:"AdExpandedChange",AdSkippableStateChange:"AdSkippableStateChange",AdDurationChange:"AdDurationChange",AdRemainingTimeChange:"AdRemainingTimeChange",AdVolumeChange:"AdVolumeChange",AdImpression:"AdImpression",AdClickThru:"AdClickThru",AdInteraction:"AdInteraction",AdVideoStart:"AdVideoStart",AdVideoFirstQuartile:"AdVideoFirstQuartile",AdVideoMidpoint:"AdVideoMidpoint",AdVideoThirdQuartile:"AdVideoThirdQuartile",AdVideoComplete:"AdVideoComplete",AdUserAcceptInvitation:"AdUserAcceptInvitation",AdUserMinimize:"AdUserMinimize",AdUserClose:"AdUserClose",AdPaused:"AdPaused",AdPlaying:"AdPlaying",AdError:"AdError",AdLog:"AdLog"}),a=(n.MANIFEST_PIXEL_EVENTS={initAd:"initAd"},n.PIXEL_EVENTS={AdStarted:"AdStarted",AdImpression:"AdImpression",AdStopped:"AdStopped",AdSkipped:"AdSkipped",AdLoaded:"AdLoaded",AdError:"AdError",AdVideoStart:"AdVideoStart",AdVideoFirstQuartile:"AdVideoFirstQuartile",AdVideoMidpoint:"AdVideoMidpoint",AdVideoThirdQuartile:"AdVideoThirdQuartile",AdVideoComplete:"AdVideoComplete",AdClickThru:"AdClickThru",AdUserAcceptInvitation:"AdUserAcceptInvitation"},n.VPAID_FINAL_EVENTS={AdError:"AdError",AdStopped:"AdStopped",AdSkipped:"AdSkipped"},n.VPAID_ONCE_EVENTS={AdLoaded:"AdLoaded",AdStarted:"AdStarted",AdImpression:"AdImpression",AdVideoStart:"AdVideoStart",AdVideoFirstQuartile:"AdVideoFirstQuartile",AdVideoMidpoint:"AdVideoMidpoint",AdVideoThirdQuartile:"AdVideoThirdQuartile",AdVideoComplete:"AdVideoComplete"},n.VIDEO_EVENTS={abort:"abort",canplay:"canplay",canplaythrough:"canplaythrough",click:"click",durationchange:"durationchange",emptied:"emptied",ended:"ended",error:"error",loadeddata:"loadeddata",loadedmetadata:"loadedmetadata",loadstart:"loadstart",pause:"pause",play:"play",playing:"playing",progress:"progress",ratechange:"ratechange",suspend:"suspend",seeked:"seeked",seeking:"seeking",timeupdate:"timeupdate",waiting:"waiting"},n.ELEMENT_EVENTS={click:"click"},n.VIDEO_ATTRIBUTES={currentTime:"currentTime",duration:"duration",ended:"ended",paused:"paused",playbackRate:"playbackRate",src:"src",type:"type"},n.VIDEO_ATTRIBUTES_POSTER="poster",n.VPAID_CONSTANTS={NOT_IMPLEMENTED:-1,UNKNOWN:-2}),o=(n.VID_IO_PARAMS={instanceId:"instanceId",event:"event",dtidx:"dtidx",dtnum:"dtnum",yh_id:"yh_id",platform:"platform",bv:"bv",cb:"cb",timestamp:"timestamp",id:"id",aid:"aid",d:"d",w:"w",h:"h",cc:"cc",v:"v",ol:"ol",ov:"ov",uuid:"uuid",auctionCallChain:"a_cc",callChainIndicies:"cc_i",initialStage_notnull:"i_sn",initialStage_w:"i_w",initialStage_h:"i_h",initialStageWidth:"i_sw",initialStageHeight:"i_sh",initialStageDisplayState:"i_sds",initialStateInfoExternalInterface__objectID:"i_E_o",initialStateInfoExternalInterface__available:"i_E_a",initialStateInfoExternalInterface__error__getQualifiedClassName:"i_E_e",initialNo_element:"i_ne",initialOffsetWidth:"i_ow",initialOffsetHeight:"i_oh",initialClientWidth:"i_cw",initialClientHeight:"i_ch",initialScrollWidth:"i_Sw",initialScrollHeight:"i_Sh",initialGetBoundingClientRect__left:"i_bl",initialGetBoundingClientRect__top:"i_bt",initialGetBoundingClientRect__right:"i_br",initialGetBoundingClientRect__bottom:"i_bb",initialVpaidWidth:"vw",initialVpaidHeight:"vh",initialVpaidViewMode:"i_vv",inView:"in_v",loaderInfo__swfVersion:"l_s",loaderInfo__loaderURL:"l_l",loaderInfo__actionScriptVersion:"l_a",ExternalInterface__available:"E_a",ExternalInterface__error__getQualifiedClassName:"E_e",window__top__location__href:"d_wtlh",window__location__href:"d_wlh",window__top__location:"d_wtl",window__location__ancestorOrigins:"d_wla",Security__pageDomain:"d_Sp",document__referrer:"d_dr",ancestorOrigins:"d_ao",parentHostnames:"d_ph",domain_match:"d_m",domain_match_source:"d_ms",overflow_required:"o_r",overflow_optional:"o_o",overflow_exclude:"o_e",environmentInfoError:"e_e",stage_notnull:"s_sn",stage_w:"s_w",stage_h:"s_h",stageWidth:"s_sw",stageHeight:"s_sh",stageDisplayState:"s_sds",stateInfoExternalInterface__objectID:"s_E_o",stateInfoExternalInterface__available:"s_E_a",stateInfoExternalInterface__error__getQualifiedClassName:"s_E_e",no_element:"s_ne",offsetWidth:"s_ow",offsetHeight:"s_oh",clientWidth:"s_cw",clientHeight:"s_ch",scrollWidth:"s_Sw",scrollHeight:"s_Sh",getBoundingClientRect__left:"s_bl",getBoundingClientRect__top:"s_bt",getBoundingClientRect__right:"s_br",getBoundingClientRect__bottom:"s_bb",vpaidWidth:"s_vw",vpaidHeight:"s_vh",vpaidViewMode:"s_vv",detected_size_width:"ds_w",detected_size_height:"ds_h",detected_size_match_source:"ds_ms"},n.SSC_FAILED=-1,n.SSC_NOT_BLOCKED=0,n.SSC_NO_ID=0,n.SSC_TO={UNKNOWN:-1,NOT_CALLED:0,TIMEOUT:1,ERROR:2,NON_ERROR:3,OTHER:4},n.NO_PP=-1,n.VIEW_MODE_NORMAL="normal",n.MAX_URL_LENGTH=2e3,n.MAX_URL_LENGTH_IE=2083,n.MAX_URL_LENGTH_APACHE=8190,n.OTHER_PIXEL_PARAMS={response_time:"response_time",reason:"reason",has_ad:"has_ad",wrapper_count:"wrapper_count",time_on_page:"time_on_page",request_time:"request_time",timeout:"timeout",child_handshake_version:"child_handshake_version",creativeData:"creativeData",location:"location",message:"message"},n.TRACKING_EVENTS={creativeView:[],start:[],firstQuartile:[],midpoint:[],thirdQuartile:[],complete:[],mute:[],unmute:[],pause:[],rewind:[],resume:[],fullscreen:[],exitFullscreen:[],expand:[],collapse:[],acceptInvitationLinear:[],acceptInvitation:[],closeLinear:[],skip:[],progress:[]},n.VAST_ERRORCODES={VAST_ERRORCODE_100:100,VAST_ERRORCODE_101:101,VAST_ERRORCODE_102:102,VAST_ERRORCODE_200:200,VAST_ERRORCODE_201:201,VAST_ERRORCODE_202:202,VAST_ERRORCODE_203:203,VAST_ERRORCODE_300:300,VAST_ERRORCODE_301:301,VAST_ERRORCODE_302:302,VAST_ERRORCODE_303:303,VAST_ERRORCODE_400:400,VAST_ERRORCODE_401:401,VAST_ERRORCODE_402:402,VAST_ERRORCODE_403:403,VAST_ERRORCODE_405:405,VAST_ERRORCODE_500:500,VAST_ERRORCODE_501:501,VAST_ERRORCODE_502:502,VAST_ERRORCODE_503:503,VAST_ERRORCODE_600:600,VAST_ERRORCODE_601:601,VAST_ERRORCODE_602:602,VAST_ERRORCODE_603:603,VAST_ERRORCODE_604:604,VAST_ERRORCODE_900:900,VAST_ERRORCODE_901:901},n.VAST_MACROS={ERRORCODE:"[ERRORCODE]",CACHEBUSTING:"[CACHEBUSTING]"},n.QUARTILE_EVENTS=[{event:i.AdVideoStart,pixel:null,value:0},{event:i.AdVideoFirstQuartile,pixel:r.js_first_quartile,value:25},{event:i.AdVideoMidpoint,pixel:r.js_midpoint,value:50},{event:i.AdVideoThirdQuartile,pixel:r.js_third_quartile,value:75}],n.RETRY_MS=200,n.STOP_AD_TIMEOUT=75,n.PROCESSOR_STATES={begin:0,AdLoaded:1,AdStarted:2,AdStopped:3},n.VOLUME_EVENTS={AdLoaded:!0,AdStarted:!0,AdVideoStart:!0},n.LOG_EVENTS={SSC_INIT:"SSC_INIT",MOAT_INIT:"MOAT_INIT",IAS_INIT:"IAS_INIT",CREATE_VIDEO_SLOT:"CREATE_VIDEO_SLOT",CREATE_VIDEO_SLOT_LOGIC_ERROR:"CREATE_VIDEO_SLOT_LOGIC_ERROR",CREATE_VAST_VIDEO_SLOT:"CREATE_VAST_VIDEO_SLOT",CREATE_VIDEO_SLOT_ERROR:"CREATE_VIDEO_SLOT_ERROR",BRIDGE_SHOW:"BRIDGE_SHOW",BRIDGE_HIDE:"BRIDGE_HIDE",JS_VPAID_SLOT_CLICK:"JS_VPAID_SLOT_CLICK",VPAID_VIDEO_WRAPPER_SLOT_CLICK:"VPAID_VIDEO_WRAPPER_SLOT_CLICK",FLASH_BRIDGE_SLOT_CLICK:"FLASH_BRIDGE_SLOT_CLICK",JS_VPAID_VIDEO_SLOT_CLICK:"JS_VPAID_VIDEO_SLOT_CLICK",SSC_ENDPOINT:"SSC_ENDPOINT",SSC_VALID_EVENT:"SSC_VALID_EVENT",VAST_FIRE_PIXEL:"VAST_FIRE_PIXEL",VAST_FIRE_PIXEL_ERROR:"VAST_FIRE_PIXEL_ERROR"},n.FLASH_DIV_ID="vdDiv",n.FLASH_OBJECT_ID="vdObj",n.BRIDGE_EVENTS={EMBED_SUCCESS:"EMBED_SUCCESS",EMBED_FAIL:"EMBED_FAIL",SWF_IS_READY:"SWF_IS_READY",SWF_IS_READY_TIMEOUT:"SWF_IS_READY_TIMEOUT"},n.CREATIVE_TYPES={MEDIA:"MEDIA",JS_VPAID:"JS_VPAID",XFLV:"XFLV",FLASH_VPAID:"FLASH_VPAID",IMA:"IMA"},n.VAST_PIXEL_TYPES={VAST_ERROR:"VAST_ERROR",VAST_IMPRESSION:"VAST_IMPRESSION",VAST_CLICKTRACKING:"VAST_CLICKTRACKING",VAST_CREATIVEVIEW:"VAST_CREATIVEVIEW",VAST_START:"VAST_START",VAST_FIRSTQUARTILE:"VAST_FIRSTQUARTILE",VAST_MIDPOINT:"VAST_MIDPOINT",VAST_THIRDQUARTILE:"VAST_THIRDQUARTILE",VAST_COMPLETE:"VAST_COMPLETE",VAST_MUTE:"VAST_MUTE",VAST_UNMUTE:"VAST_UNMUTE",VAST_PAUSE:"VAST_PAUSE",VAST_REWIND:"VAST_REWIND",VAST_RESUME:"VAST_RESUME",VAST_FULLSCREEN:"VAST_FULLSCREEN",VAST_EXITFULLSCREEN:"VAST_EXITFULLSCREEN",VAST_EXPAND:"VAST_EXPAND",VAST_COLLAPSE:"VAST_COLLAPSE",VAST_ACCEPTINVITATIONLINEAR:"VAST_ACCEPTINVITATIONLINEAR",VAST_ACCEPTINVITATION:"VAST_ACCEPTINVITATION",VAST_CLOSELINEAR:"VAST_CLOSELINEAR",VAST_SKIP:"VAST_SKIP",VAST_PROGRESS:"VAST_PROGRESS"},n.JSON_PIXEL_PARAMS={url:"url",w:"w",h:"h",declaredDomain:"decl_d",declaredWidth:"decl_w",declaredHeight:"decl_h",detectedDomain:"det_d",detectedWidth:"det_w",detectedHeight:"det_h",fullUrl:"fullUrl",td:"td",ts:"ts",cb:"cb"},n.ERROR_LOG_EVENT="ERROR_LOG_EVENT",n.IAS_EXTRA_PARAMS={aCc:"a_cc",aId:"advId",country:"country",declaredDomain:"decl_d",declaredWidth:"decl_w",declaredHeight:"decl_h",detectedDomain:"det_d",detectedWidth:"det_w",detectedHeight:"det_h",ssId:"ssid"},n.IAS_EVENTS={AdLoaded:"AdLoaded",AdStarted:"AdStarted",AdStopped:"AdStopped",AdSkipped:"AdSkipped",AdSkippableStateChange:"AdSkippableStateChange",AdDurationChange:"AdDurationChange",AdVolumeChange:"AdVolumeChange",AdImpression:"AdImpression",AdVideoStart:"AdVideoStart",AdVideoFirstQuartile:"AdVideoFirstQuartile",AdVideoMidpoint:"AdVideoMidpoint",AdVideoThirdQuartile:"AdVideoThirdQuartile",AdVideoComplete:"AdVideoComplete",AdClickThru:"AdClickThru",AdPaused:"AdPaused",AdPlaying:"AdPlaying",AdError:"AdError"},n.ORTB_DETAIL="ortb-detail",n.CALL_CHAIN_IDENTIFIERS={SUPPLY:"s",DEMAND:"d",ACCOUNT:"a",MOAT_USED:"mt"},n.CALL_CHAIN_IDENTIFIER_BLACKLIST={sf:!0,a:!0},n.SIZE={XS:0,S:250,M:350,L:500,XL:800,UNKNOWN:-1},n.POSTER_SIZES={"16:9":[{width:426,height:240,filename:"426x240"},{width:640,height:360,filename:"640x360"},{width:720,height:480,filename:"720x480"},{width:1280,height:720,filename:"1280x720"},{width:1920,height:1080,filename:"1920x1080"}],"4:3":[{width:176,height:144,filename:"176x144"},{width:320,height:240,filename:"320x240"},{width:480,height:360,filename:"480x360"},{width:640,height:480,filename:"640x480"},{width:1280,height:960,filename:"1280x960"}]},n.CALL_CHAIN_LINK_SEPARATOR="_",n.CALL_CHAIN_VARIABLE_SEPARATOR="-",n.CALL_CHAIN_VARIABLE_ID_SEPARATOR=".",n.SLOT_STATES={DEMAND_TAG_READY:"DEMAND_TAG_READY",REQUESTING_VAST:"REQUESTING_VAST",NO_VAST:"NO_VAST",VAST_READY:"VAST_READY",REQUESTING_VPAID:"REQUESTING_VPAID",VPAID_FAILED:"VPAID_FAILED"},n.SLOT_EVENTS={VastDone:"VastDone"}),s=(n.BROADCAST_STATES={INIT:"INIT",REQUESTING:"REQUESTING",DONE:"DONE"},n.BROADCAST_EVENTS={VastReady:"VastReady",Done:"Done",VastRequestTimerTimeout:"VastRequestTimerTimeout"});n.EVENT_TYPES={_:r,Slot:o,Broadcast:s},n.TRUST_BUT_VERIFY_MACROS={DETECTED_DOMAIN:"{{DETECTED_DOMAIN}}",DETECTED_URL:"{{DETECTED_URL}}",DETECTED_ENCODED_URL:"{{DETECTED_ENCODED_URL}}",DETECTED_DOUBLE_ENCODED_URL:"{{DETECTED_DOUBLE_ENCODED_URL}}",DETECTED_HEIGHT:"{{DETECTED_HEIGHT}}",DETECTED_WIDTH:"{{DETECTED_WIDTH}}",DETECTED_IN_VIEW:"{{IS_INVIEW}}",DETECTED_IS_VISIBLE:"{{IS_VISIBLE}}"},n.VIEWABILITY={UNKNOWN:-1,NOT_VIEWABLE:0,VIEWABLE:1},n.DEMAND_PARTNER_MACROS={D_WIDTH:"{{D_WIDTH}}",D_HEIGHT:"{{D_HEIGHT}}"},n.NO_TIMER=0,n.POST_IMP_PROVIDER_ID_IAS="i",n.POST_IMP_PROVIDER_ID_MOAT="m",n.POST_IMP_PROVIDER_ID_WHITEOPS="w",n.IMA_MANAGER_STATES={INIT:"INIT",REQUEST_SCRIPT:"REQUEST_SCRIPT",SCRIPT_LOADED:"SCRIPT_LOADED",ADS_MANAGER_LOADED:"ADS_MANAGER_LOADED",ADS_MANAGER_LOAD_ERROR:"ADS_MANAGER_LOAD_ERROR"},n.IMA_MANAGER_EVENT_TYPES={ADS_MANAGER_LOADED:"ADS_MANAGER_LOADED",ADS_MANAGER_LOAD_ERROR:"ADS_MANAGER_LOAD_ERROR"}},{}],224:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.mutexEvents_=e,this.onceEvents_=n,this.sentFinalEvent_=!1,this.sentOnceEvent_={}}return r(t,[{key:"sendEventType",value:function(t){var e=void 0;return this.isMutexEvent(t)?(e=this.sentFinalEvent(),this.sentFinalEvent_=!0,!e):!this.isOnceEvent(t)||(e=this.sentOnceEvent(t),this.sentOnceEvent_[t]=!0,!e)}},{key:"sentFinalEvent",value:function(){return this.sentFinalEvent_}},{key:"sentOnceEvent",value:function(t){return this.sentOnceEvent_.hasOwnProperty(t)&&this.sentOnceEvent_[t]}},{key:"isMutexEvent",value:function(t){return this.mutexEvents_.hasOwnProperty(t)}},{key:"isOnceEvent",value:function(t){return this.onceEvents_.hasOwnProperty(t)}}]),t}();n.default=i},{}],225:[function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=i(t("lodash/remove")),s=i(t("./ss_utils/async_js_loader")),u=r(t("./constants")),_=(r(t("./utils")),function(){function t(e,n,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._uuid=e,this._pageProtocol=n,this._videoElementManager=r,this._environmentVars=i,this._state=u.IMA_MANAGER_STATES.INIT,this._adDisplayContainer=null,this._adsLoader=null,this._adsManager=null,this._imaManagerEventListeners={}}return a(t,[{key:"loadIma",value:function(t){var e=this;this._state=u.IMA_MANAGER_STATES.REQUEST_SCRIPT,s.default.loadScript(this._pageProtocol+"//imasdk.googleapis.com/js/sdkloader/ima3.js",function(){e._state=u.IMA_MANAGER_STATES.SCRIPT_LOADED,t()})}},{key:"setUpIMA",value:function(){var t=this;this._adDisplayContainer=new google.ima.AdDisplayContainer(this._environmentVars.slot,this._videoElementManager.videoSlot),this._adsLoader=new google.ima.AdsLoader(this._adDisplayContainer),this._adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoaded.bind(this),!1),this._adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError.bind(this),!1),this._videoElementManager.videoSlot.onended=function(){t._adsLoader.contentComplete()}}},{key:"onAdsManagerLoaded",value:function(t){this._state=u.IMA_MANAGER_STATES.ADS_MANAGER_LOADED;var e=new google.ima.AdsRenderingSettings;e.restoreCustomPlaybackStateOnAdBreakComplete=!0,this._adsManager=t.getAdsManager(this._videoElementManager.videoSlot,e),this.callImaManagerEvent(u.IMA_MANAGER_EVENT_TYPES.ADS_MANAGER_LOADED)}},{key:"onAdError",value:function(t){this._state=u.IMA_MANAGER_STATES.ADS_MANAGER_LOAD_ERROR,this._adsManager&&this._adsManager.destroy()}},{key:"loadAndStartIma",value:function(){this.loadIma(this.setUpIMA.bind(this))}},{key:"callImaManagerEvent",value:function(t){var e=Array.prototype.slice.call(arguments,1);if(this._imaManagerEventListeners.hasOwnProperty(t))for(var n=0;n<this._imaManagerEventListeners[t].length;n++)this._imaManagerEventListeners[t][n].apply(this._imaManagerEventListeners[t][n],e)}},{key:"subscribeImaManagerEvent",value:function(t,e,n){this._imaManagerEventListeners.hasOwnProperty(e)||(this._imaManagerEventListeners[e]=[]),this._imaManagerEventListeners[e].push(t.bind(n))}},{key:"unsubscribeImaManagerEvent",value:function(t,e){this._imaManagerEventListeners.hasOwnProperty(t)&&(0,o.default)(this._imaManagerEventListeners[t],function(t){return t===e})}},{key:"adsLoader",get:function(){return this._adsLoader}},{key:"adsManager",get:function(){return this._adsManager}}]),t}());n.default=_},{"./constants":223,"./ss_utils/async_js_loader":229,"./utils":233,"lodash/remove":178}],226:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.initMoatTracking=function(t,e,n,r,i){return function(t,e,n,r,i){var a=document.createElement("script"),o=[];e={adData:{ids:e,duration:n,url:i},dispatchEvent:function(t){this.sendEvent?(o&&(o.push(t),t=o,o=!1),this.sendEvent(t)):o.push(t)}},n="_moatApi"+Math.floor(1e8*Math.random());var s=void 0,u=void 0;try{s=t.ownerDocument,u=s.defaultView||s.parentWindow}catch(t){s=document,u=window}return u[n]=e,a.type="text/javascript",t&&t.insertBefore(a,t.childNodes[0]||null),a.src="https://z.moatads.com/"+r+"/moatvideo.js#"+n,e}(t,e,n,r,i)}},{}],227:[function(t,e,n){"use strict";function r(t,e,n){var r=t.pimps,a=(r.s||{})[n]||[],o=(r.d||{})[n]||[],s=e.supplyTagId,u=e.demandTagId;return(0,i.default)(a,s)>-1||(0,i.default)(o,u)>-1}Object.defineProperty(n,"__esModule",{value:!0}),n.shouldFireLink=r,n.shouldFire=function(t,e,n){for(var i=e.callChain.callChainLinks,a=0;a<i.length;a++)if(r(t,i[a],n))return!0;return!1},n.addMoatToCallChain=function(t,e){for(var n=e.callChain.callChainLinks,i=[],o=0;o<n.length;o++){var s=n[o];r(t,s,a.POST_IMP_PROVIDER_ID_MOAT)?i.push(s.toMoatUsedString()):i.push(s.toString())}return i.join(a.CALL_CHAIN_LINK_SEPARATOR)};var i=function(t){return t&&t.__esModule?t:{default:t}}(t("lodash/indexOf")),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(t("./constants"))},{"./constants":223,"lodash/indexOf":149}],228:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};n.setAjaxTimeout=function(t){s=t},n.ajax=function(t,e,n){var u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};try{var _=void 0,l=!1,c=u.method||(n?"POST":"GET"),d="object"===(void 0===e?"undefined":r(e))?e:{success:function(){console.log("xhr success")},error:function(t){console.log("xhr error",null,t)}};if("function"==typeof e&&(d.success=e),window.XMLHttpRequest?void 0===(_=new window.XMLHttpRequest).responseType&&(l=!0):l=!0,l?((_=new window.XDomainRequest).onload=function(){d.success(_.responseText,_)},_.onerror=function(){d.error("error",_)},_.ontimeout=function(){d.error("timeout",_)},_.onprogress=function(){console.log("xhr onprogress")}):_.onreadystatechange=function(){if(_.readyState===o){var t=_.status;t>=200&&t<300||304===t?d.success(_.responseText,_):d.error(_.statusText,_)}},"GET"===c&&n){var h=(0,i.parse)(t,u);Object.assign(h.search,n),t=(0,i.format)(h)}_.open(c,t),_.timeout=s,l||(u.withCredentials&&(_.withCredentials=!0),(0,a.default)(u.customHeaders,function(t,e){_.setRequestHeader(e,t)}),u.preflight&&_.setRequestHeader("X-Requested-With","XMLHttpRequest"),_.setRequestHeader("Content-Type",u.contentType||"text/plain")),_.send("POST"===c&&n)}catch(t){console.log("xhr construction",t)}};var i=t("./url"),a=function(t){return t&&t.__esModule?t:{default:t}}(t("lodash/forEach")),o=4,s=3e3},{"./url":230,"lodash/forEach":145}],229:[function(t,e,n){"use strict";function r(t,e){var n=document.createElement("script");n.type="text/javascript",n.async=!0,e&&"function"==typeof e&&(n.readyState?n.onreadystatechange=function(){"loaded"!==n.readyState&&"complete"!==n.readyState||(n.onreadystatechange=null,e())}:n.onload=function(){e()}),n.src=t;var r=document.getElementsByTagName("head");(r=r.length?r:document.getElementsByTagName("body")).length&&(r=r[0]).insertBefore(n,r.firstChild)}var i={};n.loadScript=function(t,e,n){t&&(n?i[t]?e&&"function"==typeof e&&(i[t].loaded?e():i[t].callbacks.push(e)):(i[t]={loaded:!1,callbacks:[]},e&&"function"==typeof e&&i[t].callbacks.push(e),r(t,function(){i[t].loaded=!0;try{for(var e=0;e<i[t].callbacks.length;e++)i[t].callbacks[e]()}catch(t){}})):r(t,e))}},{}],230:[function(t,e,n){"use strict";function r(t){return t?t.replace(/^\?/,"").split("&").reduce(function(t,e){var n=e.split("="),r=a(n,2),i=r[0],o=r[1];return/\[\]$/.test(i)?(t[i=i.replace("[]","")]=t[i]||[],t[i].push(o)):t[i]=o||"",t},{}):{}}function i(t){return Object.keys(t).map(function(e){return Array.isArray(t[e])?t[e].map(function(t){return e+"[]="+t}).join("&"):e+"="+t[e]}).join("&")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();n.parseQS=r,n.formatQS=i,n.parse=function(t,e){var n=document.createElement("a");return e&&"noDecodeWholeURL"in e&&e.noDecodeWholeURL?n.href=t:n.href=decodeURIComponent(t),{protocol:(n.protocol||"").replace(/:$/,""),hostname:n.hostname,port:+n.port,pathname:n.pathname.replace(/^(?!\/)/,"/"),search:r(n.search||""),hash:(n.hash||"").replace(/^#/,""),host:n.host||window.location.host}},n.format=function(t){return(t.protocol||"http")+"://"+(t.host||t.hostname+(t.port?":"+t.port:""))+(t.pathname||"")+(t.search?"?"+i(t.search||""):"")+(t.hash?"#"+t.hash:"")}},{}],231:[function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(t,e,n,r,i,a){var s={ai:a,si:e.supplyTagId,sr:e.demandTagId,dm:n+"x"+r,di:t.domain,c1:i,ui:t.ssid,r1:e.toString(),ti:t.uuid,gt:t.country,dt:u.default.dt};return t.hasOwnProperty("pimps")&&(t.pimps.hasOwnProperty("w_pv")&&""!==t.pimps.w_pv&&(s.pv=t.pimps.w_pv),t.pimps.hasOwnProperty("w_to")&&t.pimps.w_to>o.SSC_TO.UNKNOWN&&(s.to=t.pimps.w_to)),s}function a(t,e,n,r,a){for(var s=[],u=e.callChain.callChainLinks,l=0;l<u.length;l++){var c=u[l];if(_.shouldFireLink(t,c,o.POST_IMP_PROVIDER_ID_WHITEOPS)){var d=void 0;d=0===l?t.aid:c.getFirstOtherTagId(o.CALL_CHAIN_IDENTIFIERS.ACCOUNT),s.push(i(t,c,n,r,a,d))}}return s}Object.defineProperty(n,"__esModule",{value:!0}),n.getDatas=a,n.load=function(t,e,n,r,i,o,_){for(var l=a(e,n,r,i,o),c=0;c<l.length;c++)s.addScript(t,s.makeUrl(_,u.default.url,l[c]));return l};var o=r(t("./constants")),s=r(t("./utils")),u=function(t){return t&&t.__esModule?t:{default:t}}(t("../../../ssc.json")),_=r(t("./post_imp_detection"))},{"../../../ssc.json":237,"./constants":223,"./post_imp_detection":227,"./utils":233}],232:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getStateInfo=void 0;var r=function(t){return t&&t.__esModule?t:{default:t}}(t("lodash/isElement"));n.getStateInfo=function(t,e,n){var i=t.width,a=t.height,o=t.environmentVars.videoSlot;(0,r.default)(o)||(o=t.environmentVars.slot);var s={no_element:null,offsetWidth:null,offsetHeight:null,clientWidth:null,clientHeight:null,detectedHeight:null,detectedWidth:null,detectedSizeSource:null,scrollWidth:null,scrollHeight:null,getBoundingClientRect__left:null,getBoundingClientRect__top:null,getBoundingClientRect__right:null,getBoundingClientRect__bottom:null,other:{}};try{window.jwplayer&&(s.other.jwplayer_version=window.jwplayer.version),window.vidible&&(s.other.vidible_version=window.vidible.version()),window.videojs&&(s.other.videojs_version=videojs.VERSION),window.google&&window.google.ima&&(s.other.google_ima_version=window.google.ima.VERSION)}catch(t){}try{if(s.no_element=null===o,!s.no_element&&(0,r.default)(o)){s.offsetWidth=o.offsetWidth,s.offsetHeight=o.offsetHeight,s.clientWidth=o.clientWidth,s.clientHeight=o.clientHeight,s.scrollWidth=o.scrollWidth,s.scrollHeight=o.scrollHeight;var u=o.getBoundingClientRect();null!==u&&(s.getBoundingClientRect__left=u.left,s.getBoundingClientRect__top=u.top,s.getBoundingClientRect__right=u.right,s.getBoundingClientRect__bottom=u.bottom)}else s.clientWidth=i||e,s.clientHeight=a||n;isNaN(parseFloat(s.clientWidth))?s.detectedWidth=i:s.detectedWidth=parseFloat(s.clientWidth),isNaN(parseFloat(s.clientHeight))?s.detectedHeight=a:s.detectedHeight=parseFloat(s.clientHeight),s.detectedSizeSource=isNaN(parseFloat(s.clientHeight))?"vpaid":"client"}catch(t){}return s}},{"lodash/isElement":155}],233:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){return t?E:v}function a(t,e,n){var r=t+"//"+e;if(null===n)return r;var i=[];for(var a in n)n.hasOwnProperty(a)&&i.push(a+"="+encodeURIComponent(n[a]));return r+"?"+i.join("&")}function o(t,e){var n=t.createElement("img");n.src=e,n.style.width="1px",n.style.height="1px",n.style.display="none",t.body.appendChild(n)}function s(t,e){return t&&t.length>e?t.slice(0,e):t}function u(t){return null!==t.getElementsByTagName("script")?t.getElementsByTagName("script")[0]:null}function _(t){return isNaN(t)||t<0?p.SIZE.UNKNOWN:t<p.SIZE.S?p.SIZE.XS:t<p.SIZE.M?p.SIZE.S:t<=p.SIZE.L?p.SIZE.M:t<p.SIZE.XL?p.SIZE.L:p.SIZE.XL}function l(t,e){return 3*t/e>4?"16:9":"4:3"}function c(t){return(0,f.default)(t)&&0===t.indexOf("www.")?t.substr(4):t}Object.defineProperty(n,"__esModule",{value:!0}),n.INSECURE_PROTOCOL=n.SECURE_PROTOCOL=void 0,n.getCb=function(){return Math.floor(1e7*Math.random())},n.getProtocol=i,n.promoteProtocol=function(t,e){return e===E&&function(e,n,r){return t.substr(r||0,n.length)===n}(0,v)?e+t.substr(v.length):t},n.getPageProtocol=function(){for(var t=null,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;e&&e!==e.parent;)try{if((t=e.location.protocol)&&(t===E||t===v))return t;e=e.parent}catch(n){try{if(e.document.referrer&&e.document.referrer.length>0){t=e.document.referrer.match(/^(https?:)\/\//)[1];break}}catch(t){break}}return null===t?v:t!==E&&t!==v?E:t},n.makeUrl=a,n.addImage=o,n.firePixels=function(t,e){if((0,d.default)(e))for(var n=0;n<e.length;n++)o(t,e[n])},n.checkVPAIDInterface=function(t){return t.handshakeVersion&&"function"==typeof t.handshakeVersion&&t.initAd&&"function"==typeof t.initAd&&t.startAd&&"function"==typeof t.startAd&&t.stopAd&&"function"==typeof t.stopAd&&t.skipAd&&"function"==typeof t.skipAd&&t.resizeAd&&"function"==typeof t.resizeAd&&t.pauseAd&&"function"==typeof t.pauseAd&&t.resumeAd&&"function"==typeof t.resumeAd&&t.expandAd&&"function"==typeof t.expandAd&&t.collapseAd&&"function"==typeof t.collapseAd&&t.subscribe&&"function"==typeof t.subscribe&&t.unsubscribe&&"function"==typeof t.unsubscribe&&t.getAdVolume&&"function"==typeof t.getAdVolume&&t.getAdExpanded&&"function"==typeof t.getAdExpanded&&t.getAdCompanions&&"function"==typeof t.getAdCompanions&&t.getAdDuration&&"function"==typeof t.getAdDuration&&t.getAdHeight&&"function"==typeof t.getAdHeight&&t.getAdIcons&&"function"==typeof t.getAdIcons&&t.getAdLinear&&"function"==typeof t.getAdLinear&&t.getAdRemainingTime&&"function"==typeof t.getAdRemainingTime&&t.getAdSkippableState&&"function"==typeof t.getAdSkippableState&&t.getAdWidth&&"function"==typeof t.getAdWidth},n.getRequestMethod=function(t,e){var n=new XMLHttpRequest,r=!1;if("withCredentials"in n)n.open("GET",t,!0),e&&(n.withCredentials=!0,r=!0);else{if("undefined"==typeof XDomainRequest)return null;(n=new XDomainRequest).open("GET",t)}return{xhr:n,withCredentials:r}},n.canPlayVideo=function(t,e){return t.canPlayType&&""!==t.canPlayType(e).replace(/no/,"")||!t.canPlayType},n.getTruncatedString=s,n.getDigest=function(t){return s(t,p.DIGEST_LENGTH)},n.getArgs=function(t){return Array.prototype.slice.call(t,0)},n.getDocumentAndWindow=function(t){var e=void 0,n=void 0;try{e=t.ownerDocument,n=e.defaultView||e.parentWindow}catch(t){e=document,n=window}return null!==e&&null!==n||(e=document,n=window),{document:e,window:n}},n.getScriptLocation=u,n.addScript=function(t,e){var n=t.createElement("script");n.type="text/javascript",n.async=!0;var r=u(t);null!==r?r.parentNode.insertBefore(n,r):t.head.appendChild(n),n.src=e},n.printError=function(t){return t.fileName+":"+t.lineNumber+" "+t.message},n.getSize=_,n.sizeMatch=function(t,e){return _(t.width)===_(e.detectedWidth)},n.isBc=function(t,e){var n=e.slice(0,e.indexOf(":"))+"://"+t+"/bc/";return 0===e.indexOf(n)},n.getORtbElement=function(t,e,n){try{var r=t.getElementsByTagName(e)[0].textContent.trim();try{return n(r)}catch(t){return r}}catch(t){return""}},n.getHistoryManager=function(){return{demand_events:{request:{},response:{},opportunity:{},error:{}},blockedRequests:{},supplyTagOpportunities:{}}},n.identityWrapper=function(t){return t},n.forEachType=function(t,e){(0,h.default)(t,function(t,n){(0,h.default)(t,function(t,r){e(t,n,r)})})},n.getClosestAspectRatio=l,n.getPosterFilename=function(t,e){for(var n=p.POSTER_SIZES[l(t,e)],r=0;r<n.length;r++){var i=n[r];if(t<=i.width)return i.filename}return n[n.length-1].filename},n.getPoster=function(t,e,n){return a(i(t),e+n+".jpg",null)},n.cleanDomain=c,n.domainMatch=function(t,e){return c(t.domain)===c(e.domain_match)},n.cssreset=function(t){t.style.margin=0,t.style.padding=0,t.style.border=0,t.style.outline=0,t.style["font-size"]="100%",t.style["vertical-align"]="baseline",t.style.background="transparent"};var d=r(t("lodash/isArray")),h=r(t("lodash/forEach")),f=r(t("lodash/isString")),p=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(t("./constants")),E=n.SECURE_PROTOCOL="https:",v=n.INSECURE_PROTOCOL="http:"},{"./constants":223,"lodash/forEach":145,"lodash/isArray":151,"lodash/isString":165}],234:[function(t,e,n){"use strict";function r(t,e){var n=e.getElementsByTagName(t);return n.length>0?n[0]:null}function i(t){var e=t.trim().split(":");if(3!==e.length)return null;var n=e[2].split("."),r=parseInt(n[0]);2===n.length&&(r+=parseFloat("0."+n[1]));var i=60*parseInt(e[1]),a=60*parseInt(e[0])*60;return isNaN(a)||isNaN(i)||isNaN(r)||i>3600||r>60?null:a+i+r}Object.defineProperty(n,"__esModule",{value:!0}),n.getFirstElement=r,n.getTextFromTagName=function(t,e){var n=r(t,e);if(null!==n){var i=n.textContent.trim();if(""!==i)return i}return null},n.parseDuration=i,n.getSkipOffset=function(t,e){var n=t.trim();return"%"===n[n.length-1]?null!==e&&e>0?parseFloat(n)/100*e:null:i(n)}},{}],235:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(t("./constants")),a=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.pixelNotifier_=e,this.historyManager_=n,this.demandTag_=r}return r(t,[{key:"send",value:function(t,e,n,r,i){this.pixelNotifier_(t,e,n,r,i)}},{key:"internalError",value:function(t,e){this.send(i.VID_IO_EVENTS.cm_js_demand_req_resp,this.demandTag_,{cc_i:this.demandTag_.callChain.getCallChainIndices(this.historyManager_.demand_events.response,!0).join(","),response_time:0,wrapper_count:0,has_ad:!1,timeout:e,reason:t,dtype:i.DEMAND_TYPES.UNKNOWN},null)}},{key:"missedOpportunity",value:function(t,e){this.send(i.VID_IO_EVENTS.js_demand_missed_opportunity,this.demandTag_,{cc_i:this.demandTag_.callChain.getCallChainIndices(this.historyManager_.demand_events.opportunity,!0).join(","),td:t,ts:e},null)}},{key:"fireChain",value:function(t,e){for(var n=e.callChain.getSupplyTagHistory(this.historyManager_.supplyTagOpportunities),r=e.callChain.callChainLinks,a=[],o=0;o<n.length;o++){var s=n[o];s>0&&a.push(i.CALL_CHAIN_IDENTIFIERS.SUPPLY+i.CALL_CHAIN_VARIABLE_ID_SEPARATOR+r[s].supplyTagId)}a.length>0&&this.send(i.VID_IO_EVENTS.cm_req_js_opp,null,t,null,a.join(i.CALL_CHAIN_LINK_SEPARATOR))}},{key:"jsDemandResponse",value:function(t,e){this.send(i.VID_IO_EVENTS.cm_js_demand_req_resp,t,e)}},{key:"jsDemandRequest",value:function(t){this.fireChain(t,this.demandTag_)}}]),t}();n.default=a},{"./constants":223}],236:[function(t,e,n){"use strict";function r(t){u=t}Object.defineProperty(n,"__esModule",{value:!0}),n.ViewabilityDetection=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();n._set=r,n.init=function(t,e,n){r(new s(t,e));var i=n||function(){u._hasBeenDetected=!0};return u.setViewRightNow(i),u.poll(),u},n.detector=function(){return u};var a=function(t){return t&&t.__esModule?t:{default:t}}(t("lodash/isElement"));t("oath-viewability/dist/clj");var o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(t("./constants")),s=n.ViewabilityDetection=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.slot=e,this.doc=n||document,this._isInView=o.VIEWABILITY.UNKNOWN,this._viewablePercent=-1,this._tabIsInView=!0,this._hasBeenDetected=!1,this.hiddenAttribute=null,this.visibilityChangeEvent=null}return i(t,[{key:"setViewRightNow",value:function(t){var e=this;(0,a.default)(this.slot)&&window.oath.viewability.then(function(n){e._viewablePercent=n.getPercent(e.slot),e._isInView=n.getVisible(e.slot),e._hasBeenDetected=!0,t()}).catch(function(e){t()})}},{key:"poll",value:function(){var t=this;setInterval(function(){t.setViewRightNow(function(){})},1e3)}},{key:"hasBeenDetected",get:function(){return this._hasBeenDetected}},{key:"viewabilityPercent",get:function(){return this._viewablePercent}},{key:"isInView",get:function(){return this._isInView}}]),t}(),u=null},{"./constants":223,"lodash/isElement":155,"oath-viewability/dist/clj":185}],237:[function(t,e,n){e.exports={url:"s.update.morgdog.springserve.com/2/465673/analytics.js",dt:"4656731475874383737000"}},{}],238:[function(t,e,n){e.exports={MAX_WRAPPERS:10,VAST_TIMEOUT:3e3,WRAPPER_CHAIN_TIMEOUT:15e3,VPAID_SCRIPT_TIMEOUT:5e3,SUPPLY_ERROR_PIXEL_TIMEOUT:1e3,JSON_TIMEOUT:2e4,SSC_TIMEOUT:2e4,BROADCAST_VAST_REQUEST_TIMEOUT:1e3}},{}]},{},[205])(205)});